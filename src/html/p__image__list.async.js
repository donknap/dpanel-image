"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4214],{95556:function(N,y,n){var _=n(87462),d=n(62435),T=n(3803),c=n(84089),u=function(E,C){return d.createElement(c.Z,(0,_.Z)({},E,{ref:C,icon:T.Z}))},v=d.forwardRef(u);y.Z=v},80821:function(N,y,n){n.d(y,{Z:function(){return B}});var _=n(5574),d=n.n(_),T=n(93246),c=n(54006),u=n(31418),v=n(86738),p=n(14726),E=n(62435),C=n(86074);function B(i){var W=(0,E.useState)(!1),M=d()(W,2),$=M[0],O=M[1],b=u.Z.useApp(),D=(0,c.useIntl)(),A=function(){O(!0),i.action().then(function(L){if(O(!1),typeof i.onSuccess=="function"&&i.onSuccess(L),i.messageSuccess){var I="";i.messageSuccess.indexOf(".")>-1?I=D.formatMessage({id:i.messageSuccess}):I=i.messageSuccess,i.asynced?(0,T.Rk)(b,I):(0,T.$h)(b,I)}}).catch(function(L){O(!1),typeof i.onError=="function"&&i.onError(L)})};return i.confirm?(0,C.jsx)(v.Z,{style:{width:500},title:"\u63D0\u793A",description:i.confirm,onConfirm:A,okText:"Yes",cancelText:"No",children:(0,C.jsx)(p.ZP,{disabled:i.disabled,icon:i.icon,loading:$,danger:i.danger,type:i.type,children:i.children})}):(0,C.jsx)(p.ZP,{disabled:i.disabled,icon:i.icon,loading:$,onClick:A,danger:i.danger,type:i.type,children:i.children})}},88583:function(N,y,n){n.r(y),n.d(y,{default:function(){return h}});var _=n(15009),d=n.n(_),T=n(99289),c=n.n(T),u=n(5574),v=n.n(u),p=n(12010),E=n(78957),C=n(66309),B=n(75891),i=n(96074),W=n(83062),M=n(84567),$=n(68508),O=n(62435),b=n(54006),D=n(18148),A=n(5251),U=n(80821),L=n(43425),I=n(95556),a=n(86074);function h(){var m=[{title:"Id",ellipsis:!0,search:!1,dataIndex:"Id",width:200,render:function(s,t,r,l,f){return(0,a.jsx)(b.Link,{to:"/image/detail/"+t.Id,children:t.Id},"edit")}},{title:"Tag",dataIndex:"tag",render:function(s,t,r,l){return(0,a.jsx)(E.Z,{direction:"vertical",style:{textAlign:"left"},children:t.RepoTags.map(function(f,g){return(0,a.jsx)(C.Z,{color:"#2db7f5",children:(0,a.jsx)(B.Z.Text,{copyable:!0,style:{color:"#ffffff"},children:f},g)},g)})},t.Id)}},{title:"\u5C3A\u5BF8",dataIndex:"size",ellipsis:!0,width:"120px",search:!1,sorter:function(s,t){return s.Size-t.Size},render:function(s,t,r,l){return(0,a.jsx)("div",{children:(0,A.FI)(parseFloat(t.Size))},t.Id)}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(s,t,r,l){return(0,a.jsx)("div",{children:(0,A.ZM)(t.Created*1e3)},t.Id)},sorter:function(s,t){return s.Created-t.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:"100px",render:function(s,t,r,l){return(0,a.jsxs)(E.Z,{split:(0,a.jsx)(i.Z,{type:"vertical"}),children:[(0,a.jsx)(b.Link,{to:"/image/detail/"+t.Id,children:(0,a.jsx)(W.Z,{title:"\u7BA1\u7406",children:(0,a.jsx)(L.Z,{})})},"edit"),(0,a.jsx)(b.Link,{to:"/app/create/image?imageId="+t.Id,children:(0,a.jsx)(W.Z,{title:"\u521B\u5EFA\u5BB9\u5668",children:(0,a.jsx)(I.Z,{})})},"create")]})}}],o=(0,b.useParams)(),j=(0,O.useRef)(),V=(0,O.useState)({force:!1}),w=v()(V,2),G=w[0],k=w[1];return(0,O.useEffect)(function(){var e;(e=j.current)===null||e===void 0||e.reload()},[o]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p.Z,{rowKey:"Id",columns:m,request:function(){var e=c()(d()().mark(function s(t,r,l){var f;return d()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,D.KG)({tag:t.tag});case 2:return f=P.sent,P.abrupt("return",{data:f.data.list,success:!0,total:f.data.list.length});case 4:case"end":return P.stop()}},s)}));return function(s,t,r){return e.apply(this,arguments)}}(),pagination:{pageSize:10},search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:j,tableAlertOptionRender:function(s){var t=s.selectedRowKeys;return(0,a.jsx)(E.Z,{size:16,children:(0,a.jsx)(U.Z,{danger:!0,type:"primary",action:function(){return(0,D.ao)({md5:t,force:G.force})},onSuccess:function(){var l,f;return!((l=j.current)===null||l===void 0)&&l.reloadAndRest&&((f=j.current)===null||f===void 0||f.reloadAndRest()),!0},onError:function(){var l,f;return!((l=j.current)===null||l===void 0)&&l.reset&&((f=j.current)===null||f===void 0||f.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",confirm:(0,a.jsxs)(E.Z,{style:{width:280},direction:"vertical",children:[(0,a.jsx)(B.Z.Text,{children:"\u5220\u9664\u955C\u50CF\u540E\u65E0\u6CD5\u6062\u590D,\u786E\u8BA4\u5417\uFF1F"}),(0,a.jsx)(M.Z,{name:"deleteVolume",onChange:function(l){return k({force:l.target.checked})},children:"\u5F3A\u5236\u5220\u9664\uFF1F"})]}),children:"\u6279\u91CF\u5220\u9664"})})},tableExtraRender:function(){var s;return(0,a.jsx)($.Z,{mode:"horizontal",selectedKeys:[(s=o.type)!==null&&s!==void 0?s:"all"],items:[{label:(0,a.jsx)(b.Link,{to:"/image/list/all",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,a.jsx)(b.Link,{to:"/image/list/build",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})},toolBarRender:function(){return[(0,a.jsx)(U.Z,{action:function(){return(0,D.c7)()},onSuccess:function(){var t,r;return!((t=j.current)===null||t===void 0)&&t.reloadAndRest&&((r=j.current)===null||r===void 0||r.reloadAndRest()),!0},onError:function(){var t,r;return!((t=j.current)===null||t===void 0)&&t.reset&&((r=j.current)===null||r===void 0||r.reset()),!0},messageSuccess:"\u6E05\u9664\u6210\u529F",confirm:"\u662F\u5426\u6E05\u7406\u672A\u4F7F\u7528\u6216\u662F\u672A\u8FD0\u884C\u7684\u955C\u50CF",children:"\u6E05\u7406\u672A\u4F7F\u7528\u955C\u50CF"})]}})})}},18148:function(N,y,n){n.d(y,{$q:function(){return $},KG:function(){return v},T8:function(){return W},Xn:function(){return B},ao:function(){return b},c5:function(){return L},c7:function(){return A}});var _=n(15009),d=n.n(_),T=n(99289),c=n.n(T),u=n(54006);function v(a){return p.apply(this,arguments)}function p(){return p=c()(d()().mark(function a(h){return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,u.request)("/api/app/image/get-list",{method:"POST",data:h}));case 1:case"end":return o.stop()}},a)})),p.apply(this,arguments)}function E(a){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function a(h){return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,request("/api/app/log/image-build",{method:"POST",data:h});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},a)})),C.apply(this,arguments)}function B(a){return i.apply(this,arguments)}function i(){return i=c()(d()().mark(function a(h){return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,u.request)("/api/app/image/get-list-build",{method:"POST",data:h}));case 1:case"end":return o.stop()}},a)})),i.apply(this,arguments)}function W(a){return M.apply(this,arguments)}function M(){return M=c()(d()().mark(function a(h){return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,u.request)("/api/app/image/get-build-task",{method:"POST",data:h});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},a)})),M.apply(this,arguments)}function $(a){return O.apply(this,arguments)}function O(){return O=c()(d()().mark(function a(h){return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,u.request)("/api/app/image/delete-build-task",{method:"POST",data:h});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},a)})),O.apply(this,arguments)}function b(a){return D.apply(this,arguments)}function D(){return D=c()(d()().mark(function a(h){return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,u.request)("/api/app/image/image-delete",{method:"POST",data:h});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},a)})),D.apply(this,arguments)}function A(){return U.apply(this,arguments)}function U(){return U=c()(d()().mark(function a(){return d()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,u.request)("/api/app/image/image-prune",{method:"POST"});case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},a)})),U.apply(this,arguments)}function L(){return I.apply(this,arguments)}function I(){return I=c()(d()().mark(function a(){return d()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,u.request)("/api/app/image/build-prune",{method:"POST"});case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},a)})),I.apply(this,arguments)}},5251:function(N,y,n){n.d(y,{FI:function(){return d},ZM:function(){return T}});function _(c){return c.trim()}function d(c){var u="";c<.1*1024?u=c.toFixed(2)+"B":c<.1*1024*1024?u=(c/1024).toFixed(2)+"KB":c<1*1024*1024*1024?u=(c/(1024*1024)).toFixed(2)+"MB":u=(c/(1024*1024*1024)).toFixed(2)+"GB";var v=u+"",p=v.indexOf("."),E=v.substr(p+1,2);return E=="00"?v.substring(0,p)+v.substr(p+3,2):u}function T(c){if(c){var u=new Date(c),v=u.getFullYear()+"-",p=(u.getMonth()+1<10?"0"+(u.getMonth()+1):u.getMonth()+1)+"-",E=(u.getDate()<10?"0"+u.getDate():u.getDate())+" ",C=(u.getHours()<10?"0"+u.getHours():u.getHours())+":",B=(u.getMinutes()<10?"0"+u.getMinutes():u.getMinutes())+":",i=u.getSeconds()<10?"0"+u.getSeconds():u.getSeconds();return v+p+E+C+B+i}}},66309:function(N,y,n){n.d(y,{Z:function(){return k}});var _=n(62435),d=n(97937),T=n(93967),c=n.n(T),u=n(98787),v=n(69760),p=n(45353),E=n(53124),C=n(54548),B=n(10274),i=n(14747),W=n(45503),M=n(92030);const $=e=>{const{paddingXXS:s,lineWidth:t,tagPaddingHorizontal:r,componentCls:l,calc:f}=e,g=f(r).sub(t).equal(),P=f(s).sub(t).equal();return{[l]:Object.assign(Object.assign({},(0,i.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:g,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,C.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${l}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${l}-close-icon`]:{marginInlineStart:P,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${l}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},["&-checkable"]:{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${l}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},["&-hidden"]:{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:g}}),[`${l}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},O=e=>{const{lineWidth:s,fontSizeIcon:t,calc:r}=e,l=e.fontSizeSM;return(0,W.TS)(e,{tagFontSize:l,tagLineHeight:(0,C.bf)(r(e.lineHeightSM).mul(l).equal()),tagIconSize:r(t).sub(r(s).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},b=e=>({defaultBg:new B.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var D=(0,M.I$)("Tag",e=>{const s=O(e);return $(s)},b),A=function(e,s){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&s.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(e);l<r.length;l++)s.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(t[r[l]]=e[r[l]]);return t},L=_.forwardRef((e,s)=>{const{prefixCls:t,style:r,className:l,checked:f,onChange:g,onClick:P}=e,K=A(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:H,tag:x}=_.useContext(E.E_),X=J=>{g==null||g(!f),P==null||P(J)},Z=H("tag",t),[F,Y,Q]=D(Z),R=c()(Z,`${Z}-checkable`,{[`${Z}-checkable-checked`]:f},x==null?void 0:x.className,l,Y,Q);return F(_.createElement("span",Object.assign({},K,{ref:s,style:Object.assign(Object.assign({},r),x==null?void 0:x.style),className:R,onClick:X})))}),I=n(98719);const a=e=>(0,I.Z)(e,(s,t)=>{let{textColor:r,lightBorderColor:l,lightColor:f,darkColor:g}=t;return{[`${e.componentCls}${e.componentCls}-${s}`]:{color:r,background:f,borderColor:l,"&-inverse":{color:e.colorTextLightSolid,background:g,borderColor:g},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var h=(0,M.bk)(["Tag","preset"],e=>{const s=O(e);return a(s)},b);function m(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const o=(e,s,t)=>{const r=m(t);return{[`${e.componentCls}${e.componentCls}-${s}`]:{color:e[`color${t}`],background:e[`color${r}Bg`],borderColor:e[`color${r}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var j=(0,M.bk)(["Tag","status"],e=>{const s=O(e);return[o(s,"success","Success"),o(s,"processing","Info"),o(s,"error","Error"),o(s,"warning","Warning")]},b),V=function(e,s){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&s.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(e);l<r.length;l++)s.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(t[r[l]]=e[r[l]]);return t};const w=(e,s)=>{const{prefixCls:t,className:r,rootClassName:l,style:f,children:g,icon:P,color:K,onClose:H,closeIcon:x,closable:X,bordered:Z=!0}=e,F=V(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable","bordered"]),{getPrefixCls:Y,direction:Q,tag:R}=_.useContext(E.E_),[J,ee]=_.useState(!0);_.useEffect(()=>{"visible"in F&&ee(F.visible)},[F.visible]);const ne=(0,u.o2)(K),re=(0,u.yT)(K),q=ne||re,oe=Object.assign(Object.assign({backgroundColor:K&&!q?K:void 0},R==null?void 0:R.style),f),S=Y("tag",t),[le,ue,ie]=D(S),ce=c()(S,R==null?void 0:R.className,{[`${S}-${K}`]:q,[`${S}-has-color`]:K&&!q,[`${S}-hidden`]:!J,[`${S}-rtl`]:Q==="rtl",[`${S}-borderless`]:!Z},r,l,ue,ie),te=z=>{z.stopPropagation(),H==null||H(z),!z.defaultPrevented&&ee(!1)},[,de]=(0,v.Z)({closable:X,closeIcon:x!=null?x:R==null?void 0:R.closeIcon,customCloseIconRender:z=>z===null?_.createElement(d.Z,{className:`${S}-close-icon`,onClick:te}):_.createElement("span",{className:`${S}-close-icon`,onClick:te},z),defaultCloseIcon:null,defaultClosable:!1}),_e=typeof F.onClick=="function"||g&&g.type==="a",ae=P||null,fe=ae?_.createElement(_.Fragment,null,ae,g&&_.createElement("span",null,g)):g,se=_.createElement("span",Object.assign({},F,{ref:s,className:ce,style:oe}),fe,de,ne&&_.createElement(h,{key:"preset",prefixCls:S}),re&&_.createElement(j,{key:"status",prefixCls:S}));return le(_e?_.createElement(p.Z,{component:"Tag"},se):se)},G=_.forwardRef(w);G.CheckableTag=L;var k=G}}]);
