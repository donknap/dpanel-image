"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5283],{80821:function(X,T,t){t.d(T,{Z:function(){return L}});var _=t(5574),s=t.n(_),$=t(93246),j=t(54006),A=t(31418),S=t(86738),b=t(14726),P=t(62435),O=t(86074);function L(u){var W=(0,P.useState)(!1),C=s()(W,2),y=C[0],E=C[1],B=A.Z.useApp(),F=(0,j.useIntl)(),M=function(){E(!0),u.action().then(function(g){if(E(!1),typeof u.onSuccess=="function"&&u.onSuccess(g),u.messageSuccess){var e="";u.messageSuccess.indexOf(".")>-1?e=F.formatMessage({id:u.messageSuccess}):e=u.messageSuccess,u.asynced?(0,$.Rk)(B,e):(0,$.$h)(B,e)}}).catch(function(g){E(!1),typeof u.onError=="function"&&u.onError(g)})};return u.confirm?(0,O.jsx)(S.Z,{style:{width:500},title:"\u63D0\u793A",description:u.confirm,onConfirm:M,okText:"Yes",cancelText:"No",children:(0,O.jsx)(b.ZP,{disabled:u.disabled,icon:u.icon,loading:y,danger:u.danger,type:u.type,children:u.children})}):(0,O.jsx)(b.ZP,{disabled:u.disabled,icon:u.icon,loading:y,onClick:M,danger:u.danger,type:u.type,children:u.children})}},75389:function(X,T,t){t.r(T),t.d(T,{default:function(){return ue}});var _=t(15009),s=t.n(_),$=t(99289),j=t.n($),A=t(5574),S=t.n(A),b=t(80821),P=t(14946),O=t(93246),L=t(184),u=t(5966),W=t(62370),C=t(97462),y=t(24739),E=t(17186),B=t(52688),F=t(31418),M=t(14726),w=t(34041),g=t(62435),e=t(86074),v=(0,g.forwardRef)(function(I,z){var k=(0,g.useState)(!1),U=S()(k,2),V=U[0],H=U[1],G=F.Z.useApp(),n=(0,g.useRef)();return(0,g.useImperativeHandle)(z,function(){return{}}),(0,e.jsxs)(L.a,{name:"create",title:"\u6DFB\u52A0\u5B58\u50A8\u5377",open:V,onOpenChange:function(Z){H(Z)},formRef:n,trigger:(0,e.jsx)(M.ZP,{type:"primary",children:"\u6DFB\u52A0"}),onFinish:function(){var K=j()(s()().mark(function Z(m){var R,N,d,o,a,i,c,l;return s()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return m.driver=="macvlan"&&(m.driverOptionName||(m.driverOptionName=[],m.driverOptionValue=[]),m.driverOptionName.push("parent"),m.driverOptionValue.push(m.macvlanParentCard)),console.log(m),x.next=4,(0,P.XY)({name:m.name,driver:(R=m.driver)!==null&&R!==void 0?R:"bridge",ipSubnet:(N=m.ipSubnet)!==null&&N!==void 0?N:"",ipGateway:(d=m.ipGateway)!==null&&d!==void 0?d:"",ipRange:(o=m.ipRange)!==null&&o!==void 0?o:"",ipAux:m.ipAux,driverOption:m.driverOption,internal:(a=m.internal)!==null&&a!==void 0?a:!1,attachable:(i=m.attachable)!==null&&i!==void 0?i:!1});case 4:if(c=x.sent,!(c&&c.data&&c.data.id!="")){x.next=10;break}return(0,O.$h)(G,"\u6DFB\u52A0\u7F51\u7EDC\u6210\u529F"),I.onFinish&&I.onFinish(),(l=n.current)===null||l===void 0||l.resetFields(),x.abrupt("return",!0);case 10:case"end":return x.stop()}},Z)}));return function(Z){return K.apply(this,arguments)}}(),children:[(0,e.jsx)(u.Z,{label:"\u540D\u79F0",name:"name",placeholder:"\u6307\u5B9A\u552F\u4E00\u7684\u7F51\u7EDC\u540D\u79F0"}),(0,e.jsx)(W.Z,{label:"\u7C7B\u578B",name:"driver",children:(0,e.jsxs)(w.Z,{defaultValue:"bridge",children:[(0,e.jsx)(w.Z.Option,{value:"bridge",children:"bridge"}),(0,e.jsx)(w.Z.Option,{value:"ipvlan",children:"ipvlan"}),(0,e.jsx)(w.Z.Option,{value:"macvlan",children:"macvlan"}),(0,e.jsx)(w.Z.Option,{value:"overlay",children:"overlay"})]})}),(0,e.jsx)(C.Z,{name:["driver"],children:function(Z){var m=Z.driver;if(m=="macvlan")return(0,e.jsx)(u.Z,{label:"\u7236\u7F51\u5361",name:"macvlanParentCard"})}}),(0,e.jsxs)(y.UW,{title:"IPV4\u914D\u7F6E",children:[(0,e.jsx)(u.Z,{label:"\u5B50\u7F51",name:"ipSubnet",width:"md",placeholder:"\u4F8B\u5982: 172.20.0.0/16"}),(0,e.jsx)(u.Z,{label:"\u7F51\u5173",name:"ipGateway",width:"md",placeholder:"\u4F8B\u5982: 172.20.10.11"}),(0,e.jsx)(u.Z,{label:"Ip\u8303\u56F4",name:"ipRange",width:"md",placeholder:"\u4F8B\u5982: 172.20.10.128/25"})]}),(0,e.jsx)(E.u,{name:"ipAux",label:"\u6392\u9664Ip",children:(0,e.jsxs)(y.UW,{children:[(0,e.jsx)(u.Z,{label:"\u8BBE\u5907\u540D\u79F0",name:"ipAuxDevice",width:"md"}),(0,e.jsx)(u.Z,{label:"Ip\u5730\u5740",name:"ipAuxAddress",width:"md"})]})}),(0,e.jsx)(E.u,{name:"driverOption",label:"\u81EA\u5B9A\u4E49\u9A71\u52A8\u914D\u7F6E",children:(0,e.jsxs)(y.UW,{children:[(0,e.jsx)(u.Z,{label:"\u540D\u79F0",name:"driverOptionName",width:"md"}),(0,e.jsx)(u.Z,{label:"\u503C",name:"driverOptionValue",width:"md"})]})}),(0,e.jsx)(B.Z,{name:"internal",label:"\u9694\u79BB\u5916\u90E8\u8BBF\u95EE",initialValue:!1}),(0,e.jsx)(B.Z,{name:"attachable",label:"\u5141\u8BB8\u624B\u52A8\u9644\u52A0\u5BB9\u5668",initialValue:!1})]})}),f=v,p=t(43425),r=t(48689),q=t(12010),J=t(38345),ee=t(66309),Y=t(78957),Q=t(96074),ne=t(83062),te=t(85576),h=t(26412),re=t(63490),ae=t(39711);function ue(){var I=(0,g.useRef)(),z=(0,g.useState)(""),k=S()(z,2),U=k[0],V=k[1],H=(0,g.useState)(),G=S()(H,2),n=G[0],K=G[1],Z=(0,g.useState)(),m=S()(Z,2),R=m[0],N=m[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(q.Z,{rowKey:"Name",columns:[{title:"\u540D\u79F0",ellipsis:!0,dataIndex:"Name",render:function(o,a,i,c,l){return a.Name=="none"||a.Name=="bridge"||a.Name=="host"?(0,e.jsxs)(e.Fragment,{children:[a.Name," ",(0,e.jsx)(ee.Z,{color:"blue",children:"System"})]}):(0,e.jsx)(e.Fragment,{children:o})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4 IPAM Subnet",ellipsis:!0,width:150,search:!1,dataIndex:["IPAM","Config",0,"Subnet"]},{title:"IPV4 IPAM Gateway",ellipsis:!0,width:150,search:!1,dataIndex:["IPAM","Config",0,"Gateway"]},{title:"\u521B\u5EFA\u65F6\u95F4",ellipsis:!0,width:180,search:!1,dataIndex:"Created",render:function(o,a,i,c,l){return new Date(a.Created).toLocaleString()}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(o,a,i,c,l){return(0,e.jsx)(Y.Z,{split:(0,e.jsx)(Q.Z,{type:"vertical"}),children:(0,e.jsx)(M.ZP,{type:"link",onClick:function(){V(a.Name)},children:(0,e.jsx)(ne.Z,{title:"\u7BA1\u7406",children:(0,e.jsx)(p.Z,{})})})})}}],request:function(){var d=j()(s()().mark(function o(a,i,c){var l;return s()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,P.jR)({name:a.Name});case 2:return l=x.sent,x.abrupt("return",{data:l.data.list,success:!0,total:l.data.list.length});case 4:case"end":return x.stop()}},o)}));return function(o,a,i){return d.apply(this,arguments)}}(),toolBarRender:function(){return[(0,e.jsx)(f,{onFinish:function(){var a,i;!((a=I.current)===null||a===void 0)&&a.reloadAndRest&&((i=I.current)===null||i===void 0||i.reloadAndRest())}}),(0,e.jsx)(b.Z,{action:function(){return(0,P.CI)()},onSuccess:function(){var a,i;return!((a=I.current)===null||a===void 0)&&a.reloadAndRest&&((i=I.current)===null||i===void 0||i.reloadAndRest()),!0},onError:function(){var a,i;return!((a=I.current)===null||a===void 0)&&a.reset&&((i=I.current)===null||i===void 0||i.reset()),!0},messageSuccess:"\u6E05\u9664\u6210\u529F",confirm:"\u662F\u5426\u6E05\u7406\u672A\u4F7F\u7528\u7684\u7F51\u7EDC\uFF1F",children:"\u6E05\u7406\u672A\u4F7F\u7528\u5B58\u50A8"})]},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:I,tableAlertOptionRender:function(o){var a=o.selectedRowKeys;return(0,e.jsx)(Y.Z,{size:16,children:(0,e.jsx)(b.Z,{danger:!0,type:"primary",action:function(){return(0,P._x)({name:a})},onSuccess:function(){var c,l;return!((c=I.current)===null||c===void 0)&&c.reloadAndRest&&((l=I.current)===null||l===void 0||l.reloadAndRest()),!0},onError:function(){var c,l;return!((c=I.current)===null||c===void 0)&&c.reset&&((l=I.current)===null||l===void 0||l.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})},pagination:{pageSize:10}}),(0,e.jsxs)(te.Z,{width:800,open:U!="",afterOpenChange:j()(s()().mark(function d(){var o,a;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!U){c.next=6;break}return c.next=3,(0,P.IS)({name:U});case 3:o=c.sent,o.data.info.Containers?(a=[],Object.keys(o.data.info.Containers).map(function(l){o.data.info.Containers[l].Id=l,a.push(o.data.info.Containers[l])}),N(a)):N([]),K(o.data.info);case 6:case"end":return c.stop()}},d)})),footer:!1,onCancel:function(){return V("")},children:[(0,e.jsx)(J.Z,{title:"\u5B58\u50A8\u8BE6\u60C5",ghost:!0,children:(0,e.jsxs)(h.Z,{labelStyle:{width:"180px"},column:1,bordered:!0,children:[(0,e.jsx)(h.Z.Item,{label:"\u540D\u79F0",children:n==null?void 0:n.Name}),(0,e.jsx)(h.Z.Item,{label:"Id",children:n==null?void 0:n.Id}),(0,e.jsx)(h.Z.Item,{label:"Driver",children:n==null?void 0:n.Driver}),(0,e.jsx)(h.Z.Item,{label:"Scope",children:n==null?void 0:n.Scope}),(0,e.jsx)(h.Z.Item,{label:"Attachable",children:n!=null&&n.Attachable?"\u662F":"\u5426"}),(0,e.jsx)(h.Z.Item,{label:"Internal",children:n!=null&&n.Internal?"\u662F":"\u5426"}),(0,e.jsx)(h.Z.Item,{label:"IPV4 Subnet",children:(n==null?void 0:n.IPAM.Config[0])&&(n==null?void 0:n.IPAM.Config[0].Subnet)}),(0,e.jsx)(h.Z.Item,{label:"IPV4 Gateway",children:(n==null?void 0:n.IPAM.Config[0])&&(n==null?void 0:n.IPAM.Config[0].Gateway)}),(0,e.jsx)(h.Z.Item,{label:"IPV4 IP Range ",children:(n==null?void 0:n.IPAM.Config[0])&&(n==null?void 0:n.IPAM.Config[0].IPRange)}),(0,e.jsx)(h.Z.Item,{label:"IPV4 Excluded IPs",children:(n==null?void 0:n.IPAM.Config[0])&&(n==null?void 0:n.IPAM.Config[0].AuxiliaryAddresses)&&Object.keys(n==null?void 0:n.IPAM.Config[0].AuxiliaryAddresses).map(function(d){return(n==null?void 0:n.IPAM.Config[0].AuxiliaryAddresses[d])+" ,"})}),(0,e.jsx)(h.Z.Item,{label:"Options",children:(0,e.jsx)(h.Z,{labelStyle:{width:"150px"},column:1,bordered:!0,children:(n==null?void 0:n.Options)&&Object.keys(n==null?void 0:n.Options).map(function(d){return(0,e.jsx)(h.Z.Item,{label:d,children:n.Options[d]},d)})})}),(0,e.jsx)(h.Z.Item,{label:"Lables",children:(0,e.jsx)(h.Z,{labelStyle:{width:"150px"},column:1,bordered:!0,children:(n==null?void 0:n.Labels)&&Object.keys(n==null?void 0:n.Labels).map(function(d){return(0,e.jsx)(h.Z.Item,{label:d,children:n.Labels[d]},d)})})})]})}),(0,e.jsx)(J.Z,{title:"\u7F51\u7EDC\u5185\u5BB9\u5668",ghost:!0,children:(0,e.jsx)(re.Z,{rowKey:"Id",columns:[{title:"\u5BB9\u5668\u540D\u79F0",dataIndex:"Name",render:function(o,a,i){return(0,e.jsx)(ae.rU,{target:"_blank",to:"/app/detail/edit/".concat(a.Id),children:a.Name})}},{title:"IPV4 Address",dataIndex:"IPv4Address"},{title:"MacAddress",dataIndex:"MacAddress"},{title:"\u64CD\u4F5C",render:function(o,a,i){return(0,e.jsx)(Y.Z,{split:(0,e.jsx)(Q.Z,{type:"vertical"}),children:(0,e.jsx)(b.Z,{type:"text",action:function(){var l,D;return(0,P.t9)({name:(l=n==null?void 0:n.Id)!==null&&l!==void 0?l:"",containerName:(D=a.Id)!==null&&D!==void 0?D:""})},messageSuccess:"\u5BB9\u5668\u6210\u529F\u9000\u51FA\u8BE5\u7F51\u7EDC",onSuccess:function(){var l=R==null?void 0:R.filter(function(D){return D.Id!=a.Id});N(l)},children:(0,e.jsx)(r.Z,{})},"delete")})}}],dataSource:R,pagination:!1})})]})]})}},14946:function(X,T,t){t.d(T,{CI:function(){return L},HY:function(){return M},IS:function(){return S},XY:function(){return y},_3:function(){return g},_x:function(){return W},jR:function(){return P},t9:function(){return B}});var _=t(15009),s=t.n(_),$=t(99289),j=t.n($),A=t(54006);function S(v){return b.apply(this,arguments)}function b(){return b=j()(s()().mark(function v(f){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,A.request)("/api/app/network/get-detail",{method:"POST",data:f}));case 1:case"end":return r.stop()}},v)})),b.apply(this,arguments)}function P(v){return O.apply(this,arguments)}function O(){return O=j()(s()().mark(function v(f){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,A.request)("/api/app/network/get-list",{method:"POST",data:f}));case 1:case"end":return r.stop()}},v)})),O.apply(this,arguments)}function L(){return u.apply(this,arguments)}function u(){return u=j()(s()().mark(function v(){return s()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,A.request)("/api/app/network/prune",{method:"POST"});case 2:return p.abrupt("return",p.sent);case 3:case"end":return p.stop()}},v)})),u.apply(this,arguments)}function W(v){return C.apply(this,arguments)}function C(){return C=j()(s()().mark(function v(f){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,A.request)("/api/app/network/delete",{method:"POST",data:f});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},v)})),C.apply(this,arguments)}function y(v){return E.apply(this,arguments)}function E(){return E=j()(s()().mark(function v(f){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,A.request)("/api/app/network/create",{method:"POST",data:f});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},v)})),E.apply(this,arguments)}function B(v){return F.apply(this,arguments)}function F(){return F=j()(s()().mark(function v(f){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,A.request)("/api/app/network/disconnect",{method:"POST",data:f});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},v)})),F.apply(this,arguments)}function M(v){return w.apply(this,arguments)}function w(){return w=j()(s()().mark(function v(f){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,A.request)("/api/app/network/connect",{method:"POST",data:f});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},v)})),w.apply(this,arguments)}function g(v){return e.apply(this,arguments)}function e(){return e=j()(s()().mark(function v(f){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,A.request)("/api/app/network/get-container-list",{method:"POST",data:f}));case 1:case"end":return r.stop()}},v)})),e.apply(this,arguments)}}}]);
