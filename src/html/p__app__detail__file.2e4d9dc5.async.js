"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5738],{63434:function(se,G,t){var D=t(1413),g=t(45987),$=t(22270),R=t(84567),V=t(62435),H=t(83607),b=t(33468),T=t(86074),u=["options","fieldProps","proFieldProps","valueEnum"],z=V.forwardRef(function(w,L){var C=w.options,E=w.fieldProps,A=w.proFieldProps,I=w.valueEnum,v=(0,g.Z)(w,u);return(0,T.jsx)(b.Z,(0,D.Z)({ref:L,valueType:"checkbox",valueEnum:(0,$.h)(I,void 0),fieldProps:(0,D.Z)({options:C},E),lightProps:(0,D.Z)({labelFormatter:function(){return(0,T.jsx)(b.Z,(0,D.Z)({ref:L,valueType:"checkbox",mode:"read",valueEnum:(0,$.h)(I,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,D.Z)({options:C},E),proFieldProps:A},v))}},v.lightProps),proFieldProps:A},v))}),Q=V.forwardRef(function(w,L){var C=w.fieldProps,E=w.children;return(0,T.jsx)(R.Z,(0,D.Z)((0,D.Z)({ref:L},C),{},{children:E}))}),U=(0,H.G)(Q,{valuePropName:"checked"}),Y=U;Y.Group=z,G.Z=Y},64317:function(se,G,t){var D=t(1413),g=t(45987),$=t(22270),R=t(62435),V=t(66758),H=t(33468),b=t(86074),T=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],z=function(C,E){var A=C.fieldProps,I=C.children,v=C.params,J=C.proFieldProps,_=C.mode,W=C.valueEnum,q=C.request,K=C.showSearch,ee=C.options,te=(0,g.Z)(C,T),ae=(0,R.useContext)(V.Z);return(0,b.jsx)(H.Z,(0,D.Z)((0,D.Z)({valueEnum:(0,$.h)(W),request:q,params:v,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,D.Z)({options:ee,mode:_,showSearch:K,getPopupContainer:ae.getPopupContainer},A),ref:E,proFieldProps:J},te),{},{children:I}))},Q=R.forwardRef(function(L,C){var E=L.fieldProps,A=L.children,I=L.params,v=L.proFieldProps,J=L.mode,_=L.valueEnum,W=L.request,q=L.options,K=(0,g.Z)(L,u),ee=(0,D.Z)({options:q,mode:J||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},E),te=(0,R.useContext)(V.Z);return(0,b.jsx)(H.Z,(0,D.Z)((0,D.Z)({valueEnum:(0,$.h)(_),request:W,params:I,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,D.Z)({getPopupContainer:te.getPopupContainer},ee),ref:C,proFieldProps:v},K),{},{children:A}))}),U=R.forwardRef(z),Y=Q,w=U;w.SearchSelect=Y,w.displayName="ProFormComponent",G.Z=w},68932:function(se,G,t){t.r(G),t.d(G,{default:function(){return st}});var D=t(5574),g=t.n(D),$=t(15009),R=t.n($),V=t(99289),H=t.n(V),b=t(28031),T=t(87462),u=t(62435),z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32z"}}]},name:"folder",theme:"filled"},Q=z,U=t(84089),Y=function(o,i){return u.createElement(U.Z,(0,T.Z)({},o,{ref:i,icon:Q}))},w=u.forwardRef(Y),L=w,C=t(29158),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.7c6 6 9.4 14.1 9.4 22.6V928c0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32h424.7c8.5 0 16.7 3.4 22.7 9.4l215.2 215.3zM790.2 326L602 137.8V326h188.2z"}}]},name:"file",theme:"filled"},A=E,I=function(o,i){return u.createElement(U.Z,(0,T.Z)({},o,{ref:i,icon:A}))},v=u.forwardRef(I),J=v,_=t(90639),W=t(14726),q=(0,u.createContext)({}),K=q,ee=t(24969),te=t(48689),ae=t(78957),ve=t(80821),pe=t(88484),he=t(37476),le=t(1413),Fe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},xe=Fe,Pe=function(o,i){return u.createElement(U.Z,(0,T.Z)({},o,{ref:i,icon:xe}))},ge=u.forwardRef(Pe),Ee=ge,je=t(28459),Ce=t(31365),Ze=t(9105),Re=t(83607),e=t(86074),Oe=u.forwardRef(function(n,o){var i=n.fieldProps,f=n.title,B=f===void 0?"\u5355\u51FB\u6216\u62D6\u52A8\u6587\u4EF6\u5230\u6B64\u533A\u57DF\u8FDB\u884C\u4E0A\u4F20":f,h=n.icon,Z=h===void 0?(0,e.jsx)(Ee,{}):h,c=n.description,O=c===void 0?"\u652F\u6301\u5355\u6B21\u6216\u6279\u91CF\u4E0A\u4F20":c,S=n.action,j=n.accept,y=n.onChange,M=n.value,P=n.children,d=n.max,l=n.proFieldProps,x=(0,u.useContext)(je.ZP.ConfigContext),s=(0,u.useContext)(Ze.A),a=(l==null?void 0:l.mode)||s.mode||"edit",r=x.getPrefixCls("upload"),m=(d===void 0||!M||(M==null?void 0:M.length)<d)&&a!=="read"&&(l==null?void 0:l.readonly)!==!0;return(0,e.jsxs)(Ce.Z.Dragger,(0,le.Z)((0,le.Z)({ref:o,name:"files",action:S,accept:j,fileList:M},i),{},{onChange:function(F){y==null||y(F),i!=null&&i.onChange&&(i==null||i.onChange(F))},style:(0,le.Z)((0,le.Z)({},i==null?void 0:i.style),{},{display:m?void 0:"none"}),children:[(0,e.jsx)("p",{className:"".concat(r,"-drag-icon"),children:Z}),(0,e.jsx)("p",{className:"".concat(r,"-text"),children:B}),(0,e.jsx)("p",{className:"".concat(r,"-hint"),children:O}),P?(0,e.jsx)("div",{className:"".concat(r,"-extra"),style:{padding:16},children:P}):null]}))}),ye=(0,Re.G)(Oe,{getValueFromEvent:function(o){return o.fileList}}),Be=ye,Me=t(97961),de=t(54006);function De(){var n=(0,u.useRef)(),o=(0,u.useContext)(K),i=o.fileListRef,f=o.containerMd5,B=o.currentPath,h=(0,de.useModel)("@@initialState"),Z=h.initialState,c=h.loading,O=h.error,S=h.refresh,j=h.setInitialState;return(0,e.jsx)(he.Y,{formRef:n,trigger:(0,e.jsx)(W.ZP,{icon:(0,e.jsx)(pe.Z,{}),children:"\u4E0A\u4F20"}),title:"\u4E0A\u4F20\u6587\u4EF6\u5230\u5BB9\u5668",onFinish:function(){var y=H()(R()().mark(function M(P){var d,l,x,s;return R()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return x=[],P.importFileList&&P.importFileList.map(function(m){x.push({name:m.name,path:m.response.data.path})}),(0,b.ZU)({fileList:x,md5:f,destPath:B}),(d=n.current)===null||d===void 0||d.resetFields(),i&&typeof((l=i.current)===null||l===void 0?void 0:l.reloadAndRest)=="function"&&((s=i.current)===null||s===void 0||s.reloadAndRest()),r.abrupt("return",!0);case 6:case"end":return r.stop()}},M)}));return function(M){return y.apply(this,arguments)}}(),children:(0,e.jsx)(Be,{name:"importFileList",fieldProps:{multiple:!0,name:"file",action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(M){return new Promise(function(P){var d;(0,Me._2)({path:(d=M.response.data.path)!==null&&d!==void 0?d:""}).then(function(l){P(!0)})})}}})})}var Le=t(23430),we=t(93162);function be(n){var o=(0,u.useContext)(K),i=o.containerMd5;return(0,e.jsx)(ve.Z,{action:function(){return(0,b._U)({md5:i,fileList:n.selectFileList})},onSuccess:function(B){var h=new Blob([B],{type:"application/zip"});(0,we.saveAs)(h,"export.zip")},icon:(0,e.jsx)(Le.Z,{}),children:"\u4E0B\u8F7D"})}var ne=t(38345),N=t(63434),Ae=t(24739),fe=t(5966),Ie=t(64317),ce=t(31418),X=t(93246);function Se(n){var o=(0,u.useRef)(),i=(0,u.useContext)(K),f=i.currentPath,B=i.reloadFileList,h=i.containerMd5,Z=(0,u.useState)(),c=g()(Z,2),O=c[0],S=c[1],j=ce.Z.useApp(),y=(0,u.useState)(!1),M=g()(y,2),P=M[0],d=M[1],l=function(a){var r=a.split(""),m=0,p=0,F=0;return r[1]=="r"&&(m+=4),r[2]=="w"&&(m+=2),r[3]=="x"&&(m+=1),r[4]=="r"&&(p+=4),r[5]=="w"&&(p+=2),r[6]=="x"&&(p+=1),r[7]=="r"&&(F+=4),r[8]=="w"&&(F+=2),r[9]=="x"&&(F+=1),"".concat(m).concat(p).concat(F)},x=function(a){var r;if((r=o.current)===null||r===void 0||r.setFieldValue("permission",a),a.length>=1){var m;(m=o.current)===null||m===void 0||m.setFieldsValue({ownerRead:a[0]&4,ownerWrite:a[0]&2,ownerExec:a[0]&1})}if(a.length>=2){var p;(p=o.current)===null||p===void 0||p.setFieldsValue({groupRead:a[1]&4,groupWrite:a[1]&2,groupExec:a[1]&1})}if(a.length>=3){var F;(F=o.current)===null||F===void 0||F.setFieldsValue({everyoneRead:a[2]&4,everyoneWrite:a[2]&2,everyoneExec:a[2]&1})}};return(0,u.useEffect)(function(){(0,b.lE)({md5:h}).then(function(s){S(s.data.list)})},[h]),(0,e.jsxs)(e.Fragment,{children:[!O||O.length==0?(0,e.jsx)(W.ZP,{onClick:function(){(0,X.YZ)(j,"\u8BE5\u5BB9\u5668\u4E0D\u652F\u6301\u4FEE\u6539\u6587\u4EF6\u6743\u9650")},children:"\u6743\u9650"}):(0,e.jsx)(W.ZP,{onClick:function(){if(n.selectFileObject.length==0){var a;return(a=o.current)===null||a===void 0||a.resetFields(),(0,X.YZ)(j,"\u8BF7\u5148\u9009\u62E9\u8981\u4FEE\u6539\u7684\u6587\u4EF6\u6216\u662F\u76EE\u5F55"),d(!1),!1}else d(!0)},children:"\u6743\u9650"}),(0,e.jsxs)(he.Y,{modalProps:{forceRender:!0},title:n.selectFileObject.length==1?"\u4FEE\u6539 ".concat(n.selectFileObject[0].name," \u6743\u9650"):"\u6279\u91CF\u6587\u4EF6\u4FEE\u6539\u6743\u9650",layout:"horizontal",open:P,onOpenChange:function(a){if(d(a),n.selectFileObject.length==1){var r;x(l(n.selectFileObject[0].mode));var m=n.selectFileObject[0].owner;O&&O.map(function(p){p.uid==m&&(m=p.username)}),(r=o.current)===null||r===void 0||r.setFieldValue("owner",m)}},formRef:o,onValuesChange:function(a,r){if(a.permission)x(a.permission);else{var m=["-",r.ownerRead?"r":"-",r.ownerWrite?"w":"-",r.ownerExec?"x":"-",r.groupRead?"r":"-",r.groupWrite?"w":"-",r.groupExec?"x":"-",r.everyoneRead?"r":"-",r.everyoneWrite?"w":"-",r.everyoneExec?"x":"-"];x(l(m.join("")))}},onFinish:function(){var s=H()(R()().mark(function a(r){var m,p,F,re;return R()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return F=[],n.selectFileObject.map(function(dt){F.push(dt.name)}),k.next=4,(0,b.OQ)({md5:h,fileList:F,mod:parseInt((m=r.permission)!==null&&m!==void 0?m:"600"),hasChildren:(p=r.hasChildren)!==null&&p!==void 0?p:!0,owner:r.owner});case 4:return re=k.sent,B(),k.abrupt("return",!0);case 7:case"end":return k.stop()}},a)}));return function(a){return s.apply(this,arguments)}}(),children:[(0,e.jsxs)(ne.Z,{direction:"row",gutter:[20,10],children:[(0,e.jsxs)(ne.Z,{bordered:!0,title:"\u6240\u6709\u8005",headerBordered:!0,children:[(0,e.jsx)(N.Z,{label:"\u8BFB\u53D6",name:"ownerRead"}),(0,e.jsx)(N.Z,{label:"\u5199\u5165",name:"ownerWrite"}),(0,e.jsx)(N.Z,{label:"\u6267\u884C",name:"ownerExec"})]}),(0,e.jsxs)(ne.Z,{bordered:!0,title:"\u7528\u6237\u7EC4",headerBordered:!0,children:[(0,e.jsx)(N.Z,{label:"\u8BFB\u53D6",name:"groupRead"}),(0,e.jsx)(N.Z,{label:"\u5199\u5165",name:"groupWrite"}),(0,e.jsx)(N.Z,{label:"\u6267\u884C",name:"groupExec"})]}),(0,e.jsxs)(ne.Z,{bordered:!0,title:"\u516C\u5171",headerBordered:!0,children:[(0,e.jsx)(N.Z,{label:"\u8BFB\u53D6",name:"everyoneRead"}),(0,e.jsx)(N.Z,{label:"\u5199\u5165",name:"everyoneWrite"}),(0,e.jsx)(N.Z,{label:"\u6267\u884C",name:"everyoneExec"})]})]}),(0,e.jsx)(ne.Z,{children:(0,e.jsxs)(Ae.UW,{children:[(0,e.jsx)(fe.Z,{label:"\u6743\u9650",name:"permission",fieldProps:{maxLength:3},width:"xs"}),(0,e.jsx)(Ie.Z,{label:"\u6240\u6709\u8005",name:"owner",width:"sm",options:O==null?void 0:O.map(function(s){return s.username})}),(0,e.jsx)(N.Z,{label:"\u5E94\u7528\u5230\u5B50\u76EE\u5F55",name:"hasChildren",initialValue:!0})]})})]})]})}function Te(n){var o=(0,u.useContext)(K),i=o.currentPath,f=o.reloadFileList,B=o.containerMd5,h=ce.Z.useApp();return(0,e.jsx)(W.ZP,{onClick:function(){if(n.selectFileObject.length==0)return(0,X.YZ)(h,"\u8BF7\u5148\u9009\u62E9\u8981\u89E3\u538B\u7684 zip \u6587\u4EF6"),!1;if(n.selectFileObject.length>1)return(0,X.YZ)(h,"\u89E3\u538B\u64CD\u4F5C\u53EA\u652F\u6301\u5355\u6587\u4EF6\u64CD\u4F5C"),!1;var c=n.selectFileObject[0];if(c.name.lastIndexOf(".zip")!=c.name.length-4)return(0,X.YZ)(h,"\u89E3\u538B\u64CD\u4F5C\u53EA\u652F\u6301 zip \u6587\u4EF6"),!1;(0,b.gb)({md5:B,file:c.name}).then(function(O){f()})},children:"\u89E3\u538B"})}function Ve(n){var o=(0,u.useContext)(K),i=o.fileListRef,f=o.containerMd5,B=o.currentPath,h=o.editFileRef;return(0,e.jsxs)(ae.Z,{size:16,children:[(0,e.jsx)(be,{selectFileList:n.selectFileList}),(0,e.jsx)(De,{}),(0,e.jsx)(Se,{selectFileObject:n.selectFileObject}),(0,e.jsx)(Te,{selectFileObject:n.selectFileObject}),(0,e.jsx)(W.ZP,{type:"primary",icon:(0,e.jsx)(ee.Z,{}),onClick:function(){var c;(c=h.current)===null||c===void 0||c.newFile()},children:"\u65B0\u5EFA\u6587\u4EF6"}),(0,e.jsx)(ve.Z,{danger:!0,type:"default",icon:(0,e.jsx)(te.Z,{}),action:function(){return(0,b.Yx)({md5:f,fileList:n.selectFileList})},onSuccess:function(){var c;if(i&&typeof((c=i.current)===null||c===void 0?void 0:c.reloadAndRest)=="function"){var O;(O=i.current)===null||O===void 0||O.reloadAndRest()}},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u5220\u9664"})]})}var oe=t(83062),ie=t(66309);function We(n){return n.change==0?(0,e.jsx)(oe.Z,{title:"\u5728\u5BB9\u5668\u8FD0\u884C\u65F6\u88AB\u4FEE\u6539",children:(0,e.jsx)(ie.Z,{color:"blue",children:"MODIFIED"})}):n.change==1?(0,e.jsx)(oe.Z,{title:"\u5728\u5BB9\u5668\u8FD0\u884C\u65F6\u65B0\u589E\u7684\u6587\u4EF6",children:(0,e.jsx)(ie.Z,{color:"green",children:"ADD"})}):n.change==2?(0,e.jsx)(oe.Z,{title:"\u5728\u5BB9\u5668\u8FD0\u884C\u65F6\u88AB\u5220\u9664\u6587\u4EF6",children:(0,e.jsx)(ie.Z,{color:"error",children:"DELETED"})}):n.change==100?(0,e.jsx)(oe.Z,{title:"\u6302\u8F7D\u7684\u6301\u4E45\u5316\u76EE\u5F55",children:(0,e.jsx)(ie.Z,{color:"cyan",children:"VOLUME"})}):(0,e.jsx)(e.Fragment,{})}var Ue=t(19632),me=t.n(Ue),Ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zm-180 0H238c-13 0-24.8 7.9-29.7 20L136 643.2V256h188.5l119.6 114.4H748V444z"}}]},name:"folder-open",theme:"filled"},He=Ke,Ne=function(o,i){return u.createElement(U.Z,(0,T.Z)({},o,{ref:i,icon:He}))},$e=u.forwardRef(Ne),ze=$e,Ge=t(75891),Ye=(0,u.forwardRef)(function(n,o){var i=(0,u.useContext)(K),f=i.showPath,B=(0,u.useState)([{title:"\u6839\u76EE\u5F55",path:"/"}]),h=g()(B,2),Z=h[0],c=h[1];(0,u.useImperativeHandle)(o,function(){return{addHistory:function(j,y){c([].concat(me()(Z),[{title:j,path:y}]))},initHistory:function(j){c([{title:"\u6839\u76EE\u5F55",path:"/"}].concat(me()(j)))}}});var O=function(j){f(Z[j].title,Z[j].path);var y=Z.filter(function(M,P){return P<=j});c(me()(y))};return(0,e.jsx)(ae.Z.Compact,{children:Z.map(function(S,j){return(0,e.jsx)(W.ZP,{icon:(0,e.jsx)(ze,{}),type:"dashed",onClick:function(){O(j)},children:j==Z.length-1?(0,e.jsx)(Ge.Z.Text,{copyable:{text:S.path},children:S.title}):S.title},j)})})}),Qe=Ye,Je=t(97269),Xe=t(62370),ke=t(90672),_e=t(97462),qe=t(45360),et=t(85576),tt=t(20713),nt=(0,u.forwardRef)(function(n,o){var i,f=(0,u.useContext)(K),B=f.currentPath,h=f.reloadFileList,Z=f.containerMd5,c=(0,u.useRef)(),O=(0,u.useState)(!1),S=g()(O,2),j=S[0],y=S[1],M=ce.Z.useApp(),P=qe.ZP.useMessage(),d=g()(P,2),l=d[0],x=d[1];return(0,u.useImperativeHandle)(o,function(){return{newFile:function(){var a;y(!0),(a=c.current)===null||a===void 0||a.resetFields()},editFile:function(a,r,m){var p;(p=c.current)===null||p===void 0||p.resetFields(),l.open({type:"loading",content:"\u6B63\u5728\u83B7\u53D6\u6587\u4EF6\u5185\u5BB9",duration:0}),(0,b.LK)({md5:Z,file:r}).then(function(F){var re,ue;if(F.data.content==""&&m!="0"){(0,X.YZ)(M,"\u4E0D\u652F\u6301\u7F16\u8F91\u7684\u6587\u4EF6\u7C7B\u578B"),y(!1);return}(re=c.current)===null||re===void 0||re.setFieldValue("newValue",F.data.content),(ue=c.current)===null||ue===void 0||ue.setFieldValue("newName",a),l.destroy(),y(!0)}).finally(function(){l.destroy()})}}}),(0,e.jsxs)(e.Fragment,{children:[x,(0,e.jsx)(et.Z,{width:"800px",title:(i=c.current)!==null&&i!==void 0&&i.getFieldValue("newName")?"\u7F16\u8F91\u6587\u4EF6":"\u65B0\u5EFA\u6587\u4EF6",open:j,onCancel:function(){return y(!1)},footer:!1,forceRender:!0,children:(0,e.jsxs)(Je.A,{formRef:c,onFinish:function(){var s=H()(R()().mark(function a(r){var m;return R()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return(0,b.C4)({destPath:B,file:r.newName.indexOf("/")!==0?"/"+r.newName:r.newName,content:r.newValue,md5:Z}),(m=c.current)===null||m===void 0||m.resetFields(),y(!1),h(),F.abrupt("return",!0);case 5:case"end":return F.stop()}},a)}));return function(a){return s.apply(this,arguments)}}(),children:[(0,e.jsx)(fe.Z,{label:"\u6587\u4EF6\u540D",tooltip:"\u7F16\u8F91\u6587\u4EF6\u65F6\u4FEE\u6539\u6587\u4EF6\u540D\u53EF\u5B9E\u73B0\u590D\u5236\u529F\u80FD",name:"newName",fieldProps:{addonBefore:B},placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D\uFF1B\u652F\u6301\u65B0\u5EFA\u76EE\u5F55\uFF0C\u9700\u8981\u6307\u5B9A\u5B8C\u6574\u8DEF\u5F84\uFF0C\u4F8B\u5982\uFF1A/test/test.txt"}),(0,e.jsxs)(Xe.Z,{label:"\u5185\u5BB9",children:[(0,e.jsx)(ke.Z,{hidden:!0,name:"newValue"}),(0,e.jsx)(_e.Z,{name:["newValue"],children:function(a){var r=a.newValue;return(0,e.jsx)(tt.ZP,{theme:"dark",height:"500px",value:r,onChange:function(p){var F;(F=c.current)===null||F===void 0||F.setFieldValue("newValue",p)}})}})]})]})})]})}),rt=nt,at=t(75516),lt=t(60335);function ot(n){var o=(0,u.useRef)(),i=(0,u.useRef)(),f=(0,u.useRef)(),B=(0,u.useState)("/"),h=g()(B,2),Z=h[0],c=h[1],O=(0,u.useState)(),S=g()(O,2),j=S[0],y=S[1];(0,u.useEffect)(function(){if(n.initialValue){for(var P,d=n.initialValue.split("/"),l=[],x="",s=1;s<d.length;s++)x+="/"+d[s],l.push({title:d[s],path:x});M(d[d.length-1],n.initialValue),(P=o.current)===null||P===void 0||P.initHistory([].concat(l))}(0,lt.jV)({md5:n.md5}).then(function(a){a.data&&y(a.data.info)})},[n.initialValue]);var M=function(d,l){var x,s;if((x=o.current)===null||x===void 0||x.addHistory(d,l),c(l),f&&typeof((s=f.current)===null||s===void 0?void 0:s.reloadAndRest)=="function"){var a;(a=f.current)===null||a===void 0||a.reloadAndRest()}};return(0,e.jsxs)(K.Provider,{value:{fileListRef:f,containerMd5:n.md5,currentPath:Z,showPath:M,reloadFileList:function(){var d;if(f&&typeof((d=f.current)===null||d===void 0?void 0:d.reloadAndRest)=="function"){var l;(l=f.current)===null||l===void 0||l.reloadAndRest()}},editFileRef:i},children:[(0,e.jsx)(_.Z,{rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},toolBarRender:function(){var d=[];return j!=null&&j.Id&&d.push((0,e.jsx)(at.Z,{container:j,workDir:Z},"console")),[].concat(d)},tableAlertOptionRender:function(d){var l=d.selectedRowKeys,x=d.selectedRows,s=[];return x.map(function(a){s.push(a.name)}),[(0,e.jsx)(Ve,{selectFileList:s,selectFileObject:x},"1")]},headerTitle:(0,e.jsx)(Qe,{ref:o}),actionRef:f,search:!1,rowKey:"showName",pagination:!1,request:H()(R()().mark(function P(){return R()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",new Promise(function(x,s){n.md5&&(0,b.V9)({md5:n.md5,path:Z}).then(function(a){if(a.data.list){var r={data:a.data.list,success:!0,total:a.data.list.length};x(r)}else x({data:[],success:!0,total:0})})}));case 1:case"end":return l.stop()}},P)})),columns:[{title:"\u540D\u79F0",dataIndex:"showName",key:"name",render:function(r,l,x,s,a){var r;return l.isDir?r=(0,e.jsx)(W.ZP,{onClick:function(){return M(l.showName,l.name)},type:"link",icon:(0,e.jsx)(L,{}),children:l.showName}):l.linkName?r=(0,e.jsx)(W.ZP,{type:"text",icon:(0,e.jsx)(C.Z,{}),children:"".concat(l.showName," -> ").concat(l.linkName)}):r=(0,e.jsx)(W.ZP,{type:"text",icon:(0,e.jsx)(J,{}),onClick:function(){var p;(p=i.current)===null||p===void 0||p.editFile(l.showName,l.name,l.size)},children:l.showName}),r}},{title:"\u72B6\u6001",key:"status",width:110,render:function(d,l,x,s,a){return(0,e.jsx)(We,{change:l.change})}},{title:"\u6743\u9650",dataIndex:"mode",key:"mode"},{title:"\u7528\u6237",dataIndex:"owner"},{title:"\u7528\u6237\u7EC4",dataIndex:"group"},{title:"\u5927\u5C0F",dataIndex:"size",key:"size"},{title:"\u4FEE\u6539\u65F6\u95F4",dataIndex:"modTime",key:"modTime"}]}),(0,e.jsx)(rt,{ref:i})]})}var it=ot;function ut(){var n,o,i=(0,de.useParams)(),f=(0,de.useSearchParams)(),B=g()(f,2),h=B[0],Z=B[1];return(0,e.jsx)("div",{children:(0,e.jsx)(it,{md5:(n=i.id)!==null&&n!==void 0?n:"",initialValue:(o=h.get("path"))!==null&&o!==void 0?o:""})})}var st=ut},97961:function(se,G,t){t.d(G,{MF:function(){return L},_2:function(){return Y},fN:function(){return b},hG:function(){return Q},ii:function(){return H},vC:function(){return u}});var D=t(15009),g=t.n(D),$=t(99289),R=t.n($),V=t(54006),H=[{name:"amd64",arch:"amd64"},{name:"arm64",arch:"arm64"},{name:"i386",arch:"386"},{name:"arm/v6",arch:"arm"},{name:"arm/v7",arch:"arm"},{name:"arm/v8",arch:"arm64"},{name:"ppc64le",arch:"ppc64le"},{name:"riscv64",arch:"riscv64"}];function b(E){return T.apply(this,arguments)}function T(){return T=R()(g()().mark(function E(A){return g()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,V.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:A}));case 1:case"end":return v.stop()}},E)})),T.apply(this,arguments)}function u(E){return z.apply(this,arguments)}function z(){return z=R()(g()().mark(function E(A){return g()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,V.request)("/api/app/image/import-by-container-tar",{method:"POST",data:A}));case 1:case"end":return v.stop()}},E)})),z.apply(this,arguments)}function Q(E){return U.apply(this,arguments)}function U(){return U=R()(g()().mark(function E(A){return g()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,V.request)("/api/app/image/import-by-image-tar",{method:"POST",data:A}));case 1:case"end":return v.stop()}},E)})),U.apply(this,arguments)}function Y(E){return w.apply(this,arguments)}function w(){return w=R()(g()().mark(function E(A){return g()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,V.request)("/api/common/attach/delete",{method:"POST",data:A});case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},E)})),w.apply(this,arguments)}function L(){return C.apply(this,arguments)}function C(){return C=R()(g()().mark(function E(){return g()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",(0,V.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return I.stop()}},E)})),C.apply(this,arguments)}}}]);
