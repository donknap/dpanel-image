"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[536],{29158:function(W,h,e){e.d(h,{Z:function(){return D}});var j=e(87462),r=e(62435),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"},o=O,c=e(84089),v=function(M,a){return r.createElement(c.Z,(0,j.Z)({},M,{ref:a,icon:o}))},m=r.forwardRef(v),D=m},2830:function(W,h,e){e.d(h,{Z:function(){return D}});var j=e(87462),r=e(62435),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M876.6 239.5c-.5-.9-1.2-1.8-2-2.5-5-5-13.1-5-18.1 0L684.2 409.3l-67.9-67.9L788.7 169c.8-.8 1.4-1.6 2-2.5 3.6-6.1 1.6-13.9-4.5-17.5-98.2-58-226.8-44.7-311.3 39.7-67 67-89.2 162-66.5 247.4l-293 293c-3 3-2.8 7.9.3 11l169.7 169.7c3.1 3.1 8.1 3.3 11 .3l292.9-292.9c85.5 22.8 180.5.7 247.6-66.4 84.4-84.5 97.7-213.1 39.7-311.3zM786 499.8c-58.1 58.1-145.3 69.3-214.6 33.6l-8.8 8.8-.1-.1-274 274.1-79.2-79.2 230.1-230.1s0 .1.1.1l52.8-52.8c-35.7-69.3-24.5-156.5 33.6-214.6a184.2 184.2 0 01144-53.5L537 318.9a32.05 32.05 0 000 45.3l124.5 124.5a32.05 32.05 0 0045.3 0l132.8-132.8c3.7 51.8-14.4 104.8-53.6 143.9z"}}]},name:"tool",theme:"outlined"},o=O,c=e(84089),v=function(M,a){return r.createElement(c.Z,(0,j.Z)({},M,{ref:a,icon:o}))},m=r.forwardRef(v),D=m},80821:function(W,h,e){e.d(h,{Z:function(){return M}});var j=e(5574),r=e.n(j),O=e(93246),o=e(54006),c=e(31418),v=e(86738),m=e(14726),D=e(62435),d=e(86074);function M(a){var s=(0,D.useState)(!1),f=r()(s,2),i=f[0],u=f[1],B=c.Z.useApp(),I=(0,o.useIntl)(),C=function(){u(!0),a.action().then(function(A){if(u(!1),typeof a.onSuccess=="function"&&a.onSuccess(A),a.messageSuccess){var T="";a.messageSuccess.indexOf(".")>-1?T=I.formatMessage({id:a.messageSuccess}):T=a.messageSuccess,a.asynced?(0,O.Rk)(B,T):(0,O.$h)(B,T)}}).catch(function(A){u(!1),typeof a.onError=="function"&&a.onError(A)})};return a.confirm?(0,d.jsx)(v.Z,{style:{width:500},title:"\u63D0\u793A",description:a.confirm,onConfirm:C,okText:"Yes",cancelText:"No",children:(0,d.jsx)(m.ZP,{disabled:a.disabled,icon:a.icon,loading:i,danger:a.danger,type:a.type,children:a.children})}):(0,d.jsx)(m.ZP,{disabled:a.disabled,icon:a.icon,loading:i,onClick:C,danger:a.danger,type:a.type,children:a.children})}},94359:function(W,h,e){e.d(h,{Z:function(){return f}});var j=e(62435),r=e(3089),O=e(98165),o=e(18429),c=e(8751),v=e(14313),m=e(30159),D=e(87740),d=e(66309),M=e(83062),a=e(54006),s=e(86074);function f(i){var u=(0,s.jsx)(s.Fragment,{});return i.status=="0"&&(u=(0,s.jsx)(d.Z,{icon:(0,s.jsx)(r.Z,{}),color:"default",children:"waiting"})),i.status=="10"&&(u=(0,s.jsx)(d.Z,{icon:(0,s.jsx)(O.Z,{spin:!0}),color:"processing",children:"processing"})),i.status=="20"&&(u=(0,s.jsx)(d.Z,{icon:(0,s.jsx)(o.Z,{}),color:"error",children:"error"})),i.status=="30"&&(u=(0,s.jsx)(d.Z,{icon:(0,s.jsx)(c.Z,{}),color:"success",children:"success"})),i.status=="running"&&(u=(0,s.jsx)(d.Z,{icon:(0,s.jsx)(v.Z,{}),color:"success",children:i.status})),i.status=="paused"&&(u=(0,s.jsx)(d.Z,{icon:(0,s.jsx)(m.Z,{}),children:i.status})),i.status=="restarting"&&(u=(0,s.jsx)(d.Z,{icon:(0,s.jsx)(D.Z,{}),children:i.status})),(i.status=="exited"||i.status=="dead"||i.status=="removing")&&(u=(0,s.jsx)(d.Z,{icon:(0,s.jsx)(o.Z,{}),color:"warning",children:i.status})),i.link&&(u=(0,s.jsx)(a.Link,{to:i.link,children:u})),i.message&&(u=(0,s.jsx)(M.Z,{placement:"left",title:i.message,children:u})),(0,s.jsx)(s.Fragment,{children:u})}},13961:function(W,h,e){e.r(h),e.d(h,{default:function(){return E}});var j=e(15009),r=e.n(j),O=e(99289),o=e.n(O),c=e(37476),v=e(12010),m=e(78957),D=e(66309),d=e(96074),M=e(14726),a=e(83062),s=e(68508),f=e(54006),i=e(18148),u=e(94359),B=e(20713),I=e(45742),C=e(2830),x=e(29158),A=e(80821),T=e(62435),n=e(86074);function E(){var _=[{title:"\u540D\u79F0",render:function(R,l,L,P){return(0,n.jsx)(m.Z,{direction:"vertical",style:{textAlign:"left"},children:l.tag},l.id)}},{title:"\u6700\u65B0Tag",dataIndex:"tag",search:!1,render:function(R,l,L,P){return l.imageInfo?l.imageInfo.info.Id==""?(0,n.jsx)(D.Z,{children:"none"},"none"):(0,n.jsx)(m.Z,{direction:"vertical",style:{textAlign:"left"},children:l.imageInfo.info.RepoTags.map(function(g,K){return(0,n.jsx)(D.Z,{color:"#2db7f5",children:g},K)})},l.id):(0,n.jsx)(n.Fragment,{})}},{title:"\u955C\u50CFId",ellipsis:!0,search:!1,copyable:!0,dataIndex:["imageInfo","info","Id"],width:200},{title:"\u6784\u5EFA\u72B6\u6001",width:"100px",ellipsis:!0,search:!1,render:function(R,l,L,P){return[(0,n.jsx)("div",{children:(0,n.jsx)(u.Z,{status:l.status},l.id)},l.id)]}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:200,render:function(R,l,L,P){return(0,n.jsxs)(m.Z,{split:(0,n.jsx)(d.Z,{type:"vertical"}),children:[(0,n.jsx)(c.Y,{title:"\u6784\u5EFA\u65E5\u5FD7",submitter:!1,trigger:(0,n.jsx)(M.ZP,{size:"small",type:"link",children:(0,n.jsx)(a.Z,{title:"\u6784\u5EFA\u65E5\u5FD7",children:(0,n.jsx)(I.Z,{})})},l.id),children:(0,n.jsx)(B.ZP,{theme:"dark",height:"500px",value:l.message})},"log"),(0,n.jsx)(f.Link,{to:"/image/create?id="+l.id,type:"link",children:(0,n.jsx)(a.Z,{title:"\u518D\u6B21\u6784\u5EFA",children:(0,n.jsx)(C.Z,{})})},"rebuild"),l.imageInfo&&(0,n.jsx)(f.Link,{to:"/image/detail/".concat(l.imageInfo.info.Id),children:(0,n.jsx)(a.Z,{title:"\u67E5\u770B\u955C\u50CF",children:(0,n.jsx)(x.Z,{})})},"detail")]})}}],t=(0,T.useRef)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(v.Z,{actionRef:t,rowKey:"id",columns:_,request:function(){var p=o()(r()().mark(function R(l,L,P){var g,K,y;return r()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,i.Xn)({page:(g=l.current)!==null&&g!==void 0?g:1,pageSize:(K=l.pageSize)!==null&&K!==void 0?K:10});case 2:return y=U.sent,U.abrupt("return",{data:y.data.list,success:!0,total:y.data.total});case 4:case"end":return U.stop()}},R)}));return function(R,l,L){return p.apply(this,arguments)}}(),pagination:{pageSize:10},search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(R){var l=R.selectedRowKeys;return(0,n.jsx)(m.Z,{size:16,children:(0,n.jsx)(A.Z,{danger:!0,type:"primary",action:function(){return(0,i.$q)({id:l})},onSuccess:function(){var P,g;return!((P=t.current)===null||P===void 0)&&P.reloadAndRest&&((g=t.current)===null||g===void 0||g.reloadAndRest()),!0},onError:function(){var P,g;return!((P=t.current)===null||P===void 0)&&P.reset&&((g=t.current)===null||g===void 0||g.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})},tableExtraRender:function(){return(0,n.jsx)(s.Z,{mode:"horizontal",selectedKeys:["build"],items:[{label:(0,n.jsx)(f.Link,{to:"/image/list/all",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,n.jsx)(f.Link,{to:"/image/list/build",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})}})})}},18148:function(W,h,e){e.d(h,{$q:function(){return i},KG:function(){return v},T8:function(){return s},Xn:function(){return M},ao:function(){return B},c5:function(){return A},c7:function(){return C}});var j=e(15009),r=e.n(j),O=e(99289),o=e.n(O),c=e(54006);function v(n){return m.apply(this,arguments)}function m(){return m=o()(r()().mark(function n(E){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/api/app/image/get-list",{method:"POST",data:E}));case 1:case"end":return t.stop()}},n)})),m.apply(this,arguments)}function D(n){return d.apply(this,arguments)}function d(){return d=_asyncToGenerator(_regeneratorRuntime().mark(function n(E){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,request("/api/app/log/image-build",{method:"POST",data:E});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n)})),d.apply(this,arguments)}function M(n){return a.apply(this,arguments)}function a(){return a=o()(r()().mark(function n(E){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/api/app/image/get-list-build",{method:"POST",data:E}));case 1:case"end":return t.stop()}},n)})),a.apply(this,arguments)}function s(n){return f.apply(this,arguments)}function f(){return f=o()(r()().mark(function n(E){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.request)("/api/app/image/get-build-task",{method:"POST",data:E});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n)})),f.apply(this,arguments)}function i(n){return u.apply(this,arguments)}function u(){return u=o()(r()().mark(function n(E){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.request)("/api/app/image/delete-build-task",{method:"POST",data:E});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n)})),u.apply(this,arguments)}function B(n){return I.apply(this,arguments)}function I(){return I=o()(r()().mark(function n(E){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.request)("/api/app/image/image-delete",{method:"POST",data:E});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n)})),I.apply(this,arguments)}function C(){return x.apply(this,arguments)}function x(){return x=o()(r()().mark(function n(){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,c.request)("/api/app/image/image-prune",{method:"POST"});case 2:return _.abrupt("return",_.sent);case 3:case"end":return _.stop()}},n)})),x.apply(this,arguments)}function A(){return T.apply(this,arguments)}function T(){return T=o()(r()().mark(function n(){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,c.request)("/api/app/image/build-prune",{method:"POST"});case 2:return _.abrupt("return",_.sent);case 3:case"end":return _.stop()}},n)})),T.apply(this,arguments)}}}]);
