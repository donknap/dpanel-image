"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4214],{95556:function(k,x,t){var g=t(87462),c=t(62435),A=t(3803),u=t(84089),s=function(j,P){return c.createElement(u.Z,(0,g.Z)({},j,{ref:P,icon:A.Z}))},O=c.forwardRef(s);x.Z=O},80821:function(k,x,t){t.d(x,{Z:function(){return L}});var g=t(5574),c=t.n(g),A=t(93246),u=t(54006),s=t(31418),O=t(86738),T=t(14726),j=t(62435),P=t(86074);function L(o){var w=(0,j.useState)(!1),S=c()(w,2),z=S[0],B=S[1],R=s.Z.useApp(),D=(0,u.useIntl)(),W=function(){B(!0),o.action().then(function(F){if(B(!1),typeof o.onSuccess=="function"&&o.onSuccess(F),o.messageSuccess){var $="";o.messageSuccess.indexOf(".")>-1?$=D.formatMessage({id:o.messageSuccess}):$=o.messageSuccess,o.asynced?(0,A.Rk)(R,$):(0,A.$h)(R,$)}}).catch(function(F){B(!1),typeof o.onError=="function"&&o.onError(F)})};return o.confirm?(0,P.jsx)(O.Z,{style:{width:500},title:"\u63D0\u793A",description:o.confirm,onConfirm:W,okText:"Yes",cancelText:"No",children:(0,P.jsx)(T.ZP,{disabled:o.disabled,icon:o.icon,loading:z,danger:o.danger,type:o.type,children:o.children})}):(0,P.jsx)(T.ZP,{disabled:o.disabled,icon:o.icon,loading:z,onClick:W,danger:o.danger,type:o.type,children:o.children})}},88583:function(k,x,t){t.r(x),t.d(x,{default:function(){return v}});var g=t(15009),c=t.n(g),A=t(99289),u=t.n(A),s=t(5574),O=t.n(s),T=t(12010),j=t(31418),P=t(75891),L=t(78957),o=t(66309),w=t(96074),S=t(83062),z=t(84567),B=t(68508),R=t(62435),D=t(54006),W=t(18148),N=t(5251),F=t(80821),$=t(43425),Y=t(95556),H=t(93246),r=t(86074);function v(){var p=(0,D.useParams)(),n=(0,R.useRef)(),te=(0,R.useState)({force:!1}),Q=O()(te,2),ne=Q[0],e=Q[1],d=(0,R.useState)([]),h=O()(d,2),l=h[0],i=h[1],U=j.Z.useApp(),y=(0,R.useState)(1),Z=O()(y,2),K=Z[0],G=Z[1];return(0,R.useEffect)(function(){var _;(_=n.current)===null||_===void 0||_.reload(),(0,W.Xn)({page:1,pageSize:9999,all:!0}).then(function(f){return i(f.data.list),!0})},[p,K]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(T.Z,{rowKey:"Id",columns:[{title:"Id",ellipsis:!0,search:!1,dataIndex:"Id",width:200,render:function(f,a,m,E,C){return(0,r.jsx)(D.Link,{to:"/image/detail/"+a.Id,children:a.Id},"edit")}},{title:"\u540D\u79F0",dataIndex:"title",render:function(f,a,m,E,C){var b=a.RepoTags[0];return l.map(function(I){a.RepoTags.map(function(V){V==I.tag&&(b=I.title)})}),(0,r.jsx)(P.Z.Text,{editable:{tooltip:"\u4FEE\u6539\u955C\u50CF\u5907\u6CE8\u540D\u79F0",onChange:function(){var I=u()(c()().mark(function J(ee){var q;return c()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,W.Fj)({tag:a.RepoTags[0],title:ee});case 2:q=M.sent,G(K+1),(0,H.$h)(U,"\u4FEE\u6539\u955C\u50CF\u540D\u79F0\u6210\u529F");case 5:case"end":return M.stop()}},J)}));function V(J){return I.apply(this,arguments)}return V}()},children:b})}},{title:"Tag",dataIndex:"tag",render:function(f,a,m,E){return(0,r.jsx)(L.Z,{direction:"vertical",style:{textAlign:"left"},children:a.RepoTags.map(function(C,b){return(0,r.jsx)(o.Z,{color:"#2db7f5",children:(0,r.jsx)(P.Z.Text,{copyable:!0,style:{color:"#ffffff"},children:C},b)},b)})},a.Id)}},{title:"\u5C3A\u5BF8",dataIndex:"size",ellipsis:!0,width:"120px",search:!1,sorter:function(f,a){return f.Size-a.Size},render:function(f,a,m,E){return(0,r.jsx)("div",{children:(0,N.FI)(parseFloat(a.Size))},a.Id)}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(f,a,m,E){return(0,r.jsx)("div",{children:(0,N.ZM)(a.Created*1e3)},a.Id)},sorter:function(f,a){return f.Created-a.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:"150px",render:function(f,a,m,E){return(0,r.jsxs)(L.Z,{split:(0,r.jsx)(w.Z,{type:"vertical"}),children:[(0,r.jsx)(D.Link,{to:"/image/detail/"+a.Id,children:(0,r.jsx)(S.Z,{title:"\u7BA1\u7406",children:(0,r.jsx)($.Z,{})})},"edit"),(0,r.jsx)(D.Link,{to:"/app/create/image?imageId="+a.Id,children:(0,r.jsx)(S.Z,{title:"\u521B\u5EFA\u5BB9\u5668",children:(0,r.jsx)(Y.Z,{})})},"create")]})}}],request:function(){var _=u()(c()().mark(function f(a,m,E){var C;return c()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,(0,W.KG)({tag:a.tag});case 2:return C=I.sent,I.abrupt("return",{data:C.data.list,success:!0,total:C.data.list.length});case 4:case"end":return I.stop()}},f)}));return function(f,a,m){return _.apply(this,arguments)}}(),pagination:{pageSize:10},search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:n,tableAlertOptionRender:function(f){var a=f.selectedRowKeys;return(0,r.jsx)(L.Z,{size:16,children:(0,r.jsx)(F.Z,{danger:!0,type:"primary",action:function(){return(0,W.ao)({md5:a,force:ne.force})},onSuccess:function(){var E,C;return!((E=n.current)===null||E===void 0)&&E.reloadAndRest&&((C=n.current)===null||C===void 0||C.reloadAndRest()),!0},onError:function(){var E,C;return!((E=n.current)===null||E===void 0)&&E.reset&&((C=n.current)===null||C===void 0||C.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",confirm:(0,r.jsxs)(L.Z,{style:{width:280},direction:"vertical",children:[(0,r.jsx)(P.Z.Text,{children:"\u5220\u9664\u955C\u50CF\u540E\u65E0\u6CD5\u6062\u590D,\u786E\u8BA4\u5417\uFF1F"}),(0,r.jsx)(z.Z,{name:"deleteVolume",onChange:function(E){return e({force:E.target.checked})},children:"\u5F3A\u5236\u5220\u9664\uFF1F"})]}),children:"\u6279\u91CF\u5220\u9664"})})},tableExtraRender:function(){var f;return(0,r.jsx)(B.Z,{mode:"horizontal",selectedKeys:[(f=p.type)!==null&&f!==void 0?f:"all"],items:[{label:(0,r.jsx)(D.Link,{to:"/image/list/all",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,r.jsx)(D.Link,{to:"/image/list/build",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})},toolBarRender:function(){return[(0,r.jsx)(F.Z,{action:function(){return(0,W.c7)()},onSuccess:function(){var a,m;return!((a=n.current)===null||a===void 0)&&a.reloadAndRest&&((m=n.current)===null||m===void 0||m.reloadAndRest()),!0},onError:function(){var a,m;return!((a=n.current)===null||a===void 0)&&a.reset&&((m=n.current)===null||m===void 0||m.reset()),!0},messageSuccess:"\u6E05\u9664\u6210\u529F",confirm:"\u662F\u5426\u6E05\u7406\u672A\u4F7F\u7528\u6216\u662F\u672A\u8FD0\u884C\u7684\u955C\u50CF",children:"\u6E05\u7406\u672A\u4F7F\u7528\u955C\u50CF"})]}})})}},18148:function(k,x,t){t.d(x,{$q:function(){return z},Fj:function(){return Y},KG:function(){return O},T8:function(){return w},Xn:function(){return L},ao:function(){return R},c5:function(){return F},c7:function(){return W}});var g=t(15009),c=t.n(g),A=t(99289),u=t.n(A),s=t(54006);function O(r){return T.apply(this,arguments)}function T(){return T=u()(c()().mark(function r(v){return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,s.request)("/api/app/image/get-list",{method:"POST",data:v}));case 1:case"end":return n.stop()}},r)})),T.apply(this,arguments)}function j(r){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function r(v){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,request("/api/app/log/image-build",{method:"POST",data:v});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},r)})),P.apply(this,arguments)}function L(r){return o.apply(this,arguments)}function o(){return o=u()(c()().mark(function r(v){return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,s.request)("/api/app/image/get-list-build",{method:"POST",data:v}));case 1:case"end":return n.stop()}},r)})),o.apply(this,arguments)}function w(r){return S.apply(this,arguments)}function S(){return S=u()(c()().mark(function r(v){return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,s.request)("/api/app/image/get-build-task",{method:"POST",data:v});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},r)})),S.apply(this,arguments)}function z(r){return B.apply(this,arguments)}function B(){return B=u()(c()().mark(function r(v){return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,s.request)("/api/app/image/delete-build-task",{method:"POST",data:v});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},r)})),B.apply(this,arguments)}function R(r){return D.apply(this,arguments)}function D(){return D=u()(c()().mark(function r(v){return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,s.request)("/api/app/image/image-delete",{method:"POST",data:v});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},r)})),D.apply(this,arguments)}function W(){return N.apply(this,arguments)}function N(){return N=u()(c()().mark(function r(){return c()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,s.request)("/api/app/image/image-prune",{method:"POST"});case 2:return p.abrupt("return",p.sent);case 3:case"end":return p.stop()}},r)})),N.apply(this,arguments)}function F(){return $.apply(this,arguments)}function $(){return $=u()(c()().mark(function r(){return c()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,s.request)("/api/app/image/build-prune",{method:"POST"});case 2:return p.abrupt("return",p.sent);case 3:case"end":return p.stop()}},r)})),$.apply(this,arguments)}function Y(r){return H.apply(this,arguments)}function H(){return H=u()(c()().mark(function r(v){return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,s.request)("/api/app/image/update-title",{method:"POST",data:v});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},r)})),H.apply(this,arguments)}},5251:function(k,x,t){t.d(x,{FI:function(){return c},ZM:function(){return A}});function g(u){return u.trim()}function c(u){var s="";u<.1*1024?s=u.toFixed(2)+"B":u<.1*1024*1024?s=(u/1024).toFixed(2)+"KB":u<1*1024*1024*1024?s=(u/(1024*1024)).toFixed(2)+"MB":s=(u/(1024*1024*1024)).toFixed(2)+"GB";var O=s+"",T=O.indexOf("."),j=O.substr(T+1,2);return j=="00"?O.substring(0,T)+O.substr(T+3,2):s}function A(u){if(u){var s=new Date(u),O=s.getFullYear()+"-",T=(s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1)+"-",j=(s.getDate()<10?"0"+s.getDate():s.getDate())+" ",P=(s.getHours()<10?"0"+s.getHours():s.getHours())+":",L=(s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes())+":",o=s.getSeconds()<10?"0"+s.getSeconds():s.getSeconds();return O+T+j+P+L+o}}},66309:function(k,x,t){t.d(x,{Z:function(){return ne}});var g=t(62435),c=t(97937),A=t(93967),u=t.n(A),s=t(98787),O=t(69760),T=t(45353),j=t(53124),P=t(54548),L=t(10274),o=t(14747),w=t(45503),S=t(91945);const z=e=>{const{paddingXXS:d,lineWidth:h,tagPaddingHorizontal:l,componentCls:i,calc:U}=e,y=U(l).sub(h).equal(),Z=U(d).sub(h).equal();return{[i]:Object.assign(Object.assign({},(0,o.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:y,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,P.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${i}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${i}-close-icon`]:{marginInlineStart:Z,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${i}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},["&-checkable"]:{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${i}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},["&-hidden"]:{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:y}}),[`${i}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},B=e=>{const{lineWidth:d,fontSizeIcon:h,calc:l}=e,i=e.fontSizeSM;return(0,w.TS)(e,{tagFontSize:i,tagLineHeight:(0,P.bf)(l(e.lineHeightSM).mul(i).equal()),tagIconSize:l(h).sub(l(d).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},R=e=>({defaultBg:new L.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var D=(0,S.I$)("Tag",e=>{const d=B(e);return z(d)},R),W=function(e,d){var h={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&d.indexOf(l)<0&&(h[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,l=Object.getOwnPropertySymbols(e);i<l.length;i++)d.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(e,l[i])&&(h[l[i]]=e[l[i]]);return h},F=g.forwardRef((e,d)=>{const{prefixCls:h,style:l,className:i,checked:U,onChange:y,onClick:Z}=e,K=W(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:G,tag:_}=g.useContext(j.E_),f=I=>{y==null||y(!U),Z==null||Z(I)},a=G("tag",h),[m,E,C]=D(a),b=u()(a,`${a}-checkable`,{[`${a}-checkable-checked`]:U},_==null?void 0:_.className,i,E,C);return m(g.createElement("span",Object.assign({},K,{ref:d,style:Object.assign(Object.assign({},l),_==null?void 0:_.style),className:b,onClick:f})))}),$=t(98719);const Y=e=>(0,$.Z)(e,(d,h)=>{let{textColor:l,lightBorderColor:i,lightColor:U,darkColor:y}=h;return{[`${e.componentCls}${e.componentCls}-${d}`]:{color:l,background:U,borderColor:i,"&-inverse":{color:e.colorTextLightSolid,background:y,borderColor:y},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var H=(0,S.bk)(["Tag","preset"],e=>{const d=B(e);return Y(d)},R);function r(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const v=(e,d,h)=>{const l=r(h);return{[`${e.componentCls}${e.componentCls}-${d}`]:{color:e[`color${h}`],background:e[`color${l}Bg`],borderColor:e[`color${l}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var p=(0,S.bk)(["Tag","status"],e=>{const d=B(e);return[v(d,"success","Success"),v(d,"processing","Info"),v(d,"error","Error"),v(d,"warning","Warning")]},R),n=function(e,d){var h={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&d.indexOf(l)<0&&(h[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,l=Object.getOwnPropertySymbols(e);i<l.length;i++)d.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(e,l[i])&&(h[l[i]]=e[l[i]]);return h};const te=(e,d)=>{const{prefixCls:h,className:l,rootClassName:i,style:U,children:y,icon:Z,color:K,onClose:G,closeIcon:_,closable:f,bordered:a=!0}=e,m=n(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable","bordered"]),{getPrefixCls:E,direction:C,tag:b}=g.useContext(j.E_),[I,V]=g.useState(!0);g.useEffect(()=>{"visible"in m&&V(m.visible)},[m.visible]);const J=(0,s.o2)(K),ee=(0,s.yT)(K),q=J||ee,re=Object.assign(Object.assign({backgroundColor:K&&!q?K:void 0},b==null?void 0:b.style),U),M=E("tag",h),[oe,ue,ie]=D(M),ce=u()(M,b==null?void 0:b.className,{[`${M}-${K}`]:q,[`${M}-has-color`]:K&&!q,[`${M}-hidden`]:!I,[`${M}-rtl`]:C==="rtl",[`${M}-borderless`]:!a},l,i,ue,ie),ae=X=>{X.stopPropagation(),G==null||G(X),!X.defaultPrevented&&V(!1)},[,de]=(0,O.Z)({closable:f,closeIcon:_!=null?_:b==null?void 0:b.closeIcon,customCloseIconRender:X=>X===null?g.createElement(c.Z,{className:`${M}-close-icon`,onClick:ae}):g.createElement("span",{className:`${M}-close-icon`,onClick:ae},X),defaultCloseIcon:null,defaultClosable:!1}),_e=typeof m.onClick=="function"||y&&y.type==="a",se=Z||null,fe=se?g.createElement(g.Fragment,null,se,y&&g.createElement("span",null,y)):y,le=g.createElement("span",Object.assign({},m,{ref:d,className:ce,style:re}),fe,de,J&&g.createElement(H,{key:"preset",prefixCls:M}),ee&&g.createElement(p,{key:"status",prefixCls:M}));return oe(_e?g.createElement(T.Z,{component:"Tag"},le):le)},Q=g.forwardRef(te);Q.CheckableTag=F;var ne=Q}}]);
