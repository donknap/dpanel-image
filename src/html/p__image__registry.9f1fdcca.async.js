"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9013],{52688:function($,A,e){var O=e(1413),s=e(45987),y=e(62435),p=e(33468),C=e(86074),x=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],g=y.forwardRef(function(d,m){var i=d.fieldProps,n=d.unCheckedChildren,F=d.checkedChildren,h=d.proFieldProps,l=(0,s.Z)(d,x);return(0,C.jsx)(p.Z,(0,O.Z)({valueType:"switch",fieldProps:(0,O.Z)({unCheckedChildren:n,checkedChildren:F},i),ref:m,valuePropName:"checked",proFieldProps:h,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},l))});A.Z=g},5966:function($,A,e){var O=e(97685),s=e(1413),y=e(45987),p=e(21770),C=e(72723),x=e(55241),g=e(97435),d=e(62435),m=e(33468),i=e(86074),n=["fieldProps","proFieldProps"],F=["fieldProps","proFieldProps"],h="text",l=function(u){var t=u.fieldProps,P=u.proFieldProps,M=(0,y.Z)(u,n);return(0,i.jsx)(m.Z,(0,s.Z)({valueType:h,fieldProps:t,filedConfig:{valueType:h},proFieldProps:P},M))},f=function(u){var t=(0,p.Z)(u.open||!1,{value:u.open,onChange:u.onOpenChange}),P=(0,O.Z)(t,2),M=P[0],U=P[1];return(0,i.jsx)(C.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(L){var o,B=L.getFieldValue(u.name||[]);return(0,i.jsx)(x.Z,(0,s.Z)((0,s.Z)({getPopupContainer:function(a){return a&&a.parentNode?a.parentNode:a},onOpenChange:U,content:(0,i.jsxs)("div",{style:{padding:"4px 0"},children:[(o=u.statusRender)===null||o===void 0?void 0:o.call(u,B),u.strengthText?(0,i.jsx)("div",{style:{marginTop:10},children:(0,i.jsx)("span",{children:u.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},u.popoverProps),{},{open:M,children:u.children}))}})},c=function(u){var t=u.fieldProps,P=u.proFieldProps,M=(0,y.Z)(u,F),U=(0,d.useState)(!1),K=(0,O.Z)(U,2),L=K[0],o=K[1];return t!=null&&t.statusRender&&M.name?(0,i.jsx)(f,{name:M.name,statusRender:t==null?void 0:t.statusRender,popoverProps:t==null?void 0:t.popoverProps,strengthText:t==null?void 0:t.strengthText,open:L,onOpenChange:o,children:(0,i.jsx)("div",{children:(0,i.jsx)(m.Z,(0,s.Z)({valueType:"password",fieldProps:(0,s.Z)((0,s.Z)({},(0,g.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(T){var a;t==null||(a=t.onBlur)===null||a===void 0||a.call(t,T),o(!1)},onClick:function(T){var a;t==null||(a=t.onClick)===null||a===void 0||a.call(t,T),o(!0)}}),proFieldProps:P,filedConfig:{valueType:h}},M))})}):(0,i.jsx)(m.Z,(0,s.Z)({valueType:"password",fieldProps:t,proFieldProps:P,filedConfig:{valueType:h}},M))},r=l;r.Password=c,r.displayName="ProFormComponent",A.Z=r},80821:function($,A,e){e.d(A,{Z:function(){return i}});var O=e(5574),s=e.n(O),y=e(93246),p=e(54006),C=e(31418),x=e(86738),g=e(14726),d=e(62435),m=e(86074);function i(n){var F=(0,d.useState)(!1),h=s()(F,2),l=h[0],f=h[1],c=C.Z.useApp(),r=(0,p.useIntl)(),I=function(){f(!0),n.action().then(function(t){if(f(!1),typeof n.onSuccess=="function"&&n.onSuccess(t),n.messageSuccess){var P="";n.messageSuccess.indexOf(".")>-1?P=r.formatMessage({id:n.messageSuccess}):P=n.messageSuccess,n.asynced?(0,y.Rk)(c,P):(0,y.$h)(c,P)}}).catch(function(t){f(!1),typeof n.onError=="function"&&n.onError(t)})};return n.confirm?(0,m.jsx)(x.Z,{style:{width:500},title:"\u63D0\u793A",description:n.confirm,onConfirm:I,okText:"Yes",cancelText:"No",children:(0,m.jsx)(g.ZP,{disabled:n.disabled,icon:n.icon,loading:l,danger:n.danger,type:n.type,children:n.children})}):(0,m.jsx)(g.ZP,{disabled:n.disabled,icon:n.icon,loading:l,onClick:I,danger:n.danger,type:n.type,children:n.children})}},24396:function($,A,e){e.r(A),e.d(A,{default:function(){return L}});var O=e(15009),s=e.n(O),y=e(99289),p=e.n(y),C=e(80821),x=e(5574),g=e.n(x),d=e(75870),m=e(93246),i=e(184),n=e(5966),F=e(52688),h=e(97462),l=e(31418),f=e(14726),c=e(62435),r=e(86074),I=(0,c.forwardRef)(function(o,B){var T=(0,c.useState)(!1),a=g()(T,2),E=a[0],R=a[1],j=l.Z.useApp(),v=(0,c.useRef)(),w=(0,c.useState)(0),D=g()(w,2),b=D[0],z=D[1];return(0,c.useImperativeHandle)(B,function(){return{setEditId:function(_){(0,d.t1)({id:_}).then(function(W){R(!0),z(_)})}}}),(0,c.useEffect)(function(){b&&(0,d.t1)({id:b}).then(function(Z){var _;(_=v.current)===null||_===void 0||_.setFieldsValue({title:Z.data.info.title,serverAddress:Z.data.info.serverAddress,username:Z.data.info.username})})},[b]),(0,r.jsxs)(i.a,{name:"create",title:"\u6DFB\u52A0/\u7F16\u8F91\u955C\u50CF\u4ED3\u5E93",open:E,onOpenChange:function(_){R(_)},formRef:v,trigger:(0,r.jsx)(f.ZP,{onClick:function(){var _;(_=v.current)===null||_===void 0||_.resetFields(),z(0)},children:"\u6DFB\u52A0"}),onFinish:function(){var Z=p()(s()().mark(function _(W){var G,H,N,V;return s()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,d.ZH)({id:b,title:W.title,serverAddress:W.serverAddress,username:(G=W.username)!==null&&G!==void 0?G:"",password:(H=W.password)!==null&&H!==void 0?H:""});case 2:if(N=S.sent,!(N&&N.data&&N.data.id>0)){S.next=8;break}return(0,m.$h)(j,"\u6DFB\u52A0\u6216\u662F\u7F16\u8F91\u955C\u50CF\u4ED3\u5E93\u6210\u529F"),o.onFinish&&o.onFinish(),(V=v.current)===null||V===void 0||V.resetFields(),S.abrupt("return",!0);case 8:case"end":return S.stop()}},_)}));return function(_){return Z.apply(this,arguments)}}(),children:[(0,r.jsx)(n.Z,{label:"\u540D\u79F0",name:"title",placeholder:"\u6307\u5B9A\u4ED3\u5E93\u4E00\u4E2A\u540D\u79F0"}),(0,r.jsx)(n.Z,{label:"Url",name:"serverAddress",placeholder:"\u53EA\u8F93\u5165\u4ED3\u5E93\u57DF\u540Dhost,\u4F8B\u5982:ccr.ccs.tencentyun.com"}),(0,r.jsx)(F.Z,{label:"\u914D\u7F6E\u4ED3\u5E93\u6743\u9650",name:"hasPermission",initialValue:!0}),(0,r.jsx)(h.Z,{name:["hasPermission"],children:function(_){var W=_.hasPermission;return W?[(0,r.jsx)(n.Z,{label:"\u7528\u6237\u540D",name:"username",placeholder:"\u914D\u7F6E\u4ED3\u5E93\u7528\u6237\u540D"},"username"),(0,r.jsx)(n.Z.Password,{label:"\u5BC6\u7801",name:"password",placeholder:"\u914D\u7F6E\u4ED3\u5E93\u5BC6\u7801,\u4E3A\u7A7A\u65F6\u4F7F\u7528\u65E7\u5BC6\u7801"},"password")]:(0,r.jsx)(r.Fragment,{})}})]})}),u=I,t=e(43425),P=e(12010),M=e(78957),U=e(96074),K=e(83062);function L(){var o=(0,c.useRef)(),B=(0,c.useRef)();return(0,r.jsx)(P.Z,{rowKey:"id",columns:[{title:"\u540D\u79F0",ellipsis:!0,dataIndex:"title"},{title:"Url",dataIndex:"serverAddress"},{title:"\u7528\u6237",dataIndex:"username"},{title:"\u64CD\u4F5C",width:100,render:function(a,E,R,j,v){return E.username=="anonymous"?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(M.Z,{split:(0,r.jsx)(U.Z,{type:"vertical"}),children:(0,r.jsx)(f.ZP,{type:"link",onClick:function(){var D;(D=B.current)===null||D===void 0||D.setEditId(E.id)},children:(0,r.jsx)(K.Z,{title:"\u7BA1\u7406",children:(0,r.jsx)(t.Z,{})})})})}}],request:function(){var T=p()(s()().mark(function a(E,R,j){var v;return s()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,d.Ot)({title:E.title,serverAddress:E.serverAddress});case 2:return v=D.sent,D.abrupt("return",{data:v.data.list,success:!0,total:v.data.list.length});case 4:case"end":return D.stop()}},a)}));return function(a,E,R){return T.apply(this,arguments)}}(),toolBarRender:function(){return[(0,r.jsx)(u,{onFinish:function(){var E,R;!((E=o.current)===null||E===void 0)&&E.reloadAndRest&&((R=o.current)===null||R===void 0||R.reloadAndRest())},ref:B})]},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:o,tableAlertOptionRender:function(a){var E=a.selectedRowKeys;return(0,r.jsx)(M.Z,{size:16,children:(0,r.jsx)(C.Z,{danger:!0,type:"primary",action:function(){return(0,d.ix)({id:E})},onSuccess:function(){var j,v;return!((j=o.current)===null||j===void 0)&&j.reloadAndRest&&((v=o.current)===null||v===void 0||v.reloadAndRest()),!0},onError:function(){var j,v;return!((j=o.current)===null||j===void 0)&&j.reset&&((v=o.current)===null||v===void 0||v.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})}})}},75870:function($,A,e){e.d(A,{Ot:function(){return x},ZH:function(){return d},ix:function(){return i},t1:function(){return F}});var O=e(15009),s=e.n(O),y=e(99289),p=e.n(y),C=e(54006);function x(l){return g.apply(this,arguments)}function g(){return g=p()(s()().mark(function l(f){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,C.request)("/api/common/registry/get-list",{method:"POST",data:f}));case 1:case"end":return r.stop()}},l)})),g.apply(this,arguments)}function d(l){return m.apply(this,arguments)}function m(){return m=p()(s()().mark(function l(f){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,C.request)("/api/common/registry/create",{method:"POST",data:f}));case 1:case"end":return r.stop()}},l)})),m.apply(this,arguments)}function i(l){return n.apply(this,arguments)}function n(){return n=p()(s()().mark(function l(f){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,C.request)("/api/common/registry/delete",{method:"POST",data:f}));case 1:case"end":return r.stop()}},l)})),n.apply(this,arguments)}function F(l){return h.apply(this,arguments)}function h(){return h=p()(s()().mark(function l(f){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,C.request)("/api/common/registry/get-detail",{method:"POST",data:f}));case 1:case"end":return r.stop()}},l)})),h.apply(this,arguments)}}}]);
