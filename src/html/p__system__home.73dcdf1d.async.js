"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2548],{80821:function(W,E,n){n.d(E,{Z:function(){return j}});var y=n(5574),r=n.n(y),S=n(93246),l=n(54006),s=n(31418),v=n(86738),d=n(14726),e=n(83062),_=n(62435),g=n(86074);function j(i){var C=(0,_.useState)(!1),R=r()(C,2),I=R[0],b=R[1],B=s.Z.useApp(),U=(0,l.useIntl)(),M=function(){b(!0),i.action().then(function(O){if(b(!1),typeof i.onSuccess=="function"&&i.onSuccess(O),i.messageSuccess){var p="";i.messageSuccess.indexOf(".")>-1?p=U.formatMessage({id:i.messageSuccess}):p=i.messageSuccess,i.asynced?(0,S.Rk)(B,p):(0,S.$h)(B,p)}}).catch(function(O){b(!1),typeof i.onError=="function"&&i.onError(O)})};return i.confirm?(0,g.jsx)(v.Z,{style:{width:500},title:"\u63D0\u793A",description:i.confirm,onConfirm:M,okText:"Yes",cancelText:"No",children:(0,g.jsx)(d.ZP,{disabled:i.disabled,icon:i.icon,loading:I,danger:i.danger,type:i.type,children:i.children})}):(0,g.jsx)(e.Z,{title:i.tips,children:(0,g.jsx)(d.ZP,{disabled:i.disabled,icon:i.icon,loading:I,onClick:M,danger:i.danger,type:i.type,children:i.children})})}},67667:function(W,E,n){n.r(E),n.d(E,{default:function(){return o}});var y=n(5574),r=n.n(y),S=n(80821),l=n(97857),s=n.n(l),v=n(28413),d=n(62435),e=n(86074);function _(a){var A=(0,d.useState)(),$=r()(A,2),K=$[0],k=$[1],L={colorField:"value",valueField:"value",scale:{color:{range:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"]}},legend:!1};return a.data?(0,e.jsx)(v.Z,s()(s()({},L),{},{height:500,data:{name:"root",children:a.data}})):(0,e.jsx)(e.Fragment,{})}var g=n(2831),j=n(18148),i=n(5251),C=n(45605),R=n(1210),I=n(38123),b=n(95556),B=n(12122),U=n(50067),M=n(2830),z=n(26522),O=n(238),p=n(38345),h=n(74273),x=n(54006),T=n(26412),u=n(78957),f=n(83062);function o(){var a,A,$,K,k,L,G,V,w,H,N,Y,X,Q,J,ae=(0,d.useState)(),q=r()(ae,2),t=q[0],ie=q[1],se=(0,d.useState)(),ee=r()(se,2),c=ee[0],re=ee[1],te=function(){(0,g.a)().then(function(P){ie(P.data);var D={total:0,container:0,volume:0,image:0,cache:0,item:[]};P.data.usage.Containers&&P.data.usage.Containers.map(function(m){var Z,F;D.container+=m.SizeRootFs+((Z=m.SizeRw)!==null&&Z!==void 0?Z:0),D.item.push({name:m.Names[0],value:parseFloat(((m.SizeRootFs+((F=m.SizeRw)!==null&&F!==void 0?F:0))/1024/1024).toFixed(2))})}),P.data.usage.Volumes&&P.data.usage.Volumes.map(function(m){D.volume+=m.UsageData.Size,D.item.push({name:m.Name,value:parseFloat((m.UsageData.Size/1024/1024).toFixed(2))})}),P.data.usage.Images&&P.data.usage.Images.map(function(m){var Z,F;D.image+=m.Size-((Z=m.Sharedsize)!==null&&Z!==void 0?Z:0),D.item.push({name:m.RepoTags&&m.RepoTags.length>0?m.RepoTags[0]:m.Id,value:parseFloat(((m.Size-((F=m.Sharedsize)!==null&&F!==void 0?F:0))/1024/1024).toFixed(2))})}),P.data.usage.BuildCache&&P.data.usage.BuildCache.map(function(m){D.cache+=m.Size}),D.total=P.data.usage.LayersSize,re(D)})};return(0,d.useEffect)(function(){te()},[]),(0,e.jsxs)(p.Z,{direction:"column",gutter:[10,10],children:[(0,e.jsx)(p.Z,{title:(0,e.jsx)(C.Z,{}),subTitle:"\u57FA\u7840\u4FE1\u606F",bordered:!0,headerBordered:!0,children:(0,e.jsxs)(T.Z,{title:"\u7CFB\u7EDF\u4FE1\u606F",children:[(0,e.jsx)(T.Z.Item,{label:"\u9762\u677F\u4FE1\u606F",children:(0,e.jsxs)(u.Z,{direction:"horizontal",children:[(0,e.jsxs)("span",{children:["DPanel - ",t==null?void 0:t.dpanel.version]}),(0,e.jsx)("a",{target:"_blank",href:"https://github.com/donknap/dpanel",children:(0,e.jsx)(R.Z,{})}),(0,e.jsx)(f.Z,{title:"\u5B98\u65B9\u4EA4\u6D41\u7FA4\uFF1A837583876",children:(0,e.jsx)("a",{target:"_blank",href:"https://qm.qq.com/q/NC0z7keAiy",children:(0,e.jsx)(I.Z,{})})})]})}),(0,e.jsx)(T.Z.Item,{label:"Docker Sdk \u7248\u672C",children:t==null?void 0:t.sdkVersion}),(0,e.jsx)(T.Z.Item,{label:"Docker\u7248\u672C",children:"".concat(t==null?void 0:t.info.OperatingSystem," - ").concat(t==null?void 0:t.info.ServerVersion," - ").concat(t==null?void 0:t.info.KernelVersion," - ").concat(t==null?void 0:t.info.Architecture)}),(0,e.jsx)(T.Z.Item,{label:"Cpu",children:t==null?void 0:t.info.NCPU}),(0,e.jsx)(T.Z.Item,{label:"Memory",children:(0,i.FI)((a=t==null?void 0:t.info.MemTotal)!==null&&a!==void 0?a:0)}),(0,e.jsx)(T.Z.Item,{label:"\u7CFB\u7EDF\u65F6\u95F4",children:new Date((A=t==null?void 0:t.info.SystemTime)!==null&&A!==void 0?A:"").toLocaleString()})]})}),(0,e.jsx)(p.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(b.Z,{}),subTitle:"\u5BB9\u5668",children:(0,e.jsxs)(h.Z.Group,{children:[(0,e.jsx)(h.Z,{statistic:{title:"\u5168\u90E8",value:($=t==null?void 0:t.info.Containers)!==null&&$!==void 0?$:0,description:(0,e.jsx)(x.Link,{to:"/app/list",children:"\u67E5\u770B"})}}),(0,e.jsx)(h.Z.Divider,{}),(0,e.jsx)(h.Z,{statistic:{title:"\u8FD0\u884C\u4E2D",value:(K=t==null?void 0:t.info.ContainersRunning)!==null&&K!==void 0?K:0,status:"success"}}),(0,e.jsx)(h.Z,{statistic:{title:"\u505C\u6B62",value:((k=t==null?void 0:t.info.ContainersPaused)!==null&&k!==void 0?k:0)+((L=t==null?void 0:t.info.ContainersStopped)!==null&&L!==void 0?L:0),status:"error"}}),(0,e.jsx)(h.Z,{statistic:{title:"\u56DE\u6536\u7AD9",value:(G=t==null?void 0:t.total.containerTask)!==null&&G!==void 0?G:0,status:"default",description:(0,e.jsx)(x.Link,{to:"/app/list/recycle",children:"\u67E5\u770B"})}})]})}),(0,e.jsxs)(p.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(B.Z,{}),subTitle:"\u5176\u5B83",children:[(0,e.jsx)(h.Z,{statistic:{title:"\u955C\u50CF",value:"".concat((V=(t==null?void 0:t.usage.Images)&&t.usage.Images.length)!==null&&V!==void 0?V:0),status:"default",description:(0,e.jsx)(x.Link,{to:"/image/list",children:"\u67E5\u770B"})},chart:(0,e.jsx)(U.Z,{style:{fontSize:30,paddingTop:20}}),chartPlacement:"left"}),(0,e.jsx)(h.Z,{statistic:{title:"\u955C\u50CF\u4EFB\u52A1",value:(w=t==null?void 0:t.total.imageTask)!==null&&w!==void 0?w:0,status:"default",description:(0,e.jsx)(x.Link,{to:"/image/list/build",children:"\u67E5\u770B"})},chart:(0,e.jsx)(M.Z,{style:{fontSize:30,paddingTop:20}}),chartPlacement:"left"}),(0,e.jsx)(h.Z,{statistic:{title:"\u7F51\u7EDC",value:t==null?void 0:t.total.network,status:"default",description:(0,e.jsx)(x.Link,{to:"/system/network",children:"\u67E5\u770B"})},chart:(0,e.jsx)(z.Z,{style:{fontSize:30,paddingTop:20}}),chartPlacement:"left"}),(0,e.jsx)(h.Z,{statistic:{title:"\u5B58\u50A8\u5377",value:(H=(t==null?void 0:t.usage.Volumes)&&(t==null?void 0:t.usage.Volumes.length))!==null&&H!==void 0?H:0,status:"default",description:(0,e.jsx)(x.Link,{to:"/system/volume",children:"\u67E5\u770B"})},chart:(0,e.jsx)(O.Z,{style:{fontSize:30,paddingTop:20}}),chartPlacement:"left"})]}),(0,e.jsx)(p.Z,{title:"\u5B58\u50A8\u7528\u91CF",split:"horizontal",headerBordered:!0,bordered:!0,children:(0,e.jsxs)(p.Z,{split:"vertical",gutter:[150,100],children:[c!=null&&c.item&&(c==null?void 0:c.item.length)>0?(0,e.jsx)(_,{data:(N=c==null?void 0:c.item)!==null&&N!==void 0?N:[]}):(0,e.jsx)(e.Fragment,{}),(0,e.jsxs)(p.Z,{split:"horizontal",children:[(0,e.jsx)(h.Z,{statistic:{title:"\u5BB9\u5668",value:(0,i.FI)((Y=c==null?void 0:c.container)!==null&&Y!==void 0?Y:0),description:"\u5305\u542B\u7CFB\u7EDF\u5360\u7528\u53CA\u5BB9\u5668\u8FD0\u884C\u5199\u5165\u6570\u636E"}}),(0,e.jsx)(h.Z,{statistic:{title:"\u955C\u50CF",value:(0,i.FI)((X=c==null?void 0:c.image)!==null&&X!==void 0?X:0)}}),(0,e.jsx)(h.Z,{statistic:{title:"\u5B58\u50A8",value:(0,i.FI)((Q=c==null?void 0:c.volume)!==null&&Q!==void 0?Q:0),description:"\u53EA\u5305\u542B\u5B58\u50A8\u5377,\u4E0D\u5305\u542B\u6302\u8F7D\u76EE\u5F55"}}),(0,e.jsx)(h.Z,{statistic:{title:(0,e.jsxs)(u.Z,{children:[(0,e.jsx)("span",{children:"\u6784\u5EFA\u7F13\u5B58"}),(0,e.jsx)(S.Z,{action:function(){return(0,j.c5)()},type:"link",messageSuccess:"\u6E05\u9664\u6210\u529F",onSuccess:function(){te()},children:"\u6E05\u9664\u7F13\u5B58"})]}),value:(0,i.FI)((J=c==null?void 0:c.cache)!==null&&J!==void 0?J:0)}})]})]})})]})}},2831:function(W,E,n){n.d(E,{a:function(){return v},d:function(){return e}});var y=n(15009),r=n.n(y),S=n(99289),l=n.n(S),s=n(54006);function v(){return d.apply(this,arguments)}function d(){return d=l()(r()().mark(function g(){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,s.request)("/api/common/home/info",{method:"POST"});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},g)})),d.apply(this,arguments)}function e(){return _.apply(this,arguments)}function _(){return _=l()(r()().mark(function g(){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,s.request)("/api/common/home/upgrade-script",{method:"POST"});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},g)})),_.apply(this,arguments)}},18148:function(W,E,n){n.d(E,{$q:function(){return R},Fj:function(){return p},KG:function(){return v},KX:function(){return x},T8:function(){return i},Xn:function(){return g},ao:function(){return b},c5:function(){return z},c7:function(){return U}});var y=n(15009),r=n.n(y),S=n(99289),l=n.n(S),s=n(54006);function v(u){return d.apply(this,arguments)}function d(){return d=l()(r()().mark(function u(f){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,s.request)("/api/app/image/get-list",{method:"POST",data:f}));case 1:case"end":return a.stop()}},u)})),d.apply(this,arguments)}function e(u){return _.apply(this,arguments)}function _(){return _=_asyncToGenerator(_regeneratorRuntime().mark(function u(f){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,request("/api/app/log/image-build",{method:"POST",data:f});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},u)})),_.apply(this,arguments)}function g(u){return j.apply(this,arguments)}function j(){return j=l()(r()().mark(function u(f){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,s.request)("/api/app/image/get-list-build",{method:"POST",data:f}));case 1:case"end":return a.stop()}},u)})),j.apply(this,arguments)}function i(u){return C.apply(this,arguments)}function C(){return C=l()(r()().mark(function u(f){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,s.request)("/api/app/image/get-build-task",{method:"POST",data:f});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},u)})),C.apply(this,arguments)}function R(u){return I.apply(this,arguments)}function I(){return I=l()(r()().mark(function u(f){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,s.request)("/api/app/image/delete-build-task",{method:"POST",data:f});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},u)})),I.apply(this,arguments)}function b(u){return B.apply(this,arguments)}function B(){return B=l()(r()().mark(function u(f){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,s.request)("/api/app/image/image-delete",{method:"POST",data:f});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},u)})),B.apply(this,arguments)}function U(){return M.apply(this,arguments)}function M(){return M=l()(r()().mark(function u(){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,s.request)("/api/app/image/image-prune",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},u)})),M.apply(this,arguments)}function z(){return O.apply(this,arguments)}function O(){return O=l()(r()().mark(function u(){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,s.request)("/api/app/image/build-prune",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},u)})),O.apply(this,arguments)}function p(u){return h.apply(this,arguments)}function h(){return h=l()(r()().mark(function u(f){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,s.request)("/api/app/image/update-title",{method:"POST",data:f});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},u)})),h.apply(this,arguments)}function x(u){return T.apply(this,arguments)}function T(){return T=l()(r()().mark(function u(f){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,s.request)("/api/app/image/tag-sync",{method:"POST",data:f}));case 1:case"end":return a.stop()}},u)})),T.apply(this,arguments)}},5251:function(W,E,n){n.d(E,{FI:function(){return r},ZM:function(){return S}});function y(l){return l.trim()}function r(l){var s="";l<.1*1024?s=l.toFixed(2)+"B":l<.1*1024*1024?s=(l/1024).toFixed(2)+"KB":l<1*1024*1024*1024?s=(l/(1024*1024)).toFixed(2)+"MB":s=(l/(1024*1024*1024)).toFixed(2)+"GB";var v=s+"",d=v.indexOf("."),e=v.substr(d+1,2);return e=="00"?v.substring(0,d)+v.substr(d+3,2):s}function S(l){if(l){var s=new Date(l),v=s.getFullYear()+"-",d=(s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1)+"-",e=(s.getDate()<10?"0"+s.getDate():s.getDate())+" ",_=(s.getHours()<10?"0"+s.getHours():s.getHours())+":",g=(s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes())+":",j=s.getSeconds()<10?"0"+s.getSeconds():s.getSeconds();return v+d+e+_+g+j}}}}]);
