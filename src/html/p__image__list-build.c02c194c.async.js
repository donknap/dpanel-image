"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[536],{2830:function(K,O,e){e.d(O,{Z:function(){return M}});var T=e(87462),i=e(62435),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M876.6 239.5c-.5-.9-1.2-1.8-2-2.5-5-5-13.1-5-18.1 0L684.2 409.3l-67.9-67.9L788.7 169c.8-.8 1.4-1.6 2-2.5 3.6-6.1 1.6-13.9-4.5-17.5-98.2-58-226.8-44.7-311.3 39.7-67 67-89.2 162-66.5 247.4l-293 293c-3 3-2.8 7.9.3 11l169.7 169.7c3.1 3.1 8.1 3.3 11 .3l292.9-292.9c85.5 22.8 180.5.7 247.6-66.4 84.4-84.5 97.7-213.1 39.7-311.3zM786 499.8c-58.1 58.1-145.3 69.3-214.6 33.6l-8.8 8.8-.1-.1-274 274.1-79.2-79.2 230.1-230.1s0 .1.1.1l52.8-52.8c-35.7-69.3-24.5-156.5 33.6-214.6a184.2 184.2 0 01144-53.5L537 318.9a32.05 32.05 0 000 45.3l124.5 124.5a32.05 32.05 0 0045.3 0l132.8-132.8c3.7 51.8-14.4 104.8-53.6 143.9z"}}]},name:"tool",theme:"outlined"},o=P,c=e(84089),v=function(j,a){return i.createElement(c.Z,(0,T.Z)({},j,{ref:a,icon:o}))},m=i.forwardRef(v),M=m},80821:function(K,O,e){e.d(O,{Z:function(){return j}});var T=e(5574),i=e.n(T),P=e(93246),o=e(54006),c=e(31418),v=e(86738),m=e(14726),M=e(62435),d=e(86074);function j(a){var s=(0,M.useState)(!1),f=i()(s,2),r=f[0],u=f[1],C=c.Z.useApp(),A=(0,o.useIntl)(),B=function(){u(!0),a.action().then(function(L){if(u(!1),typeof a.onSuccess=="function"&&a.onSuccess(L),a.messageSuccess){var D="";a.messageSuccess.indexOf(".")>-1?D=A.formatMessage({id:a.messageSuccess}):D=a.messageSuccess,a.asynced?(0,P.Rk)(C,D):(0,P.$h)(C,D)}}).catch(function(L){u(!1),typeof a.onError=="function"&&a.onError(L)})};return a.confirm?(0,d.jsx)(v.Z,{style:{width:500},title:"\u63D0\u793A",description:a.confirm,onConfirm:B,okText:"Yes",cancelText:"No",children:(0,d.jsx)(m.ZP,{disabled:a.disabled,icon:a.icon,loading:r,danger:a.danger,type:a.type,children:a.children})}):(0,d.jsx)(m.ZP,{disabled:a.disabled,icon:a.icon,loading:r,onClick:B,danger:a.danger,type:a.type,children:a.children})}},94359:function(K,O,e){e.d(O,{Z:function(){return f}});var T=e(62435),i=e(3089),P=e(98165),o=e(18429),c=e(8751),v=e(14313),m=e(30159),M=e(87740),d=e(66309),j=e(83062),a=e(54006),s=e(86074);function f(r){var u=(0,s.jsx)(s.Fragment,{});return r.status=="0"&&(u=(0,s.jsx)(d.Z,{icon:(0,s.jsx)(i.Z,{}),color:"default",children:"waiting"})),r.status=="10"&&(u=(0,s.jsx)(d.Z,{icon:(0,s.jsx)(P.Z,{spin:!0}),color:"processing",children:"processing"})),r.status=="20"&&(u=(0,s.jsx)(d.Z,{icon:(0,s.jsx)(o.Z,{}),color:"error",children:"error"})),r.status=="30"&&(u=(0,s.jsx)(d.Z,{icon:(0,s.jsx)(c.Z,{}),color:"success",children:"success"})),r.status=="running"&&(u=(0,s.jsx)(d.Z,{icon:(0,s.jsx)(v.Z,{}),color:"success",children:r.status})),r.status=="paused"&&(u=(0,s.jsx)(d.Z,{icon:(0,s.jsx)(m.Z,{}),children:r.status})),r.status=="restarting"&&(u=(0,s.jsx)(d.Z,{icon:(0,s.jsx)(M.Z,{}),children:r.status})),(r.status=="exited"||r.status=="dead"||r.status=="removing")&&(u=(0,s.jsx)(d.Z,{icon:(0,s.jsx)(o.Z,{}),color:"warning",children:r.status})),r.link&&(u=(0,s.jsx)(a.Link,{to:r.link,children:u})),r.message&&(u=(0,s.jsx)(j.Z,{placement:"left",title:r.message,children:u})),(0,s.jsx)(s.Fragment,{children:u})}},13961:function(K,O,e){e.r(O),e.d(O,{default:function(){return E}});var T=e(15009),i=e.n(T),P=e(99289),o=e.n(P),c=e(37476),v=e(12010),m=e(78957),M=e(66309),d=e(96074),j=e(14726),a=e(83062),s=e(68508),f=e(54006),r=e(18148),u=e(94359),C=e(10516),A=e(45742),B=e(2830),x=e(29158),L=e(80821),D=e(62435),n=e(86074);function E(){var l=[{title:"\u540D\u79F0",render:function(R,_,I,h){return(0,n.jsx)(m.Z,{direction:"vertical",style:{textAlign:"left"},children:_.tag},_.id)}},{title:"\u6700\u65B0Tag",dataIndex:"tag",search:!1,render:function(R,_,I,h){return _.imageInfo?_.imageInfo.info.Id==""?(0,n.jsx)(M.Z,{children:"none"},"none"):(0,n.jsx)(m.Z,{direction:"vertical",style:{textAlign:"left"},children:_.imageInfo.info.RepoTags.map(function(g,W){return(0,n.jsx)(M.Z,{color:"#2db7f5",children:g},W)})},_.id):(0,n.jsx)(n.Fragment,{})}},{title:"\u955C\u50CFId",ellipsis:!0,search:!1,copyable:!0,dataIndex:["imageInfo","info","Id"],width:200},{title:"\u6784\u5EFA\u72B6\u6001",width:"100px",ellipsis:!0,search:!1,render:function(R,_,I,h){return[(0,n.jsx)("div",{children:(0,n.jsx)(u.Z,{status:_.status},_.id)},_.id)]}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:200,render:function(R,_,I,h){return(0,n.jsxs)(m.Z,{split:(0,n.jsx)(d.Z,{type:"vertical"}),children:[(0,n.jsx)(c.Y,{title:"\u6784\u5EFA\u65E5\u5FD7",submitter:!1,trigger:(0,n.jsx)(j.ZP,{size:"small",type:"link",children:(0,n.jsx)(a.Z,{title:"\u6784\u5EFA\u65E5\u5FD7",children:(0,n.jsx)(A.Z,{})})},_.id),children:(0,n.jsx)(C.ZP,{theme:"dark",height:"500px",value:_.message})},"log"),(0,n.jsx)(f.Link,{to:"/image/create?id="+_.id,type:"link",children:(0,n.jsx)(a.Z,{title:"\u518D\u6B21\u6784\u5EFA",children:(0,n.jsx)(B.Z,{})})},"rebuild"),_.imageInfo&&(0,n.jsx)(f.Link,{to:"/image/detail/".concat(_.imageInfo.info.Id),children:(0,n.jsx)(a.Z,{title:"\u67E5\u770B\u955C\u50CF",children:(0,n.jsx)(x.Z,{})})},"detail")]})}}],t=(0,D.useRef)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(v.Z,{actionRef:t,rowKey:"id",columns:l,request:function(){var p=o()(i()().mark(function R(_,I,h){var g,W,y;return i()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,r.Xn)({page:(g=_.current)!==null&&g!==void 0?g:1,pageSize:(W=_.pageSize)!==null&&W!==void 0?W:10});case 2:return y=U.sent,U.abrupt("return",{data:y.data.list,success:!0,total:y.data.total});case 4:case"end":return U.stop()}},R)}));return function(R,_,I){return p.apply(this,arguments)}}(),pagination:{pageSize:10},search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(R){var _=R.selectedRowKeys;return(0,n.jsx)(m.Z,{size:16,children:(0,n.jsx)(L.Z,{danger:!0,type:"primary",action:function(){return(0,r.$q)({id:_})},onSuccess:function(){var h,g;return!((h=t.current)===null||h===void 0)&&h.reloadAndRest&&((g=t.current)===null||g===void 0||g.reloadAndRest()),!0},onError:function(){var h,g;return!((h=t.current)===null||h===void 0)&&h.reset&&((g=t.current)===null||g===void 0||g.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})},tableExtraRender:function(){return(0,n.jsx)(s.Z,{mode:"horizontal",selectedKeys:["build"],items:[{label:(0,n.jsx)(f.Link,{to:"/image/list/all",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,n.jsx)(f.Link,{to:"/image/list/build",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})}})})}},18148:function(K,O,e){e.d(O,{$q:function(){return r},KG:function(){return v},T8:function(){return s},Xn:function(){return j},ao:function(){return C},c5:function(){return L},c7:function(){return B}});var T=e(15009),i=e.n(T),P=e(99289),o=e.n(P),c=e(54006);function v(n){return m.apply(this,arguments)}function m(){return m=o()(i()().mark(function n(E){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/api/app/image/get-list",{method:"POST",data:E}));case 1:case"end":return t.stop()}},n)})),m.apply(this,arguments)}function M(n){return d.apply(this,arguments)}function d(){return d=_asyncToGenerator(_regeneratorRuntime().mark(function n(E){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,request("/api/app/log/image-build",{method:"POST",data:E});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n)})),d.apply(this,arguments)}function j(n){return a.apply(this,arguments)}function a(){return a=o()(i()().mark(function n(E){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/api/app/image/get-list-build",{method:"POST",data:E}));case 1:case"end":return t.stop()}},n)})),a.apply(this,arguments)}function s(n){return f.apply(this,arguments)}function f(){return f=o()(i()().mark(function n(E){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.request)("/api/app/image/get-build-task",{method:"POST",data:E});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n)})),f.apply(this,arguments)}function r(n){return u.apply(this,arguments)}function u(){return u=o()(i()().mark(function n(E){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.request)("/api/app/image/delete-build-task",{method:"POST",data:E});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n)})),u.apply(this,arguments)}function C(n){return A.apply(this,arguments)}function A(){return A=o()(i()().mark(function n(E){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.request)("/api/app/image/image-delete",{method:"POST",data:E});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n)})),A.apply(this,arguments)}function B(){return x.apply(this,arguments)}function x(){return x=o()(i()().mark(function n(){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,c.request)("/api/app/image/image-prune",{method:"POST"});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n)})),x.apply(this,arguments)}function L(){return D.apply(this,arguments)}function D(){return D=o()(i()().mark(function n(){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,c.request)("/api/app/image/build-prune",{method:"POST"});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n)})),D.apply(this,arguments)}}}]);
