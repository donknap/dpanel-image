"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[536],{80821:function(b,A,e){e.d(A,{Z:function(){return T}});var F=e(5574),r=e.n(F),C=e(93246),d=e(54006),f=e(31418),R=e(86738),O=e(14726),v=e(83062),h=e(62435),p=e(86074);function T(n){var D=(0,h.useState)(!1),u=r()(D,2),c=u[0],x=u[1],o=f.Z.useApp(),E=(0,d.useIntl)(),g=function(){x(!0),n.action().then(function(B){if(x(!1),typeof n.onSuccess=="function"&&n.onSuccess(B),n.messageSuccess){var L="";n.messageSuccess.indexOf(".")>-1?L=E.formatMessage({id:n.messageSuccess}):L=n.messageSuccess,n.asynced?(0,C.Rk)(o,L):(0,C.$h)(o,L)}}).catch(function(B){x(!1),typeof n.onError=="function"&&n.onError(B)})};return n.confirm?(0,p.jsx)(R.Z,{style:{width:500},title:"\u63D0\u793A",description:n.confirm,onConfirm:g,okText:"Yes",cancelText:"No",children:(0,p.jsx)(O.ZP,{disabled:n.disabled,icon:n.icon,loading:c,danger:n.danger,type:n.type,children:n.children})}):(0,p.jsx)(v.Z,{title:n.tips,children:(0,p.jsx)(O.ZP,{disabled:n.disabled,icon:n.icon,loading:c,onClick:g,danger:n.danger,type:n.type,children:n.children})})}},94359:function(b,A,e){e.d(A,{Z:function(){return D}});var F=e(62435),r=e(3089),C=e(98165),d=e(18429),f=e(8751),R=e(14313),O=e(30159),v=e(87740),h=e(66309),p=e(83062),T=e(54006),n=e(86074);function D(u){var c=(0,n.jsx)(n.Fragment,{});return u.status=="0"&&(c=(0,n.jsx)(h.Z,{icon:(0,n.jsx)(r.Z,{}),color:"default",children:"waiting"})),u.status=="10"&&(c=(0,n.jsx)(h.Z,{icon:(0,n.jsx)(C.Z,{spin:!0}),color:"processing",children:"processing"})),u.status=="20"&&(c=(0,n.jsx)(h.Z,{icon:(0,n.jsx)(d.Z,{}),color:"error",children:"error"})),u.status=="30"&&(c=(0,n.jsx)(h.Z,{icon:(0,n.jsx)(f.Z,{}),color:"success",children:"success"})),u.status=="running"&&(c=(0,n.jsx)(h.Z,{icon:(0,n.jsx)(R.Z,{}),color:"success",children:u.status})),u.status=="paused"&&(c=(0,n.jsx)(h.Z,{icon:(0,n.jsx)(O.Z,{}),children:u.status})),u.status=="restarting"&&(c=(0,n.jsx)(h.Z,{icon:(0,n.jsx)(v.Z,{}),children:u.status})),(u.status=="exited"||u.status=="dead"||u.status=="removing")&&(c=(0,n.jsx)(h.Z,{icon:(0,n.jsx)(d.Z,{}),color:"warning",children:u.status})),u.link&&(c=(0,n.jsx)(T.Link,{to:u.link,children:c})),u.message&&(c=(0,n.jsx)(p.Z,{placement:u.message.placement,title:u.message.content,children:c})),(0,n.jsx)(n.Fragment,{children:c})}},71623:function(b,A,e){e.r(A),e.d(A,{default:function(){return X}});var F=e(15009),r=e.n(F),C=e(99289),d=e.n(C),f=e(37476),R=e(6110),O=e(90639),v=e(78957),h=e(83062),p=e(66309),T=e(96074),n=e(14726),D=e(68508),u=e(54006),c=e(18148),x=e(94359),o=e(20713),E=e(43425),g=e(45742),l=e(80821),B=e(62435),L=e(97961),U=e(50067),$=e(184),K=e(64317),s=e(52688),_=e(62370),m=e(38925),t=e(71230),w=e(15746),a=e(86074);function k(z){return(0,a.jsxs)($.a,{title:"\u6784\u5EFA\u591A\u5E73\u53F0\u955C\u50CF",trigger:(0,a.jsx)(u.Link,{to:"#",children:(0,a.jsx)(h.Z,{title:"\u591A\u5E73\u53F0\u6784\u5EFA",children:(0,a.jsx)(U.Z,{})})}),onFinish:function(){var Z=d()(r()().mark(function M(I){return r()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return console.log(I),j.abrupt("return",!1);case 2:case"end":return j.stop()}},M)}));return function(M){return Z.apply(this,arguments)}}(),children:[(0,a.jsx)(m.Z,{message:"\u6CE8\u610F",description:"\u591A\u5E73\u53F0\u6784\u5EFA\u540E\u4F1A\u76F4\u63A5\u63A8\u9001\u5230\u5BF9\u5E94\u7684\u4ED3\u5E93\uFF0C\u5176\u4EA7\u751F\u7684\u955C\u50CF\u5E76\u4E0D\u4F1A\u5728\u955C\u50CF\u5217\u8868\u4E2D\u663E\u793A",type:"error",style:{marginBottom:"20px"}}),(0,a.jsx)(K.Z,{name:"platform",label:"\u6784\u5EFA\u5E73\u53F0",tooltip:"Dockerfile\u4E2D\u6839\u636E\u6784\u5EFA\u53C2\u6570 TARGETARCH \u8FDB\u884C\u533A\u5206\u5E73\u53F0",options:L.ii.map(function(Z){return Z.name}),mode:"multiple"}),(0,a.jsxs)(t.Z,{children:[(0,a.jsx)(w.Z,{span:4,children:(0,a.jsx)(s.Z,{label:"\u6E05\u7406\u6784\u5EFA\u7F13\u5B58",name:"clearCache",initialValue:!0})}),(0,a.jsx)(w.Z,{children:(0,a.jsx)(s.Z,{label:"\u6E05\u7406\u6784\u5EFA\u5BB9\u5668",name:"clearContainer",initialValue:!0})})]}),(0,a.jsx)(_.Z,{label:"\u63A7\u5236\u53F0\u8F93\u51FA",name:"console",children:(0,a.jsx)(o.ZP,{theme:"dark",style:{marginTop:"10px",backgroundColor:"#282c34"},height:"350px",extensions:[o.tk.lineWrapping]})})]})}function X(){var z=[{title:"\u540D\u79F0",render:function(I,i,j,y){return(0,a.jsx)(v.Z,{direction:"vertical",style:{textAlign:"left"},children:i.imageInfo&&i.imageInfo.info.Id?(0,a.jsx)(u.Link,{to:"/image/detail/".concat(i.imageInfo.info.Id),children:(0,a.jsxs)(h.Z,{title:"\u67E5\u770B\u955C\u50CF",children:[" ",i.title]})},"detail"):i.title},i.id)}},{title:"\u6700\u65B0Tag",dataIndex:"tag",search:!1,render:function(I,i,j,y){return i.imageInfo?i.imageInfo.info.Id==""?(0,a.jsx)(p.Z,{children:"none"},"none"):(0,a.jsx)(v.Z,{direction:"vertical",style:{textAlign:"left"},children:i.imageInfo.info.RepoTags.map(function(P,S){return(0,a.jsx)(p.Z,{color:"#2db7f5",children:P},S)})},i.id):(0,a.jsx)(a.Fragment,{})}},{title:"\u955C\u50CFId",ellipsis:!0,search:!1,copyable:!0,dataIndex:["imageInfo","info","Id"],width:200},{title:"\u6784\u5EFA\u72B6\u6001",width:"100px",ellipsis:!0,search:!1,render:function(I,i,j,y){return[(0,a.jsx)("div",{children:(0,a.jsx)(x.Z,{status:i.status},i.id)},i.id)]}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:150,render:function(I,i,j,y){return(0,a.jsxs)(v.Z,{split:(0,a.jsx)(T.Z,{type:"vertical"}),children:[(0,a.jsx)(u.Link,{to:"/image/create?id="+i.id,type:"link",children:(0,a.jsx)(h.Z,{title:"\u518D\u6B21\u6784\u5EFA",children:(0,a.jsx)(E.Z,{})})},"rebuild"),(0,a.jsx)(f.Y,{title:"\u6784\u5EFA\u65E5\u5FD7",submitter:!1,trigger:(0,a.jsx)(u.Link,{to:"#",children:(0,a.jsx)(h.Z,{title:"\u6784\u5EFA\u65E5\u5FD7",children:(0,a.jsx)(g.Z,{})})},i.id),children:(0,a.jsx)(o.ZP,{theme:"dark",height:"500px",value:i.message})},"log"),(0,a.jsx)(k,{id:i.id})]})}}],Z=(0,B.useRef)();return(0,a.jsx)(R._z,{header:{extra:[(0,a.jsx)(n.ZP,{type:"primary",children:(0,a.jsx)(u.Link,{to:"/image/create",children:"\u521B\u5EFA\u955C\u50CF"})},"create"),(0,a.jsx)(n.ZP,{children:"\u62C9\u53D6\u955C\u50CF"},"pull")]},children:(0,a.jsx)(O.Z,{actionRef:Z,rowKey:"id",columns:z,request:function(){var M=d()(r()().mark(function I(i,j,y){var P,S,G;return r()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,c.Xn)({page:(P=i.current)!==null&&P!==void 0?P:1,pageSize:(S=i.pageSize)!==null&&S!==void 0?S:10});case 2:return G=W.sent,W.abrupt("return",{data:G.data.list,success:!0,total:G.data.total});case 4:case"end":return W.stop()}},I)}));return function(I,i,j){return M.apply(this,arguments)}}(),pagination:{pageSize:10},search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(I){var i=I.selectedRowKeys;return(0,a.jsx)(v.Z,{size:16,children:(0,a.jsx)(l.Z,{danger:!0,type:"primary",action:function(){return(0,c.$q)({id:i})},onSuccess:function(){var y,P;return!((y=Z.current)===null||y===void 0)&&y.reloadAndRest&&((P=Z.current)===null||P===void 0||P.reloadAndRest()),!0},onError:function(){var y,P;return!((y=Z.current)===null||y===void 0)&&y.reset&&((P=Z.current)===null||P===void 0||P.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})},tableExtraRender:function(){return(0,a.jsx)(D.Z,{mode:"horizontal",selectedKeys:["build"],items:[{label:(0,a.jsx)(u.Link,{to:"/image/list/all",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,a.jsx)(u.Link,{to:"/image/list/build",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})}})})}},97961:function(b,A,e){e.d(A,{MF:function(){return c},_2:function(){return D},fN:function(){return O},hG:function(){return T},ii:function(){return R},vC:function(){return h}});var F=e(15009),r=e.n(F),C=e(99289),d=e.n(C),f=e(54006),R=[{name:"amd64",arch:"amd64"},{name:"arm64",arch:"arm64"},{name:"i386",arch:"386"},{name:"arm/v6",arch:"arm"},{name:"arm/v7",arch:"arm"},{name:"arm/v8",arch:"arm64"},{name:"ppc64le",arch:"ppc64le"},{name:"riscv64",arch:"riscv64"}];function O(o){return v.apply(this,arguments)}function v(){return v=d()(r()().mark(function o(E){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,f.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:E}));case 1:case"end":return l.stop()}},o)})),v.apply(this,arguments)}function h(o){return p.apply(this,arguments)}function p(){return p=d()(r()().mark(function o(E){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,f.request)("/api/app/image/import-by-container-tar",{method:"POST",data:E}));case 1:case"end":return l.stop()}},o)})),p.apply(this,arguments)}function T(o){return n.apply(this,arguments)}function n(){return n=d()(r()().mark(function o(E){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,f.request)("/api/app/image/import-by-image-tar",{method:"POST",data:E}));case 1:case"end":return l.stop()}},o)})),n.apply(this,arguments)}function D(o){return u.apply(this,arguments)}function u(){return u=d()(r()().mark(function o(E){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,f.request)("/api/common/attach/delete",{method:"POST",data:E});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},o)})),u.apply(this,arguments)}function c(){return x.apply(this,arguments)}function x(){return x=d()(r()().mark(function o(){return r()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,f.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return g.stop()}},o)})),x.apply(this,arguments)}},18148:function(b,A,e){e.d(A,{$q:function(){return u},Fj:function(){return L},KG:function(){return R},KX:function(){return $},T8:function(){return n},Xn:function(){return p},ao:function(){return x},c5:function(){return l},c7:function(){return E}});var F=e(15009),r=e.n(F),C=e(99289),d=e.n(C),f=e(54006);function R(s){return O.apply(this,arguments)}function O(){return O=d()(r()().mark(function s(_){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,f.request)("/api/app/image/get-list",{method:"POST",data:_}));case 1:case"end":return t.stop()}},s)})),O.apply(this,arguments)}function v(s){return h.apply(this,arguments)}function h(){return h=_asyncToGenerator(_regeneratorRuntime().mark(function s(_){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,request("/api/app/log/image-build",{method:"POST",data:_});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},s)})),h.apply(this,arguments)}function p(s){return T.apply(this,arguments)}function T(){return T=d()(r()().mark(function s(_){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,f.request)("/api/app/image/get-list-build",{method:"POST",data:_}));case 1:case"end":return t.stop()}},s)})),T.apply(this,arguments)}function n(s){return D.apply(this,arguments)}function D(){return D=d()(r()().mark(function s(_){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.request)("/api/app/image/get-build-task",{method:"POST",data:_});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},s)})),D.apply(this,arguments)}function u(s){return c.apply(this,arguments)}function c(){return c=d()(r()().mark(function s(_){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.request)("/api/app/image/delete-build-task",{method:"POST",data:_});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},s)})),c.apply(this,arguments)}function x(s){return o.apply(this,arguments)}function o(){return o=d()(r()().mark(function s(_){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.request)("/api/app/image/image-delete",{method:"POST",data:_});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},s)})),o.apply(this,arguments)}function E(){return g.apply(this,arguments)}function g(){return g=d()(r()().mark(function s(){return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,f.request)("/api/app/image/image-prune",{method:"POST"});case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},s)})),g.apply(this,arguments)}function l(){return B.apply(this,arguments)}function B(){return B=d()(r()().mark(function s(){return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,f.request)("/api/app/image/build-prune",{method:"POST"});case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},s)})),B.apply(this,arguments)}function L(s){return U.apply(this,arguments)}function U(){return U=d()(r()().mark(function s(_){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.request)("/api/app/image/update-title",{method:"POST",data:_});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},s)})),U.apply(this,arguments)}function $(s){return K.apply(this,arguments)}function K(){return K=d()(r()().mark(function s(_){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,f.request)("/api/app/image/tag-sync",{method:"POST",data:_}));case 1:case"end":return t.stop()}},s)})),K.apply(this,arguments)}}}]);
