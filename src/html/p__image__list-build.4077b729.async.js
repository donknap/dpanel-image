"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[536],{2830:function(W,O,n){n.d(O,{Z:function(){return P}});var p=n(87462),u=n(62435),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M876.6 239.5c-.5-.9-1.2-1.8-2-2.5-5-5-13.1-5-18.1 0L684.2 409.3l-67.9-67.9L788.7 169c.8-.8 1.4-1.6 2-2.5 3.6-6.1 1.6-13.9-4.5-17.5-98.2-58-226.8-44.7-311.3 39.7-67 67-89.2 162-66.5 247.4l-293 293c-3 3-2.8 7.9.3 11l169.7 169.7c3.1 3.1 8.1 3.3 11 .3l292.9-292.9c85.5 22.8 180.5.7 247.6-66.4 84.4-84.5 97.7-213.1 39.7-311.3zM786 499.8c-58.1 58.1-145.3 69.3-214.6 33.6l-8.8 8.8-.1-.1-274 274.1-79.2-79.2 230.1-230.1s0 .1.1.1l52.8-52.8c-35.7-69.3-24.5-156.5 33.6-214.6a184.2 184.2 0 01144-53.5L537 318.9a32.05 32.05 0 000 45.3l124.5 124.5a32.05 32.05 0 0045.3 0l132.8-132.8c3.7 51.8-14.4 104.8-53.6 143.9z"}}]},name:"tool",theme:"outlined"},d=D,c=n(84089),v=function(g,m){return u.createElement(c.Z,(0,p.Z)({},g,{ref:m,icon:d}))},f=u.forwardRef(v),P=f},80821:function(W,O,n){n.d(O,{Z:function(){return m}});var p=n(5574),u=n.n(p),D=n(93246),d=n(54006),c=n(31418),v=n(86738),f=n(14726),P=n(83062),o=n(62435),g=n(86074);function m(t){var M=(0,o.useState)(!1),i=u()(M,2),_=i[0],C=i[1],T=c.Z.useApp(),B=(0,d.useIntl)(),R=function(){C(!0),t.action().then(function(j){if(C(!1),typeof t.onSuccess=="function"&&t.onSuccess(j),t.messageSuccess){var I="";t.messageSuccess.indexOf(".")>-1?I=B.formatMessage({id:t.messageSuccess}):I=t.messageSuccess,t.asynced?(0,D.Rk)(T,I):(0,D.$h)(T,I)}}).catch(function(j){C(!1),typeof t.onError=="function"&&t.onError(j)})};return t.confirm?(0,g.jsx)(v.Z,{style:{width:500},title:"\u63D0\u793A",description:t.confirm,onConfirm:R,okText:"Yes",cancelText:"No",children:(0,g.jsx)(f.ZP,{disabled:t.disabled,icon:t.icon,loading:_,danger:t.danger,type:t.type,children:t.children})}):(0,g.jsx)(P.Z,{title:t.tips,children:(0,g.jsx)(f.ZP,{disabled:t.disabled,icon:t.icon,loading:_,onClick:R,danger:t.danger,type:t.type,children:t.children})})}},94359:function(W,O,n){n.d(O,{Z:function(){return M}});var p=n(62435),u=n(3089),D=n(98165),d=n(18429),c=n(8751),v=n(14313),f=n(30159),P=n(87740),o=n(66309),g=n(83062),m=n(54006),t=n(86074);function M(i){var _=(0,t.jsx)(t.Fragment,{});return i.status=="0"&&(_=(0,t.jsx)(o.Z,{icon:(0,t.jsx)(u.Z,{}),color:"default",children:"waiting"})),i.status=="10"&&(_=(0,t.jsx)(o.Z,{icon:(0,t.jsx)(D.Z,{spin:!0}),color:"processing",children:"processing"})),i.status=="20"&&(_=(0,t.jsx)(o.Z,{icon:(0,t.jsx)(d.Z,{}),color:"error",children:"error"})),i.status=="30"&&(_=(0,t.jsx)(o.Z,{icon:(0,t.jsx)(c.Z,{}),color:"success",children:"success"})),i.status=="running"&&(_=(0,t.jsx)(o.Z,{icon:(0,t.jsx)(v.Z,{}),color:"success",children:i.status})),i.status=="paused"&&(_=(0,t.jsx)(o.Z,{icon:(0,t.jsx)(f.Z,{}),children:i.status})),i.status=="restarting"&&(_=(0,t.jsx)(o.Z,{icon:(0,t.jsx)(P.Z,{}),children:i.status})),(i.status=="exited"||i.status=="dead"||i.status=="removing")&&(_=(0,t.jsx)(o.Z,{icon:(0,t.jsx)(d.Z,{}),color:"warning",children:i.status})),i.link&&(_=(0,t.jsx)(m.Link,{to:i.link,children:_})),i.message&&(_=(0,t.jsx)(g.Z,{placement:"left",title:i.message,children:_})),(0,t.jsx)(t.Fragment,{children:_})}},13961:function(W,O,n){n.r(O),n.d(O,{default:function(){return K}});var p=n(15009),u=n.n(p),D=n(99289),d=n.n(D),c=n(37476),v=n(6110),f=n(12010),P=n(78957),o=n(66309),g=n(96074),m=n(14726),t=n(83062),M=n(68508),i=n(54006),_=n(18148),C=n(94359),T=n(20713),B=n(45742),R=n(2830),y=n(29158),j=n(80821),I=n(62435),a=n(86074);function K(){var x=[{title:"\u540D\u79F0",render:function(s,e,A,h){return(0,a.jsx)(P.Z,{direction:"vertical",style:{textAlign:"left"},children:e.tag},e.id)}},{title:"\u6700\u65B0Tag",dataIndex:"tag",search:!1,render:function(s,e,A,h){return e.imageInfo?e.imageInfo.info.Id==""?(0,a.jsx)(o.Z,{children:"none"},"none"):(0,a.jsx)(P.Z,{direction:"vertical",style:{textAlign:"left"},children:e.imageInfo.info.RepoTags.map(function(E,U){return(0,a.jsx)(o.Z,{color:"#2db7f5",children:E},U)})},e.id):(0,a.jsx)(a.Fragment,{})}},{title:"\u955C\u50CFId",ellipsis:!0,search:!1,copyable:!0,dataIndex:["imageInfo","info","Id"],width:200},{title:"\u6784\u5EFA\u72B6\u6001",width:"100px",ellipsis:!0,search:!1,render:function(s,e,A,h){return[(0,a.jsx)("div",{children:(0,a.jsx)(C.Z,{status:e.status},e.id)},e.id)]}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:200,render:function(s,e,A,h){return(0,a.jsxs)(P.Z,{split:(0,a.jsx)(g.Z,{type:"vertical"}),children:[(0,a.jsx)(c.Y,{title:"\u6784\u5EFA\u65E5\u5FD7",submitter:!1,trigger:(0,a.jsx)(m.ZP,{size:"small",type:"link",children:(0,a.jsx)(t.Z,{title:"\u6784\u5EFA\u65E5\u5FD7",children:(0,a.jsx)(B.Z,{})})},e.id),children:(0,a.jsx)(T.ZP,{theme:"dark",height:"500px",value:e.message})},"log"),(0,a.jsx)(i.Link,{to:"/image/create?id="+e.id,type:"link",children:(0,a.jsx)(t.Z,{title:"\u518D\u6B21\u6784\u5EFA",children:(0,a.jsx)(R.Z,{})})},"rebuild"),e.imageInfo&&(0,a.jsx)(i.Link,{to:"/image/detail/".concat(e.imageInfo.info.Id),children:(0,a.jsx)(t.Z,{title:"\u67E5\u770B\u955C\u50CF",children:(0,a.jsx)(y.Z,{})})},"detail")]})}}],r=(0,I.useRef)();return(0,a.jsx)(v._z,{header:{extra:[(0,a.jsx)(m.ZP,{type:"primary",children:(0,a.jsx)(i.Link,{to:"/image/create",children:"\u521B\u5EFA\u955C\u50CF"})},"create"),(0,a.jsx)(m.ZP,{children:"\u62C9\u53D6\u955C\u50CF"},"pull")]},children:(0,a.jsx)(f.Z,{actionRef:r,rowKey:"id",columns:x,request:function(){var l=d()(u()().mark(function s(e,A,h){var E,U,Z;return u()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,_.Xn)({page:(E=e.current)!==null&&E!==void 0?E:1,pageSize:(U=e.pageSize)!==null&&U!==void 0?U:10});case 2:return Z=L.sent,L.abrupt("return",{data:Z.data.list,success:!0,total:Z.data.total});case 4:case"end":return L.stop()}},s)}));return function(s,e,A){return l.apply(this,arguments)}}(),pagination:{pageSize:10},search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(s){var e=s.selectedRowKeys;return(0,a.jsx)(P.Z,{size:16,children:(0,a.jsx)(j.Z,{danger:!0,type:"primary",action:function(){return(0,_.$q)({id:e})},onSuccess:function(){var h,E;return!((h=r.current)===null||h===void 0)&&h.reloadAndRest&&((E=r.current)===null||E===void 0||E.reloadAndRest()),!0},onError:function(){var h,E;return!((h=r.current)===null||h===void 0)&&h.reset&&((E=r.current)===null||E===void 0||E.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})},tableExtraRender:function(){return(0,a.jsx)(M.Z,{mode:"horizontal",selectedKeys:["build"],items:[{label:(0,a.jsx)(i.Link,{to:"/image/list/all",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,a.jsx)(i.Link,{to:"/image/list/build",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})}})})}},18148:function(W,O,n){n.d(O,{$q:function(){return i},Fj:function(){return I},KG:function(){return v},KX:function(){return K},T8:function(){return t},Xn:function(){return g},ao:function(){return C},c5:function(){return y},c7:function(){return B}});var p=n(15009),u=n.n(p),D=n(99289),d=n.n(D),c=n(54006);function v(r){return f.apply(this,arguments)}function f(){return f=d()(u()().mark(function r(l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/app/image/get-list",{method:"POST",data:l}));case 1:case"end":return e.stop()}},r)})),f.apply(this,arguments)}function P(r){return o.apply(this,arguments)}function o(){return o=_asyncToGenerator(_regeneratorRuntime().mark(function r(l){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request("/api/app/log/image-build",{method:"POST",data:l});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},r)})),o.apply(this,arguments)}function g(r){return m.apply(this,arguments)}function m(){return m=d()(u()().mark(function r(l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/app/image/get-list-build",{method:"POST",data:l}));case 1:case"end":return e.stop()}},r)})),m.apply(this,arguments)}function t(r){return M.apply(this,arguments)}function M(){return M=d()(u()().mark(function r(l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.request)("/api/app/image/get-build-task",{method:"POST",data:l});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},r)})),M.apply(this,arguments)}function i(r){return _.apply(this,arguments)}function _(){return _=d()(u()().mark(function r(l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.request)("/api/app/image/delete-build-task",{method:"POST",data:l});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},r)})),_.apply(this,arguments)}function C(r){return T.apply(this,arguments)}function T(){return T=d()(u()().mark(function r(l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.request)("/api/app/image/image-delete",{method:"POST",data:l});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},r)})),T.apply(this,arguments)}function B(){return R.apply(this,arguments)}function R(){return R=d()(u()().mark(function r(){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,c.request)("/api/app/image/image-prune",{method:"POST"});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},r)})),R.apply(this,arguments)}function y(){return j.apply(this,arguments)}function j(){return j=d()(u()().mark(function r(){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,c.request)("/api/app/image/build-prune",{method:"POST"});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},r)})),j.apply(this,arguments)}function I(r){return a.apply(this,arguments)}function a(){return a=d()(u()().mark(function r(l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.request)("/api/app/image/update-title",{method:"POST",data:l});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},r)})),a.apply(this,arguments)}function K(r){return x.apply(this,arguments)}function x(){return x=d()(u()().mark(function r(l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/app/image/tag-sync",{method:"POST",data:l}));case 1:case"end":return e.stop()}},r)})),x.apply(this,arguments)}}}]);
