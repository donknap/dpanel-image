(self.webpackChunk=self.webpackChunk||[]).push([[3805],{33345:function(c,s,e){"use strict";e.r(s),e.d(s,{default:function(){return p}});var t=e(5574),r=e.n(t),d=e(52626),a=e(54006),i=e(78267),u=e.n(i),n=e(31418),m=e(62435),_=e(12320),g=e.n(_),A=e(89629),P=e(86074);function p(){var y=n.Z.useApp(),M=(0,a.useParams)(),v=(0,a.useSearchParams)(),h=r()(v,2),D=h[0],I=h[1],E=new i.FitAddon,l=new _.Terminal({fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,cursorStyle:"block",cursorBlink:!0,theme:{foreground:"#dddddd",cursor:"gray"}}),f=new WebSocket((0,d.R)("/console/"+M.id+"?"+D.toString()));return l.onData(function(o){var O={content:{command:o},type:"console"};f.send(JSON.stringify(O))}),(0,m.useEffect)(function(){l.loadAddon(E),l.open(document.getElementById("terminal-container")),E.fit(),f.addEventListener("message",function(o){if(o.data){if(o.data.indexOf('{"type":')>-1)return;l.write(o.data)}})},[]),(0,P.jsx)("div",{id:"terminal-container",style:{width:"100%",height:"100vh"}})}},78267:function(c){(function(s,e){c.exports=e()})(self,()=>(()=>{"use strict";var s={};return(()=>{var e=s;Object.defineProperty(e,"__esModule",{value:!0}),e.FitAddon=void 0,e.FitAddon=class{activate(t){this._terminal=t}dispose(){}fit(){const t=this.proposeDimensions();if(!t||!this._terminal||isNaN(t.cols)||isNaN(t.rows))return;const r=this._terminal._core;this._terminal.rows===t.rows&&this._terminal.cols===t.cols||(r._renderService.clear(),this._terminal.resize(t.cols,t.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const t=this._terminal._core,r=t._renderService.dimensions;if(r.css.cell.width===0||r.css.cell.height===0)return;const d=this._terminal.options.scrollback===0?0:t.viewport.scrollBarWidth,a=window.getComputedStyle(this._terminal.element.parentElement),i=parseInt(a.getPropertyValue("height")),u=Math.max(0,parseInt(a.getPropertyValue("width"))),n=window.getComputedStyle(this._terminal.element),m=i-(parseInt(n.getPropertyValue("padding-top"))+parseInt(n.getPropertyValue("padding-bottom"))),_=u-(parseInt(n.getPropertyValue("padding-right"))+parseInt(n.getPropertyValue("padding-left")))-d;return{cols:Math.max(2,Math.floor(_/r.css.cell.width)),rows:Math.max(1,Math.floor(m/r.css.cell.height))}}}})(),s})())}}]);
