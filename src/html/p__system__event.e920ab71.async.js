"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5050],{80821:function(A,h,t){t.d(h,{Z:function(){return E}});var P=t(5574),l=t.n(P),g=t(93246),f=t(54006),O=t(31418),_=t(86738),y=t(14726),m=t(62435),v=t(86074);function E(n){var D=(0,m.useState)(!1),c=l()(D,2),R=c[0],r=c[1],u=O.Z.useApp(),s=(0,f.useIntl)(),e=function(){r(!0),n.action().then(function(o){if(r(!1),typeof n.onSuccess=="function"&&n.onSuccess(o),n.messageSuccess){var i="";n.messageSuccess.indexOf(".")>-1?i=s.formatMessage({id:n.messageSuccess}):i=n.messageSuccess,n.asynced?(0,g.Rk)(u,i):(0,g.$h)(u,i)}}).catch(function(o){r(!1),typeof n.onError=="function"&&n.onError(o)})};return n.confirm?(0,v.jsx)(_.Z,{style:{width:500},title:"\u63D0\u793A",description:n.confirm,onConfirm:e,okText:"Yes",cancelText:"No",children:(0,v.jsx)(y.ZP,{disabled:n.disabled,icon:n.icon,loading:R,danger:n.danger,type:n.type,children:n.children})}):(0,v.jsx)(y.ZP,{disabled:n.disabled,icon:n.icon,loading:R,onClick:e,danger:n.danger,type:n.type,children:n.children})}},85827:function(A,h,t){t.r(h),t.d(h,{default:function(){return R}});var P=t(15009),l=t.n(P),g=t(99289),f=t.n(g),O=t(80821),_=t(54006);function y(r){return m.apply(this,arguments)}function m(){return m=f()(l()().mark(function r(u){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.request)("/api/common/event/get-list",{method:"POST",data:u}));case 1:case"end":return e.stop()}},r)})),m.apply(this,arguments)}function v(r){return E.apply(this,arguments)}function E(){return E=f()(l()().mark(function r(u){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.request)("/api/common/event/prune",{method:"POST",data:u}));case 1:case"end":return e.stop()}},r)})),E.apply(this,arguments)}var n=t(12010),D=t(62435),c=t(86074);function R(){var r=(0,D.useRef)();return(0,c.jsx)(n.Z,{columns:[{title:"\u7C7B\u578B",ellipsis:!0,dataIndex:"type",width:200},{title:"\u8BE6\u60C5",search:!1,render:function(s,e,a,o){return(0,c.jsxs)(c.Fragment,{children:[e.action," ",e.message]})}},{title:"\u65F6\u95F4",ellipsis:!0,search:!1,dataIndex:"createdAt",width:200,render:function(s,e,a,o,i){return new Date(e.createdAt).toLocaleString()}}],rowKey:"id",request:function(){var u=f()(l()().mark(function s(e,a,o){var i,S,M;return l()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,y({page:(i=e.current)!==null&&i!==void 0?i:1,pageSize:(S=e.pageSize)!==null&&S!==void 0?S:10,type:e.type});case 2:return M=d.sent,d.abrupt("return",{data:M.data.list,success:!0,total:M.data.total});case 4:case"end":return d.stop()}},s)}));return function(s,e,a){return u.apply(this,arguments)}}(),pagination:{pageSize:10},actionRef:r,toolBarRender:function(){return[(0,c.jsx)(O.Z,{action:function(){return v()},onSuccess:function(){var e,a;return!((e=r.current)===null||e===void 0)&&e.reloadAndRest&&((a=r.current)===null||a===void 0||a.reloadAndRest()),!0},onError:function(){var e,a;return!((e=r.current)===null||e===void 0)&&e.reset&&((a=r.current)===null||a===void 0||a.reset()),!0},messageSuccess:"\u6E05\u9664\u6210\u529F",confirm:"\u662F\u5426\u8981\u6E05\u9664\u6389\u6240\u6709\u4E8B\u4EF6\u4FE1\u606F",danger:!0,type:"primary",children:"\u6E05\u9664\u4E8B\u4EF6\u901A\u77E5"})]}})}}}]);
