"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7861],{88484:function(G,b,e){e.d(b,{Z:function(){return $}});var p=e(87462),l=e(62435),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},c=O,F=e(84089),A=function(y,I){return l.createElement(F.Z,(0,p.Z)({},y,{ref:I,icon:c}))},t=l.forwardRef(A),$=t},86615:function(G,b,e){var p=e(1413),l=e(45987),O=e(22270),c=e(78045),F=e(62435),A=e(83607),t=e(33468),$=e(86074),S=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],y=F.forwardRef(function(v,h){var L=v.fieldProps,z=v.options,d=v.radioType,H=v.layout,T=v.proFieldProps,B=v.valueEnum,P=(0,l.Z)(v,S);return(0,$.jsx)(t.Z,(0,p.Z)((0,p.Z)({valueType:d==="button"?"radioButton":"radio",ref:h,valueEnum:(0,O.h)(B,void 0)},P),{},{fieldProps:(0,p.Z)({options:z,layout:H},L),proFieldProps:T,filedConfig:{customLightMode:!0}}))}),I=F.forwardRef(function(v,h){var L=v.fieldProps,z=v.children;return(0,$.jsx)(c.ZP,(0,p.Z)((0,p.Z)({},L),{},{ref:h,children:z}))}),j=(0,A.G)(I,{valuePropName:"checked",ignoreWidth:!0}),M=j;M.Group=y,M.Button=c.ZP.Button,M.displayName="ProFormComponent",b.Z=M},184:function(G,b,e){e.d(b,{a:function(){return g}});var p=e(4942),l=e(74165),O=e(15861),c=e(1413),F=e(97685),A=e(45987),t=e(51812),$=e(48171),S=e(73177),y=e(28459),I=e(85265),j=e(93967),M=e.n(j),v=e(72378),h=e.n(v),L=e(21770),z=e(80334),d=e(62435),H=e(61254),T=e(89671),B=e(98082),P=function(m){return(0,p.Z)({},m.componentCls,{"&-sidebar-dragger":{width:"5px",cursor:"ew-resize",padding:"4px 0 0",borderTop:"1px solid transparent",position:"absolute",top:0,left:0,bottom:0,zIndex:100,backgroundColor:"transparent","&-min-disabled":{cursor:"w-resize"},"&-max-disabled":{cursor:"e-resize"}}})};function x(s){return(0,B.Xj)("DrawerForm",function(m){var f=(0,c.Z)((0,c.Z)({},m),{},{componentCls:".".concat(s)});return[P(f)]})}var R=e(86074),D=["children","trigger","onVisibleChange","drawerProps","onFinish","submitTimeout","title","width","resize","onOpenChange","visible","open"];function g(s){var m,f,V=s.children,w=s.trigger,K=s.onVisibleChange,u=s.drawerProps,k=s.onFinish,X=s.submitTimeout,Ce=s.title,q=s.width,Z=s.resize,ee=s.onOpenChange,ne=s.visible,ce=s.open,C=(0,A.Z)(s,D);(0,z.ET)(!C.footer||!(u!=null&&u.footer),"DrawerForm \u662F\u4E00\u4E2A ProForm \u7684\u7279\u6B8A\u5E03\u5C40\uFF0C\u5982\u679C\u60F3\u81EA\u5B9A\u4E49\u6309\u94AE\uFF0C\u8BF7\u4F7F\u7528 submit.render \u81EA\u5B9A\u4E49\u3002");var a=d.useMemo(function(){var i,n,r,o={onResize:function(){},maxWidth:window.innerWidth*.8,minWidth:300};return typeof Z=="boolean"?Z?o:{}:(0,t.Y)({onResize:(i=Z==null?void 0:Z.onResize)!==null&&i!==void 0?i:o.onResize,maxWidth:(n=Z==null?void 0:Z.maxWidth)!==null&&n!==void 0?n:o.maxWidth,minWidth:(r=Z==null?void 0:Z.minWidth)!==null&&r!==void 0?r:o.minWidth})},[Z]),Y=(0,d.useContext)(y.ZP.ConfigContext),me=Y.getPrefixCls("pro-form-drawer"),ve=x(me),xe=ve.wrapSSR,fe=ve.hashId,oe=function(n){return"".concat(me,"-").concat(n," ").concat(fe)},Pe=(0,d.useState)([]),Re=(0,F.Z)(Pe,2),De=Re[1],je=(0,d.useState)(!1),pe=(0,F.Z)(je,2),ue=pe[0],ae=pe[1],Ze=(0,d.useState)(!1),he=(0,F.Z)(Ze,2),ie=he[0],le=he[1],Oe=(0,d.useState)(q||(Z?a==null?void 0:a.minWidth:800)),ge=(0,F.Z)(Oe,2),se=ge[0],re=ge[1],ye=(0,L.Z)(!!ne,{value:ce||ne,onChange:ee||K}),Ee=(0,F.Z)(ye,2),J=Ee[0],N=Ee[1],te=(0,d.useRef)(null),Me=(0,d.useCallback)(function(i){te.current===null&&i&&De([]),te.current=i},[]),Q=(0,d.useRef)(),Be=(0,d.useCallback)(function(){var i,n,r,o=(i=(n=(r=C.formRef)===null||r===void 0?void 0:r.current)!==null&&n!==void 0?n:C.form)!==null&&i!==void 0?i:Q.current;o&&u!==null&&u!==void 0&&u.destroyOnClose&&o.resetFields()},[u==null?void 0:u.destroyOnClose,C.form,C.formRef]);(0,d.useEffect)(function(){J&&(ce||ne)&&(ee==null||ee(!0),K==null||K(!0)),ie&&re(a==null?void 0:a.minWidth)},[ne,J,ie]),(0,d.useImperativeHandle)(C.formRef,function(){return Q.current},[Q.current]);var We=(0,d.useMemo)(function(){return w?d.cloneElement(w,(0,c.Z)((0,c.Z)({key:"trigger"},w.props),{},{onClick:function(){var i=(0,O.Z)((0,l.Z)().mark(function r(o){var W,E;return(0,l.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:N(!J),le(!Object.keys(a)),(W=w.props)===null||W===void 0||(E=W.onClick)===null||E===void 0||E.call(W,o);case 3:case"end":return U.stop()}},r)}));function n(r){return i.apply(this,arguments)}return n}()})):null},[N,w,J,le,ie]),be=(0,d.useMemo)(function(){var i,n,r,o;return C.submitter===!1?!1:h()({searchConfig:{submitText:(i=(n=Y.locale)===null||n===void 0||(n=n.Modal)===null||n===void 0?void 0:n.okText)!==null&&i!==void 0?i:"\u786E\u8BA4",resetText:(r=(o=Y.locale)===null||o===void 0||(o=o.Modal)===null||o===void 0?void 0:o.cancelText)!==null&&r!==void 0?r:"\u53D6\u6D88"},resetButtonProps:{preventDefault:!0,disabled:X?ue:void 0,onClick:function(E){var _;N(!1),u==null||(_=u.onClose)===null||_===void 0||_.call(u,E)}}},C.submitter)},[C.submitter,(m=Y.locale)===null||m===void 0||(m=m.Modal)===null||m===void 0?void 0:m.okText,(f=Y.locale)===null||f===void 0||(f=f.Modal)===null||f===void 0?void 0:f.cancelText,X,ue,N,u]),Ae=(0,d.useCallback)(function(i,n){return(0,R.jsxs)(R.Fragment,{children:[i,te.current&&n?(0,R.jsx)(d.Fragment,{children:(0,H.createPortal)(n,te.current)},"submitter"):n]})},[]),Te=(0,$.J)(function(){var i=(0,O.Z)((0,l.Z)().mark(function n(r){var o,W,E;return(0,l.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return o=k==null?void 0:k(r),X&&o instanceof Promise&&(ae(!0),W=setTimeout(function(){return ae(!1)},X),o.finally(function(){clearTimeout(W),ae(!1)})),U.next=4,o;case 4:return E=U.sent,E&&N(!1),U.abrupt("return",E);case 7:case"end":return U.stop()}},n)}));return function(n){return i.apply(this,arguments)}}()),Ie=(0,S.X)(J,K),de=(0,d.useCallback)(function(i){var n,r,o=(document.body.offsetWidth||1e3)-(i.clientX-document.body.offsetLeft),W=(n=a==null?void 0:a.minWidth)!==null&&n!==void 0?n:q||800,E=(r=a==null?void 0:a.maxWidth)!==null&&r!==void 0?r:window.innerWidth*.8;if(o<W){re(W);return}if(o>E){re(E);return}re(o)},[a==null?void 0:a.maxWidth,a==null?void 0:a.minWidth,q]),Fe=(0,d.useCallback)(function(){document.removeEventListener("mousemove",de),document.removeEventListener("mouseup",Fe)},[de]);return xe((0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(I.Z,(0,c.Z)((0,c.Z)((0,c.Z)({title:Ce,width:se},u),Ie),{},{afterOpenChange:function(n){var r;n||Be(),u==null||(r=u.afterOpenChange)===null||r===void 0||r.call(u,n)},onClose:function(n){var r;X&&ue||(N(!1),u==null||(r=u.onClose)===null||r===void 0||r.call(u,n))},footer:C.submitter!==!1&&(0,R.jsx)("div",{ref:Me,style:{display:"flex",justifyContent:"flex-end"}}),children:[Z?(0,R.jsx)("div",{className:M()(oe("sidebar-dragger"),fe,(0,p.Z)((0,p.Z)({},oe("sidebar-dragger-min-disabled"),se===(a==null?void 0:a.minWidth)),oe("sidebar-dragger-max-disabled"),se===(a==null?void 0:a.maxWidth))),onMouseDown:function(n){var r;a==null||(r=a.onResize)===null||r===void 0||r.call(a),n.stopPropagation(),n.preventDefault(),document.addEventListener("mousemove",de),document.addEventListener("mouseup",Fe),le(!0)}}):null,(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(T.I,(0,c.Z)((0,c.Z)({formComponentType:"DrawerForm",layout:"vertical"},C),{},{formRef:Q,onInit:function(n,r){var o;C.formRef&&(C.formRef.current=r),C==null||(o=C.onInit)===null||o===void 0||o.call(C,n,r),Q.current=r},submitter:be,onFinish:function(){var i=(0,O.Z)((0,l.Z)().mark(function n(r){var o;return(0,l.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,Te(r);case 2:return o=E.sent,E.abrupt("return",o);case 4:case"end":return E.stop()}},n)}));return function(n){return i.apply(this,arguments)}}(),contentRender:Ae,children:V}))})]})),We]}))}},71566:function(G,b,e){e.d(b,{Z:function(){return H}});var p=e(62435),l=e(93246),O=e(88484),c=e(31418),F=e(72723),A=e(14726),t=e(86074);function $(T){var B=(0,p.useRef)(null),P=c.Z.useApp(),x=function(){B.current&&(B.current.click(),B.current.onchange=function(D){if(!D||!D.target)return"";var g=new FileReader;g.onload=function(m){var f,V=(f=m.target)===null||f===void 0?void 0:f.result;if(V.indexOf("FROM ")<0){(0,l.YZ)(P,"\u5BFC\u5165Dockerfile\u6587\u4EF6\u9519\u8BEF");return}typeof T.onImport=="function"&&T.onImport(V)};var s=D.target;if(s.files)try{g.readAsText(s.files[0])}catch(m){(0,l.YZ)(P,"\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.Z.Item,{name:"importFile",label:"Dockerfile",children:(0,t.jsx)(A.ZP,{icon:(0,t.jsx)(O.Z,{}),block:!0,onClick:x,children:"\u5BFC\u5165\u672C\u5730Dockerfile\u6587\u4EF6"})}),(0,t.jsx)("input",{style:{display:"none"},type:"file",ref:B,name:"importFileInput"})]})}var S=e(20713),y=e(62370),I=e(5574),j=e.n(I),M=e(184),v=e(86615),h=e(97462),L=e(97961),z=e(34041);function d(T){var B=(0,p.useState)([]),P=j()(B,2),x=P[0],R=P[1];return(0,p.useEffect)(function(){(0,L.MF)().then(function(D){var g=Object.keys(D.data).map(function(s){return D.data[s]});R(g)})},[]),(0,t.jsx)(y.Z,{children:(0,t.jsxs)(M.a,{trigger:(0,t.jsx)(A.ZP,{block:!0,children:"\u4F7F\u7528\u6A21\u677F\u751F\u6210"}),onFinish:function(g){return new Promise(function(s,m){var f=g[g.language+"EnvVersion"].split("|"),V=j()(f,2),w=V[0],K=V[1],u="FROM ".concat(w,`
# \u5E94\u7528\u76EE\u5F55\u4F4D\u4E8E /app
# \u53EF\u901A\u7BA1\u5BB9\u5668 - \u6587\u4EF6\u7BA1\u7406, \u4E0A\u4F20\u4EE3\u7801\u81F3\u6B64\u76EE\u5F55\u5E76\u4FEE\u6539\u6743\u9650

WORKDIR /app
VOLUME [ "/app" ]
EXPOSE 80

# \u81EA\u5B9A\u4E49\u5B89\u88C5\u7EC4\u4EF6\u3001\u6269\u5C55\u6216\u662F\u5E93, \u4F8B\u5982:
# RUN apk add --no-cache --update vim
`);switch(g.language){case"php":u+=`
                
# \u7AD9\u70B9\u76EE\u5F55\u4F4D\u4E8E /app/wwwroot \u53EF\u4E0A\u4F20\u6216\u662F\u4FEE\u6539\u7AD9\u70B9\u6587\u4EF6
# nginx \u914D\u7F6E\u4F4D\u4E8E /app/nginx/ \u53EF\u4FEE\u6539\u589E\u52A0\u81EA\u5B9A\u4E49\u914D\u7F6E
# \u901A\u8FC7\u8BBF\u95EE\u5BB9\u5668\u8FD0\u884C\u6620\u5C04\u7AEF\u53E3\uFF0C\u67E5\u770B\u73AF\u5883\u53CA\u6269\u5C55\u4FE1\u606F

`,g.language=="php"&&g.phpExt&&(u+="RUN apk add --no-cache --update ",g.phpExt.map(function(k){u+="php".concat(K,"-").concat(k," ")}));break;case"golang":u+=`
# \u53EF\u4EE5\u4FEE\u6539 RUN_COMMAND \u73AF\u5883\u53D8\u91CF, \u66F4\u6539\u542F\u52A8\u6267\u884C\u547D\u4EE4
ENV RUN_COMMAND="go version"`;break;default:break}T.onFinish(u),s(!0)})},children:[(0,t.jsx)(v.Z.Group,{radioType:"button",name:"language",label:"\u7A0B\u5E8F\u8BED\u8A00",options:x.map(function(D){return{label:D.name,value:D.name}}),required:!0}),(0,t.jsx)(h.Z,{name:["language"],children:function(g){var s=g.language;return s?(0,t.jsx)(t.Fragment,{children:x.map(function(m){if(m.name==s)return(0,t.jsxs)("div",{children:[(0,t.jsx)(y.Z,{name:"".concat(m.name,"EnvVersion"),label:"\u73AF\u5883\u7248\u672C",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7A0B\u5E8F\u8FD0\u884C\u7684\u73AF\u5883"}],children:(0,t.jsx)(z.Z,{options:m.env.map(function(f){return{label:f.name,value:f.baseImage}}),placeholder:"\u8BF7\u9009\u62E9\u5177\u4F53\u7684\u73AF\u5883\u7248\u672C"},"".concat(m.name,"Select"))},m.name),m.name=="php"&&(0,t.jsx)(y.Z,{label:"php\u6269\u5C55",name:"phpExt",children:(0,t.jsx)(z.Z,{options:m.ext.map(function(f){return{label:f,value:f}}),mode:"multiple",placeholder:"\u8BF7\u9009\u62E9\u8981\u5B89\u88C5\u7684php\u6269\u5C55"},"phpExtSelect")},"phpExt")]},"envSelect")})}):(0,t.jsx)(t.Fragment,{})}})]})})}function H(T){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)($,{onImport:function(P){var x;return(x=T.createFormRef.current)===null||x===void 0||x.setFieldValue("buildDockerfile",P),!0}}),(0,t.jsx)(d,{onFinish:function(P){var x;(x=T.createFormRef.current)===null||x===void 0||x.setFieldValue("buildDockerfile",P)}}),(0,t.jsx)(y.Z,{shouldUpdate:!0,children:function(P){var x=P.getFieldValue;return(0,t.jsx)(y.Z,{name:"buildDockerfile",children:(0,t.jsx)(S.ZP,{value:x("buildDockerfile"),onChange:function(D){var g;(g=T.createFormRef.current)===null||g===void 0||g.setFieldValue("buildDockerfile",D)},height:"1000px",theme:"light",style:{marginBottom:"20px"}})})}})]})}},70345:function(G,b,e){e.r(b),e.d(b,{default:function(){return A}});var p=e(71566),l=e(86074);function O(){return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(p.Z,{showImportButton:!0,defaultShow:!0})})}var c=e(38345),F=e(62435);function A(){return(0,l.jsx)("div",{children:(0,l.jsx)(c.Z,{children:(0,l.jsx)(O,{})})})}},97961:function(G,b,e){e.d(b,{MF:function(){return y},_2:function(){return $},fN:function(){return A}});var p=e(15009),l=e.n(p),O=e(99289),c=e.n(O),F=e(54006);function A(j){return t.apply(this,arguments)}function t(){return t=c()(l()().mark(function j(M){return l()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,F.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:M}));case 1:case"end":return h.stop()}},j)})),t.apply(this,arguments)}function $(j){return S.apply(this,arguments)}function S(){return S=c()(l()().mark(function j(M){return l()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,F.request)("/api/common/attach/delete",{method:"POST",data:M});case 2:return h.abrupt("return",h.sent);case 3:case"end":return h.stop()}},j)})),S.apply(this,arguments)}function y(){return I.apply(this,arguments)}function I(){return I=c()(l()().mark(function j(){return l()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,F.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return v.stop()}},j)})),I.apply(this,arguments)}}}]);
