"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[536],{2830:function(y,O,e){e.d(O,{Z:function(){return h}});var T=e(87462),i=e(62435),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M876.6 239.5c-.5-.9-1.2-1.8-2-2.5-5-5-13.1-5-18.1 0L684.2 409.3l-67.9-67.9L788.7 169c.8-.8 1.4-1.6 2-2.5 3.6-6.1 1.6-13.9-4.5-17.5-98.2-58-226.8-44.7-311.3 39.7-67 67-89.2 162-66.5 247.4l-293 293c-3 3-2.8 7.9.3 11l169.7 169.7c3.1 3.1 8.1 3.3 11 .3l292.9-292.9c85.5 22.8 180.5.7 247.6-66.4 84.4-84.5 97.7-213.1 39.7-311.3zM786 499.8c-58.1 58.1-145.3 69.3-214.6 33.6l-8.8 8.8-.1-.1-274 274.1-79.2-79.2 230.1-230.1s0 .1.1.1l52.8-52.8c-35.7-69.3-24.5-156.5 33.6-214.6a184.2 184.2 0 01144-53.5L537 318.9a32.05 32.05 0 000 45.3l124.5 124.5a32.05 32.05 0 0045.3 0l132.8-132.8c3.7 51.8-14.4 104.8-53.6 143.9z"}}]},name:"tool",theme:"outlined"},o=D,c=e(84089),v=function(m,P){return i.createElement(c.Z,(0,T.Z)({},m,{ref:P,icon:o}))},f=i.forwardRef(v),h=f},80821:function(y,O,e){e.d(O,{Z:function(){return P}});var T=e(5574),i=e.n(T),D=e(93246),o=e(54006),c=e(31418),v=e(86738),f=e(14726),h=e(83062),d=e(62435),m=e(86074);function P(t){var M=(0,d.useState)(!1),u=i()(M,2),_=u[0],A=u[1],R=c.Z.useApp(),L=(0,o.useIntl)(),I=function(){A(!0),t.action().then(function(j){if(A(!1),typeof t.onSuccess=="function"&&t.onSuccess(j),t.messageSuccess){var r="";t.messageSuccess.indexOf(".")>-1?r=L.formatMessage({id:t.messageSuccess}):r=t.messageSuccess,t.asynced?(0,D.Rk)(R,r):(0,D.$h)(R,r)}}).catch(function(j){A(!1),typeof t.onError=="function"&&t.onError(j)})};return t.confirm?(0,m.jsx)(v.Z,{style:{width:500},title:"\u63D0\u793A",description:t.confirm,onConfirm:I,okText:"Yes",cancelText:"No",children:(0,m.jsx)(f.ZP,{disabled:t.disabled,icon:t.icon,loading:_,danger:t.danger,type:t.type,children:t.children})}):(0,m.jsx)(h.Z,{title:t.tips,children:(0,m.jsx)(f.ZP,{disabled:t.disabled,icon:t.icon,loading:_,onClick:I,danger:t.danger,type:t.type,children:t.children})})}},94359:function(y,O,e){e.d(O,{Z:function(){return M}});var T=e(62435),i=e(3089),D=e(98165),o=e(18429),c=e(8751),v=e(14313),f=e(30159),h=e(87740),d=e(66309),m=e(83062),P=e(54006),t=e(86074);function M(u){var _=(0,t.jsx)(t.Fragment,{});return u.status=="0"&&(_=(0,t.jsx)(d.Z,{icon:(0,t.jsx)(i.Z,{}),color:"default",children:"waiting"})),u.status=="10"&&(_=(0,t.jsx)(d.Z,{icon:(0,t.jsx)(D.Z,{spin:!0}),color:"processing",children:"processing"})),u.status=="20"&&(_=(0,t.jsx)(d.Z,{icon:(0,t.jsx)(o.Z,{}),color:"error",children:"error"})),u.status=="30"&&(_=(0,t.jsx)(d.Z,{icon:(0,t.jsx)(c.Z,{}),color:"success",children:"success"})),u.status=="running"&&(_=(0,t.jsx)(d.Z,{icon:(0,t.jsx)(v.Z,{}),color:"success",children:u.status})),u.status=="paused"&&(_=(0,t.jsx)(d.Z,{icon:(0,t.jsx)(f.Z,{}),children:u.status})),u.status=="restarting"&&(_=(0,t.jsx)(d.Z,{icon:(0,t.jsx)(h.Z,{}),children:u.status})),(u.status=="exited"||u.status=="dead"||u.status=="removing")&&(_=(0,t.jsx)(d.Z,{icon:(0,t.jsx)(o.Z,{}),color:"warning",children:u.status})),u.link&&(_=(0,t.jsx)(P.Link,{to:u.link,children:_})),u.message&&(_=(0,t.jsx)(m.Z,{placement:"left",title:u.message,children:_})),(0,t.jsx)(t.Fragment,{children:_})}},13961:function(y,O,e){e.r(O),e.d(O,{default:function(){return B}});var T=e(15009),i=e.n(T),D=e(99289),o=e.n(D),c=e(37476),v=e(6110),f=e(12010),h=e(78957),d=e(83062),m=e(66309),P=e(96074),t=e(14726),M=e(68508),u=e(54006),_=e(18148),A=e(94359),R=e(20713),L=e(45742),I=e(2830),U=e(80821),j=e(62435),r=e(86074);function B(){var W=[{title:"\u540D\u79F0",render:function(l,a,n,g){return(0,r.jsx)(h.Z,{direction:"vertical",style:{textAlign:"left"},children:a.imageInfo&&(0,r.jsx)(u.Link,{to:"/image/detail/".concat(a.imageInfo.info.Id),children:(0,r.jsxs)(d.Z,{title:"\u67E5\u770B\u955C\u50CF",children:[" ",a.tag]})},"detail")},a.id)}},{title:"\u6700\u65B0Tag",dataIndex:"tag",search:!1,render:function(l,a,n,g){return a.imageInfo?a.imageInfo.info.Id==""?(0,r.jsx)(m.Z,{children:"none"},"none"):(0,r.jsx)(h.Z,{direction:"vertical",style:{textAlign:"left"},children:a.imageInfo.info.RepoTags.map(function(E,x){return(0,r.jsx)(m.Z,{color:"#2db7f5",children:E},x)})},a.id):(0,r.jsx)(r.Fragment,{})}},{title:"\u955C\u50CFId",ellipsis:!0,search:!1,copyable:!0,dataIndex:["imageInfo","info","Id"],width:200},{title:"\u6784\u5EFA\u72B6\u6001",width:"100px",ellipsis:!0,search:!1,render:function(l,a,n,g){return[(0,r.jsx)("div",{children:(0,r.jsx)(A.Z,{status:a.status},a.id)},a.id)]}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:200,render:function(l,a,n,g){return(0,r.jsxs)(h.Z,{split:(0,r.jsx)(P.Z,{type:"vertical"}),children:[(0,r.jsx)(c.Y,{title:"\u6784\u5EFA\u65E5\u5FD7",submitter:!1,trigger:(0,r.jsx)(t.ZP,{size:"small",type:"link",children:(0,r.jsx)(d.Z,{title:"\u6784\u5EFA\u65E5\u5FD7",children:(0,r.jsx)(L.Z,{})})},a.id),children:(0,r.jsx)(R.ZP,{theme:"dark",height:"500px",value:a.message})},"log"),(0,r.jsx)(u.Link,{to:"/image/create?id="+a.id,type:"link",children:(0,r.jsx)(d.Z,{title:"\u518D\u6B21\u6784\u5EFA",children:(0,r.jsx)(I.Z,{})})},"rebuild")]})}}],p=(0,j.useRef)();return(0,r.jsx)(v._z,{header:{extra:[(0,r.jsx)(t.ZP,{type:"primary",children:(0,r.jsx)(u.Link,{to:"/image/create",children:"\u521B\u5EFA\u955C\u50CF"})},"create"),(0,r.jsx)(t.ZP,{children:"\u62C9\u53D6\u955C\u50CF"},"pull")]},children:(0,r.jsx)(f.Z,{actionRef:p,rowKey:"id",columns:W,request:function(){var s=o()(i()().mark(function l(a,n,g){var E,x,K;return i()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,_.Xn)({page:(E=a.current)!==null&&E!==void 0?E:1,pageSize:(x=a.pageSize)!==null&&x!==void 0?x:10});case 2:return K=C.sent,C.abrupt("return",{data:K.data.list,success:!0,total:K.data.total});case 4:case"end":return C.stop()}},l)}));return function(l,a,n){return s.apply(this,arguments)}}(),pagination:{pageSize:10},search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(l){var a=l.selectedRowKeys;return(0,r.jsx)(h.Z,{size:16,children:(0,r.jsx)(U.Z,{danger:!0,type:"primary",action:function(){return(0,_.$q)({id:a})},onSuccess:function(){var g,E;return!((g=p.current)===null||g===void 0)&&g.reloadAndRest&&((E=p.current)===null||E===void 0||E.reloadAndRest()),!0},onError:function(){var g,E;return!((g=p.current)===null||g===void 0)&&g.reset&&((E=p.current)===null||E===void 0||E.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})},tableExtraRender:function(){return(0,r.jsx)(M.Z,{mode:"horizontal",selectedKeys:["build"],items:[{label:(0,r.jsx)(u.Link,{to:"/image/list/all",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,r.jsx)(u.Link,{to:"/image/list/build",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})}})})}},18148:function(y,O,e){e.d(O,{$q:function(){return u},Fj:function(){return r},KG:function(){return v},KX:function(){return W},T8:function(){return t},Xn:function(){return m},ao:function(){return A},c5:function(){return U},c7:function(){return L}});var T=e(15009),i=e.n(T),D=e(99289),o=e.n(D),c=e(54006);function v(s){return f.apply(this,arguments)}function f(){return f=o()(i()().mark(function s(l){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.request)("/api/app/image/get-list",{method:"POST",data:l}));case 1:case"end":return n.stop()}},s)})),f.apply(this,arguments)}function h(s){return d.apply(this,arguments)}function d(){return d=_asyncToGenerator(_regeneratorRuntime().mark(function s(l){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,request("/api/app/log/image-build",{method:"POST",data:l});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},s)})),d.apply(this,arguments)}function m(s){return P.apply(this,arguments)}function P(){return P=o()(i()().mark(function s(l){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.request)("/api/app/image/get-list-build",{method:"POST",data:l}));case 1:case"end":return n.stop()}},s)})),P.apply(this,arguments)}function t(s){return M.apply(this,arguments)}function M(){return M=o()(i()().mark(function s(l){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.request)("/api/app/image/get-build-task",{method:"POST",data:l});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},s)})),M.apply(this,arguments)}function u(s){return _.apply(this,arguments)}function _(){return _=o()(i()().mark(function s(l){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.request)("/api/app/image/delete-build-task",{method:"POST",data:l});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},s)})),_.apply(this,arguments)}function A(s){return R.apply(this,arguments)}function R(){return R=o()(i()().mark(function s(l){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.request)("/api/app/image/image-delete",{method:"POST",data:l});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},s)})),R.apply(this,arguments)}function L(){return I.apply(this,arguments)}function I(){return I=o()(i()().mark(function s(){return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,c.request)("/api/app/image/image-prune",{method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},s)})),I.apply(this,arguments)}function U(){return j.apply(this,arguments)}function j(){return j=o()(i()().mark(function s(){return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,c.request)("/api/app/image/build-prune",{method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},s)})),j.apply(this,arguments)}function r(s){return B.apply(this,arguments)}function B(){return B=o()(i()().mark(function s(l){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.request)("/api/app/image/update-title",{method:"POST",data:l});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},s)})),B.apply(this,arguments)}function W(s){return p.apply(this,arguments)}function p(){return p=o()(i()().mark(function s(l){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.request)("/api/app/image/tag-sync",{method:"POST",data:l}));case 1:case"end":return n.stop()}},s)})),p.apply(this,arguments)}}}]);
