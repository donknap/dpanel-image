"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5050],{80821:function(A,f,n){n.d(f,{Z:function(){return D}});var v=n(5574),l=n.n(v),h=n(93246),E=n(54006),O=n(31418),_=n(86738),P=n(14726),g=n(83062),R=n(62435),c=n(86074);function D(t){var M=(0,R.useState)(!1),o=l()(M,2),y=o[0],r=o[1],i=O.Z.useApp(),s=(0,E.useIntl)(),e=function(){r(!0),t.action().then(function(d){if(r(!1),typeof t.onSuccess=="function"&&t.onSuccess(d),t.messageSuccess){var u="";typeof t.messageSuccess=="function"?u=t.messageSuccess(d):u=t.messageSuccess,u.indexOf(".")>-1&&(u=s.formatMessage({id:u})),t.asynced?(0,h.Rk)(i,u):(0,h.$h)(i,u)}}).catch(function(d){r(!1),typeof t.onError=="function"&&t.onError(d)})};return t.confirm?(0,c.jsx)(_.Z,{style:{width:500},title:"\u63D0\u793A",description:t.confirm,onConfirm:e,okText:"Yes",cancelText:"No",children:(0,c.jsx)(P.ZP,{disabled:t.disabled,icon:t.icon,loading:y,danger:t.danger,type:t.type,children:t.children})}):(0,c.jsx)(g.Z,{title:t.tips,children:(0,c.jsx)(P.ZP,{disabled:t.disabled,icon:t.icon,loading:y,onClick:e,danger:t.danger,type:t.type,children:t.children})})}},85827:function(A,f,n){n.r(f),n.d(f,{default:function(){return y}});var v=n(15009),l=n.n(v),h=n(99289),E=n.n(h),O=n(80821),_=n(54006);function P(r){return g.apply(this,arguments)}function g(){return g=E()(l()().mark(function r(i){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.request)("/api/common/event/get-list",{method:"POST",data:i}));case 1:case"end":return e.stop()}},r)})),g.apply(this,arguments)}function R(r){return c.apply(this,arguments)}function c(){return c=E()(l()().mark(function r(i){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.request)("/api/common/event/prune",{method:"POST",data:i}));case 1:case"end":return e.stop()}},r)})),c.apply(this,arguments)}var D=n(6409),t=n(90639),M=n(62435),o=n(86074);function y(){var r=(0,M.useRef)();return(0,o.jsx)(t.Z,{columns:[{title:"\u7C7B\u578B",ellipsis:!0,dataIndex:"type",width:200},{title:"\u8BE6\u60C5",search:!1,render:function(s,e,a,d){return(0,o.jsxs)(o.Fragment,{children:[e.action," ",e.message]})}},{title:"\u65F6\u95F4",ellipsis:!0,search:!1,dataIndex:"createdAt",width:200,render:function(s,e,a,d,u){return new Date(e.createdAt).toLocaleString()}}],rowKey:"id",request:function(){var i=E()(l()().mark(function s(e,a,d){var u,S,T;return l()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,P({page:(u=e.current)!==null&&u!==void 0?u:1,pageSize:(S=e.pageSize)!==null&&S!==void 0?S:10,type:e.type});case 2:return T=m.sent,m.abrupt("return",{data:T.data.list,success:!0,total:T.data.total});case 4:case"end":return m.stop()}},s)}));return function(s,e,a){return i.apply(this,arguments)}}(),pagination:(0,D.O)(),actionRef:r,toolBarRender:function(){return[(0,o.jsx)(O.Z,{action:function(){return R()},onSuccess:function(){var e,a;return!((e=r.current)===null||e===void 0)&&e.reloadAndRest&&((a=r.current)===null||a===void 0||a.reloadAndRest()),!0},onError:function(){var e,a;return!((e=r.current)===null||e===void 0)&&e.reset&&((a=r.current)===null||a===void 0||a.reset()),!0},messageSuccess:"\u6E05\u9664\u6210\u529F",confirm:"\u662F\u5426\u8981\u6E05\u9664\u6389\u6240\u6709\u4E8B\u4EF6\u4FE1\u606F",danger:!0,type:"primary",children:"\u6E05\u9664\u4E8B\u4EF6\u901A\u77E5"})]}})}},6409:function(A,f,n){n.d(f,{O:function(){return v}});function v(){return{showSizeChanger:!0,defaultPageSize:20}}}}]);
