"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4214],{95556:function(ae,L,r){var _=r(87462),i=r(62435),W=r(3803),M=r(84089),j=function(U,b){return i.createElement(M.Z,(0,_.Z)({},U,{ref:b,icon:W.Z}))},I=i.forwardRef(j);L.Z=I},5966:function(ae,L,r){var _=r(97685),i=r(1413),W=r(45987),M=r(21770),j=r(72723),I=r(55241),A=r(97435),U=r(62435),b=r(33468),p=r(86074),Z=["fieldProps","proFieldProps"],z=["fieldProps","proFieldProps"],E="text",g=function(f){var u=f.fieldProps,N=f.proFieldProps,y=(0,W.Z)(f,Z);return(0,p.jsx)(b.Z,(0,i.Z)({valueType:E,fieldProps:u,filedConfig:{valueType:E},proFieldProps:N},y))},C=function(f){var u=(0,M.Z)(f.open||!1,{value:f.open,onChange:f.onOpenChange}),N=(0,_.Z)(u,2),y=N[0],B=N[1];return(0,p.jsx)(j.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(H){var F,k=H.getFieldValue(f.name||[]);return(0,p.jsx)(I.Z,(0,i.Z)((0,i.Z)({getPopupContainer:function(T){return T&&T.parentNode?T.parentNode:T},onOpenChange:B,content:(0,p.jsxs)("div",{style:{padding:"4px 0"},children:[(F=f.statusRender)===null||F===void 0?void 0:F.call(f,k),f.strengthText?(0,p.jsx)("div",{style:{marginTop:10},children:(0,p.jsx)("span",{children:f.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},f.popoverProps),{},{open:y,children:f.children}))}})},O=function(f){var u=f.fieldProps,N=f.proFieldProps,y=(0,W.Z)(f,z),B=(0,U.useState)(!1),K=(0,_.Z)(B,2),H=K[0],F=K[1];return u!=null&&u.statusRender&&y.name?(0,p.jsx)(C,{name:y.name,statusRender:u==null?void 0:u.statusRender,popoverProps:u==null?void 0:u.popoverProps,strengthText:u==null?void 0:u.strengthText,open:H,onOpenChange:F,children:(0,p.jsx)("div",{children:(0,p.jsx)(b.Z,(0,i.Z)({valueType:"password",fieldProps:(0,i.Z)((0,i.Z)({},(0,A.Z)(u,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(J){var T;u==null||(T=u.onBlur)===null||T===void 0||T.call(u,J),F(!1)},onClick:function(J){var T;u==null||(T=u.onClick)===null||T===void 0||T.call(u,J),F(!0)}}),proFieldProps:N,filedConfig:{valueType:E}},y))})}):(0,p.jsx)(b.Z,(0,i.Z)({valueType:"password",fieldProps:u,proFieldProps:N,filedConfig:{valueType:E}},y))},l=g;l.Password=O,l.displayName="ProFormComponent",L.Z=l},96042:function(ae,L,r){r.d(L,{Z:function(){return b}});var _=r(97857),i=r.n(_),W=r(5574),M=r.n(W),j=r(75870),I=r(34041),A=r(62435),U=r(86074);function b(p){var Z=(0,A.useState)([]),z=M()(Z,2),E=z[0],g=z[1];(0,A.useEffect)(function(){(0,j.Ot)().then(function(O){O&&g(O.data.list)})},[]);var C={};return p.multiple&&(C.mode="multiple"),p.top&&(C.placement="topLeft"),(0,U.jsx)(I.Z,i()({onChange:function(l){if(p.multiple){var Y=l.map(function(f){return E[f]});p.onChangeList&&p.onChangeList(Y)}else p.onChange&&p.onChange(E[l])},placeholder:"\u9009\u62E9\u955C\u50CF\u4ED3\u5E93\uFF0C\u672C\u5730\u4F7F\u7528\u7559\u7A7A\u5373\u53EF",options:E.map(function(O,l){return{value:l,label:O.title+"("+O.serverAddress+")"}})},C))}},88583:function(ae,L,r){r.r(L),r.d(L,{default:function(){return v}});var _=r(15009),i=r.n(_),W=r(99289),M=r.n(W),j=r(5574),I=r.n(j),A=r(6110),U=r(12010),b=r(37476),p=r(62370),Z=r(31418),z=r(14726),E=r(75891),g=r(78957),C=r(66309),O=r(96074),l=r(83062),Y=r(84567),f=r(72723),u=r(69677),N=r(68508),y=r(62435),B=r(54006),K=r(18148),H=r(5251),F=r(80821),k=r(43425),J=r(95556),T=r(93246),de=r(28307),e=r(96042),t=r(86074);function v(){var a=(0,B.useParams)(),n=(0,y.useRef)(),$=(0,y.useState)({force:!1}),D=I()($,2),X=D[0],V=D[1],q=(0,y.useState)([]),S=I()(q,2),se=S[0],w=S[1],Q=Z.Z.useApp(),le=(0,y.useState)(1),te=I()(le,2),x=te[0],ie=te[1],ue=(0,y.useRef)();return(0,y.useEffect)(function(){var h;(h=n.current)===null||h===void 0||h.reload(),(0,K.Xn)({page:1,pageSize:9999,all:!0}).then(function(d){return w(d.data.list),!0})},[a,x]),(0,t.jsx)(A._z,{header:{extra:[(0,t.jsx)(z.ZP,{type:"primary",children:(0,t.jsx)(B.Link,{to:"/image/create",children:"\u6784\u5EFA\u955C\u50CF"})},"create"),(0,t.jsx)(de.Z,{onFinish:function(){var d,o;!((d=n.current)===null||d===void 0)&&d.reloadAndRest&&((o=n.current)===null||o===void 0||o.reloadAndRest())}},"remote")]},children:(0,t.jsx)(U.Z,{rowKey:"Id",columns:[{title:"Id",ellipsis:!0,search:!1,dataIndex:"Id",width:200,render:function(d,o,m,s,c){return(0,t.jsx)(B.Link,{to:"/image/detail/"+o.Id,children:o.Id},"edit")}},{title:"\u540D\u79F0",dataIndex:"title",width:200,render:function(d,o,m,s,c){var R="";return se.map(function(P){o.RepoTags.map(function(ee){ee==P.tag&&(R=P.title)})}),(0,t.jsx)(E.Z.Text,{editable:{tooltip:"\u4FEE\u6539\u955C\u50CF\u5907\u6CE8\u540D\u79F0",onChange:function(){var P=M()(i()().mark(function ne(G){var ce;return i()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,(0,K.Fj)({tag:o.RepoTags[0],title:G});case 2:ce=re.sent,ie(x+1),(0,T.$h)(Q,"\u4FEE\u6539\u955C\u50CF\u540D\u79F0\u6210\u529F");case 5:case"end":return re.stop()}},ne)}));function ee(ne){return P.apply(this,arguments)}return ee}()},children:R||"---"})}},{title:"Tag",dataIndex:"tag",render:function(d,o,m,s){return(0,t.jsx)(g.Z,{direction:"vertical",style:{textAlign:"left"},children:o.RepoTags.map(function(c,R){return(0,t.jsx)(C.Z,{color:"#2db7f5",children:(0,t.jsx)(E.Z.Text,{copyable:!0,style:{color:"#ffffff"},children:c},R)},R)})},o.Id)}},{title:"\u5C3A\u5BF8",dataIndex:"size",ellipsis:!0,width:"120px",search:!1,sorter:function(d,o){return d.Size-o.Size},render:function(d,o,m,s){return(0,t.jsx)("div",{children:(0,H.FI)(parseFloat(o.Size))},o.Id)}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(d,o,m,s){return(0,t.jsx)("div",{children:(0,H.ZM)(o.Created*1e3)},o.Id)},sorter:function(d,o){return d.Created-o.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:"150px",render:function(d,o,m,s){return(0,t.jsxs)(g.Z,{split:(0,t.jsx)(O.Z,{type:"vertical"}),children:[(0,t.jsx)(B.Link,{to:"/image/detail/"+o.Id,children:(0,t.jsx)(l.Z,{title:"\u7BA1\u7406",children:(0,t.jsx)(k.Z,{})})},"edit"),(0,t.jsx)(B.Link,{to:"/app/create/image?imageId="+o.Id,children:(0,t.jsx)(l.Z,{title:"\u521B\u5EFA\u5BB9\u5668",children:(0,t.jsx)(J.Z,{})})},"create")]})}}],request:function(){var h=M()(i()().mark(function d(o,m,s){var c;return i()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,K.KG)({tag:o.tag,title:o.title});case 2:if(c=P.sent,!(!c||!c.data||!c.data.list)){P.next=5;break}return P.abrupt("return",{data:[],success:!0,total:0});case 5:return P.abrupt("return",{data:c.data.list,success:!0,total:c.data.list.length});case 6:case"end":return P.stop()}},d)}));return function(d,o,m){return h.apply(this,arguments)}}(),pagination:{pageSize:10},search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:n,tableAlertOptionRender:function(d){var o=d.selectedRowKeys;return(0,t.jsxs)(g.Z,{size:16,children:[(0,t.jsx)(F.Z,{danger:!0,type:"primary",action:function(){return(0,K.ao)({md5:o,force:X.force})},onSuccess:function(){var s,c;return!((s=n.current)===null||s===void 0)&&s.reloadAndRest&&((c=n.current)===null||c===void 0||c.reloadAndRest()),!0},onError:function(){var s,c;return!((s=n.current)===null||s===void 0)&&s.reset&&((c=n.current)===null||c===void 0||c.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",confirm:(0,t.jsxs)(g.Z,{style:{width:280},direction:"vertical",children:[(0,t.jsx)(E.Z.Text,{children:"\u5220\u9664\u955C\u50CF\u540E\u65E0\u6CD5\u6062\u590D,\u786E\u8BA4\u5417\uFF1F"}),(0,t.jsx)(Y.Z,{name:"deleteVolume",onChange:function(s){return V({force:s.target.checked})},children:"\u5F3A\u5236\u5220\u9664\uFF1F"})]}),children:"\u6279\u91CF\u5220\u9664"}),(0,t.jsxs)(b.Y,{formRef:ue,title:"\u6279\u91CF\u63A8\u9001\u955C\u50CF",trigger:(0,t.jsx)(z.ZP,{children:"\u6279\u91CF\u63A8\u9001"}),onFinish:function(){var m=M()(i()().mark(function s(c){var R,P,ee;return i()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,(0,K.KX)({tag:o,registryId:c.registryId});case 2:return ee=G.sent,(R=n.current)===null||R===void 0||R.reload(),!((P=n.current)===null||P===void 0)&&P.clearSelected&&n.current.clearSelected(),G.abrupt("return",!0);case 6:case"end":return G.stop()}},s)}));return function(s){return m.apply(this,arguments)}}(),children:[(0,t.jsx)(f.Z.List,{name:"registryId",children:function(s){return s.map(function(c,R){return console.log(c),(0,t.jsx)(u.Z,{hidden:!0},R)})}}),(0,t.jsx)(p.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,t.jsxs)(t.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,t.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,t.jsx)(e.Z,{multiple:!0,top:!0,onChangeList:function(s){var c;(c=ue.current)===null||c===void 0||c.setFieldValue("registryId",s.map(function(R){return R.id}))}})})]})]})},tableExtraRender:function(){var d;return(0,t.jsx)(N.Z,{mode:"horizontal",selectedKeys:[(d=a.type)!==null&&d!==void 0?d:"all"],items:[{label:(0,t.jsx)(B.Link,{to:"/image/list/all",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,t.jsx)(B.Link,{to:"/image/list/build",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})},toolBarRender:function(){return[(0,t.jsx)(F.Z,{action:function(){return(0,K.c7)()},onSuccess:function(){var o,m;return!((o=n.current)===null||o===void 0)&&o.reloadAndRest&&((m=n.current)===null||m===void 0||m.reloadAndRest()),!0},onError:function(){var o,m;return!((o=n.current)===null||o===void 0)&&o.reset&&((m=n.current)===null||m===void 0||m.reset()),!0},messageSuccess:"\u6E05\u9664\u6210\u529F",confirm:"\u662F\u5426\u6E05\u7406\u672A\u4F7F\u7528\u6216\u662F\u672A\u8FD0\u884C\u7684\u955C\u50CF",children:"\u6E05\u7406\u672A\u4F7F\u7528\u955C\u50CF"})]}})})}},75870:function(ae,L,r){r.d(L,{Ot:function(){return I},ZH:function(){return U},ix:function(){return p},t1:function(){return z}});var _=r(15009),i=r.n(_),W=r(99289),M=r.n(W),j=r(54006);function I(g){return A.apply(this,arguments)}function A(){return A=M()(i()().mark(function g(C){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,j.request)("/api/common/registry/get-list",{method:"POST",data:C}));case 1:case"end":return l.stop()}},g)})),A.apply(this,arguments)}function U(g){return b.apply(this,arguments)}function b(){return b=M()(i()().mark(function g(C){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,j.request)("/api/common/registry/create",{method:"POST",data:C}));case 1:case"end":return l.stop()}},g)})),b.apply(this,arguments)}function p(g){return Z.apply(this,arguments)}function Z(){return Z=M()(i()().mark(function g(C){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,j.request)("/api/common/registry/delete",{method:"POST",data:C}));case 1:case"end":return l.stop()}},g)})),Z.apply(this,arguments)}function z(g){return E.apply(this,arguments)}function E(){return E=M()(i()().mark(function g(C){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,j.request)("/api/common/registry/get-detail",{method:"POST",data:C}));case 1:case"end":return l.stop()}},g)})),E.apply(this,arguments)}},66309:function(ae,L,r){r.d(L,{Z:function(){return de}});var _=r(62435),i=r(97937),W=r(93967),M=r.n(W),j=r(98787),I=r(69760),A=r(45353),U=r(53124),b=r(54548),p=r(10274),Z=r(14747),z=r(45503),E=r(91945);const g=e=>{const{paddingXXS:t,lineWidth:v,tagPaddingHorizontal:a,componentCls:n,calc:$}=e,D=$(a).sub(v).equal(),X=$(t).sub(v).equal();return{[n]:Object.assign(Object.assign({},(0,Z.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:D,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,b.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${n}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${n}-close-icon`]:{marginInlineStart:X,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${n}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},["&-checkable"]:{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${n}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},["&-hidden"]:{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:D}}),[`${n}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},C=e=>{const{lineWidth:t,fontSizeIcon:v,calc:a}=e,n=e.fontSizeSM;return(0,z.TS)(e,{tagFontSize:n,tagLineHeight:(0,b.bf)(a(e.lineHeightSM).mul(n).equal()),tagIconSize:a(v).sub(a(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},O=e=>({defaultBg:new p.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var l=(0,E.I$)("Tag",e=>{const t=C(e);return g(t)},O),Y=function(e,t){var v={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(v[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(v[a[n]]=e[a[n]]);return v},u=_.forwardRef((e,t)=>{const{prefixCls:v,style:a,className:n,checked:$,onChange:D,onClick:X}=e,V=Y(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:q,tag:S}=_.useContext(U.E_),se=ie=>{D==null||D(!$),X==null||X(ie)},w=q("tag",v),[Q,le,te]=l(w),x=M()(w,`${w}-checkable`,{[`${w}-checkable-checked`]:$},S==null?void 0:S.className,n,le,te);return Q(_.createElement("span",Object.assign({},V,{ref:t,style:Object.assign(Object.assign({},a),S==null?void 0:S.style),className:x,onClick:se})))}),N=r(98719);const y=e=>(0,N.Z)(e,(t,v)=>{let{textColor:a,lightBorderColor:n,lightColor:$,darkColor:D}=v;return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:a,background:$,borderColor:n,"&-inverse":{color:e.colorTextLightSolid,background:D,borderColor:D},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var B=(0,E.bk)(["Tag","preset"],e=>{const t=C(e);return y(t)},O);function K(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const H=(e,t,v)=>{const a=K(v);return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:e[`color${v}`],background:e[`color${a}Bg`],borderColor:e[`color${a}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var F=(0,E.bk)(["Tag","status"],e=>{const t=C(e);return[H(t,"success","Success"),H(t,"processing","Info"),H(t,"error","Error"),H(t,"warning","Warning")]},O),k=function(e,t){var v={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(v[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(v[a[n]]=e[a[n]]);return v};const J=(e,t)=>{const{prefixCls:v,className:a,rootClassName:n,style:$,children:D,icon:X,color:V,onClose:q,closeIcon:S,closable:se,bordered:w=!0}=e,Q=k(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable","bordered"]),{getPrefixCls:le,direction:te,tag:x}=_.useContext(U.E_),[ie,ue]=_.useState(!0);_.useEffect(()=>{"visible"in Q&&ue(Q.visible)},[Q.visible]);const h=(0,j.o2)(V),d=(0,j.yT)(V),o=h||d,m=Object.assign(Object.assign({backgroundColor:V&&!o?V:void 0},x==null?void 0:x.style),$),s=le("tag",v),[c,R,P]=l(s),ee=M()(s,x==null?void 0:x.className,{[`${s}-${V}`]:o,[`${s}-has-color`]:V&&!o,[`${s}-hidden`]:!ie,[`${s}-rtl`]:te==="rtl",[`${s}-borderless`]:!w},a,n,R,P),ne=oe=>{oe.stopPropagation(),q==null||q(oe),!oe.defaultPrevented&&ue(!1)},[,G]=(0,I.Z)({closable:se,closeIcon:S!=null?S:x==null?void 0:x.closeIcon,customCloseIconRender:oe=>oe===null?_.createElement(i.Z,{className:`${s}-close-icon`,onClick:ne}):_.createElement("span",{className:`${s}-close-icon`,onClick:ne},oe),defaultCloseIcon:null,defaultClosable:!1}),ce=typeof Q.onClick=="function"||D&&D.type==="a",_e=X||null,re=_e?_.createElement(_.Fragment,null,_e,D&&_.createElement("span",null,D)):D,me=_.createElement("span",Object.assign({},Q,{ref:t,className:ee,style:m}),re,G,h&&_.createElement(B,{key:"preset",prefixCls:s}),d&&_.createElement(F,{key:"status",prefixCls:s}));return c(ce?_.createElement(A.Z,{component:"Tag"},me):me)},T=_.forwardRef(J);T.CheckableTag=u;var de=T}}]);
