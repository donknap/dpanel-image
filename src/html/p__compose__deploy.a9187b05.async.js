"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7667],{30159:function(g,v,e){e.d(v,{Z:function(){return h}});var l=e(87462),a=e(62435),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]},name:"pause-circle",theme:"outlined"},m=c,d=e(84089),f=function(p,n){return a.createElement(d.Z,(0,l.Z)({},p,{ref:n,icon:m}))},o=a.forwardRef(f),h=o},74842:function(g,v,e){e.d(v,{Z:function(){return h}});var l=e(87462),a=e(62435),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},m=c,d=e(84089),f=function(p,n){return a.createElement(d.Z,(0,l.Z)({},p,{ref:n,icon:m}))},o=a.forwardRef(f),h=o},87784:function(g,v,e){e.d(v,{Z:function(){return h}});var l=e(87462),a=e(62435),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},m=c,d=e(84089),f=function(p,n){return a.createElement(d.Z,(0,l.Z)({},p,{ref:n,icon:m}))},o=a.forwardRef(f),h=o},12044:function(g,v,e){e.d(v,{j:function(){return c}});var l=e(34155),a=typeof l!="undefined"&&l.versions!=null&&l.versions.node!=null,c=function(){return typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.matchMedia!="undefined"&&!a}},80821:function(g,v,e){e.d(v,{Z:function(){return p}});var l=e(5574),a=e.n(l),c=e(93246),m=e(54006),d=e(31418),f=e(86738),o=e(14726),h=e(62435),E=e(86074);function p(n){var T=(0,h.useState)(!1),C=a()(T,2),j=C[0],D=C[1],_=d.Z.useApp(),O=(0,m.useIntl)(),M=function(){D(!0),n.action().then(function(I){if(D(!1),typeof n.onSuccess=="function"&&n.onSuccess(I),n.messageSuccess){var B="";n.messageSuccess.indexOf(".")>-1?B=O.formatMessage({id:n.messageSuccess}):B=n.messageSuccess,n.asynced?(0,c.Rk)(_,B):(0,c.$h)(_,B)}}).catch(function(I){D(!1),typeof n.onError=="function"&&n.onError(I)})};return n.confirm?(0,E.jsx)(f.Z,{style:{width:500},title:"\u63D0\u793A",description:n.confirm,onConfirm:M,okText:"Yes",cancelText:"No",children:(0,E.jsx)(o.ZP,{disabled:n.disabled,icon:n.icon,loading:j,danger:n.danger,type:n.type,children:n.children})}):(0,E.jsx)(o.ZP,{disabled:n.disabled,icon:n.icon,loading:j,onClick:M,danger:n.danger,type:n.type,children:n.children})}},54964:function(g,v,e){var l=e(38345),a=e(62435),c=e(12320),m=e.n(c),d=e(86074),f=new c.Terminal({fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,cursorStyle:"block",cursorBlink:!0,theme:{foreground:"#dddddd",cursor:"gray"}}),o=(0,a.forwardRef)(function(h,E){return(0,a.useEffect)(function(){f.open(document.getElementById("terminal-container")),f.clear()},[]),(0,a.useImperativeHandle)(E,function(){return{write:function(n){f.write(n)},clear:function(){f.clear()}}}),(0,d.jsx)(l.Z,{ghost:!0,style:{height:450},children:(0,d.jsx)("div",{id:"terminal-container",style:{width:"100%",height:"200px"}})})});v.Z=o},97964:function(g,v,e){e.r(v),e.d(v,{default:function(){return F}});var l=e(15009),a=e.n(l),c=e(99289),m=e.n(c),d=e(5574),f=e.n(d),o=e(80821),h=e(54964),E=e(24910),p=e(43425),n=e(74842),T=e(87784),C=e(33160),j=e(30159),D=e(6110),_=e(38345),O=e(97269),M=e(62370),s=e(54006),I=e(78957),B=e(96074),x=e(75891),Z=e(84567),A=e(62435),r=e(86074);function F(){var W=(0,s.useParams)(),b=(0,A.useRef)(),$=(0,A.useState)(),L=f()($,2),u=L[0],z=L[1],G=(0,A.useState)({deleteImage:!1}),S=f()(G,2),N=S[0],V=S[1],y=(0,A.useRef)(),K=(0,s.useModel)("subscriber");return K.addDataHandler("composeUp",function(){var i=K.getDataByType("composeUp"),t=i.pop();if(t){var P;(P=y.current)===null||P===void 0||P.write(t.data)}}),(0,A.useEffect)(function(){var i;(0,E.YZ)({id:parseInt((i=W.id)!==null&&i!==void 0?i:"")}).then(function(t){z(t.data)})},[]),(0,r.jsx)(D._z,{header:{extra:[]},children:(0,r.jsxs)(_.Z,{ghost:!0,direction:"column",gutter:[10,10],children:[(0,r.jsx)(_.Z,{title:(0,r.jsx)(p.Z,{}),subTitle:"\u64CD\u4F5C - "+(u==null?void 0:u.title),headerBordered:!0,children:(0,r.jsxs)(I.Z,{children:[(0,r.jsx)(o.Z,{icon:(0,r.jsx)(n.Z,{}),action:function(){var t;return statusOperate({md5:(t=u==null?void 0:u.Id)!==null&&t!==void 0?t:"",operate:"start"})},messageSuccess:"\u542F\u52A8\u6210\u529F",onSuccess:function(){return setReload(reload+1)},children:"\u542F\u52A8"}),(0,r.jsx)(o.Z,{action:function(){var t;return statusOperate({md5:(t=u==null?void 0:u.Id)!==null&&t!==void 0?t:"",operate:"stop"})},messageSuccess:"\u505C\u6B62\u6210\u529F",icon:(0,r.jsx)(T.Z,{}),onSuccess:function(){return setReload(reload+1)},children:"\u505C\u6B62"}),(0,r.jsx)(o.Z,{action:function(){var t;return statusOperate({md5:(t=u==null?void 0:u.Id)!==null&&t!==void 0?t:"",operate:"restart"})},messageSuccess:"\u91CD\u542F\u6210\u529F",onSuccess:function(){return setReload(reload+1)},icon:(0,r.jsx)(C.Z,{}),children:"\u91CD\u542F"}),(0,r.jsx)(o.Z,{action:function(){var t;return statusOperate({md5:(t=u==null?void 0:u.Id)!==null&&t!==void 0?t:"",operate:"pause"})},messageSuccess:"\u6682\u505C\u6210\u529F",onSuccess:function(){return setReload(reload+1)},icon:(0,r.jsx)(j.Z,{}),children:"\u6682\u505C"}),(0,r.jsx)(o.Z,{action:function(){var t;return statusOperate({md5:(t=u==null?void 0:u.Id)!==null&&t!==void 0?t:"",operate:"unpause"})},messageSuccess:"\u542F\u52A8\u6210\u529F",onSuccess:function(){return setReload(reload+1)},icon:(0,r.jsx)(n.Z,{}),children:"\u6062\u590D"}),(0,r.jsx)(B.Z,{type:"vertical"}),(0,r.jsx)(o.Z,{type:"primary",action:function(){var t,P;return(t=y.current)===null||t===void 0||t.clear(),(0,E.Am)({id:(P=u==null?void 0:u.id)!==null&&P!==void 0?P:0})},messageSuccess:"\u90E8\u7F72\u6210\u529F\uFF0C\u8BF7\u5230\u5BB9\u5668\u7BA1\u7406\u4E2D\u67E5\u770B",children:"\u90E8\u7F72\u5BB9\u5668"}),(0,r.jsx)(o.Z,{type:"primary",action:function(){var t,P;return(t=y.current)===null||t===void 0||t.clear(),(0,E.cO)({id:(P=u==null?void 0:u.id)!==null&&P!==void 0?P:0,deleteImage:N.deleteImage})},danger:!0,confirm:(0,r.jsxs)(I.Z,{style:{width:280},direction:"vertical",children:[(0,r.jsx)(x.Z.Text,{children:"\u5220\u9664\u5BB9\u5668\u540E\u65E0\u6CD5\u6062\u590D,\u786E\u8BA4\u5417\uFF1F"}),(0,r.jsx)(Z.Z,{name:"deleteImage",onChange:function(t){return V({deleteImage:t.target.checked})},children:"\u5220\u9664\u955C\u50CF\uFF1F"})]}),children:"\u9500\u6BC1\u5BB9\u5668"})]})}),(0,r.jsx)(_.Z,{title:"\u90E8\u7F72\u65E5\u5FD7",children:(0,r.jsx)(O.A,{formRef:b,onFinish:function(){var i=m()(a()().mark(function t(P){var U,Y;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,(0,E.Am)({id:parseInt((U=W.id)!==null&&U!==void 0?U:"")});case 2:return Y=R.sent,R.abrupt("return",!1);case 4:case"end":return R.stop()}},t)}));return function(t){return i.apply(this,arguments)}}(),submitter:!1,children:(0,r.jsx)(M.Z,{name:"runLog",children:(0,r.jsx)(h.Z,{ref:y})})})})]})})}},24910:function(g,v,e){e.d(v,{Am:function(){return p},YZ:function(){return j},cO:function(){return T},im:function(){return f},pm:function(){return h}});var l=e(15009),a=e.n(l),c=e(99289),m=e.n(c),d=e(54006);function f(_){return o.apply(this,arguments)}function o(){return o=m()(a()().mark(function _(O){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,d.request)("/api/app/compose/create",{method:"POST",data:O}));case 1:case"end":return s.stop()}},_)})),o.apply(this,arguments)}function h(_){return E.apply(this,arguments)}function E(){return E=m()(a()().mark(function _(O){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,d.request)("/api/app/compose/get-list",{method:"POST",data:O}));case 1:case"end":return s.stop()}},_)})),E.apply(this,arguments)}function p(_){return n.apply(this,arguments)}function n(){return n=m()(a()().mark(function _(O){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,d.request)("/api/app/compose/deploy",{method:"POST",data:O}));case 1:case"end":return s.stop()}},_)})),n.apply(this,arguments)}function T(_){return C.apply(this,arguments)}function C(){return C=m()(a()().mark(function _(O){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,d.request)("/api/app/compose/uninstall",{method:"POST",data:O}));case 1:case"end":return s.stop()}},_)})),C.apply(this,arguments)}function j(_){return D.apply(this,arguments)}function D(){return D=m()(a()().mark(function _(O){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,d.request)("/api/app/compose/get-detail",{method:"POST",data:O}));case 1:case"end":return s.stop()}},_)})),D.apply(this,arguments)}}}]);
