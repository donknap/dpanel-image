"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3355],{28307:function(F,j,e){var y=e(5574),t=e.n(y),M=e(38345),s=e(97269),n=e(5966),h=e(62370),p=e(14726),O=e(85265),E=e(78957),D=e(34041),v=e(38703),_=e(62435),C=e(80821),b=e(3393),T=e(54006),l=e(97961),a=e(86074),f=(0,_.forwardRef)(function(u,o){var I=(0,_.useState)(!1),B=t()(I,2),A=B[0],R=B[1],W=(0,_.useState)(),i=t()(W,2),c=i[0],d=i[1],r=(0,T.useModel)("subscriber"),U=(0,_.useRef)();return r.addDataHandler("imageDownload",function(){var P=r.getDataByType("imageDownload"),m=P.pop();m&&d(m.data)}),(0,_.useImperativeHandle)(o,function(){return{upgradeImage:function(m){var g;return R(!0),(g=U.current)===null||g===void 0||g.setFieldValue("imageUrl",m),(0,b.Gb)({tag:m,type:"pull"})},setImageName:function(m){var g;R(!0),(g=U.current)===null||g===void 0||g.setFieldValue("imageUrl",m)}}}),[(0,a.jsx)(p.ZP,{onClick:function(){var m;R(!0),(m=U.current)===null||m===void 0||m.resetFields(),d({start:{downloading:0,extracting:0}})},children:"\u62C9\u53D6\u65B0\u955C\u50CF"},"remoteBtn"),(0,a.jsxs)(O.Z,{forceRender:!0,open:A,title:"\u4E0B\u8F7D\u8FDC\u7A0B\u955C\u50CF",width:800,onClose:function(){return R(!1)},footer:!1,children:[(0,a.jsx)(M.Z,{children:(0,a.jsxs)(E.Z,{direction:"vertical",size:"middle",children:[(0,a.jsxs)("div",{children:["1\u3001\u955C\u50CF\u540D\u79F0\u4E2D\u4E0D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C \u9ED8\u8BA4\u4ECE ",(0,a.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:"docker hub"})," \u4E2D\u4E0B\u8F7D\uFF0C \u4F60\u53EF\u4EE5\u5728\u4E0A\u9762",(0,a.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:"\u3010\u67E5\u627E\u3011"}),"\u9700\u8981\u7684\u955C\u50CF"]}),(0,a.jsxs)("div",{children:["2\u3001\u955C\u50CF\u4E2D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C\u8BF7\u786E",(0,a.jsx)("a",{href:"/image/registry",target:"_blank",children:"\u3010\u6DFB\u52A0\u3011"}),"\u8FC7\u8BE5\u4ED3\u5E93\uFF0C\u5E76\u6709 Pull \u6743\u9650"]}),(0,a.jsx)("div",{children:"3\u3001\u65E0\u7528\u7684\u955C\u50CF\u53CA\u7F13\u5B58\u6587\u4EF6\u53EF\u4EE5\u5728\u955C\u50CF\u7BA1\u7406\u4E2D\u8FDB\u884C\u5220\u9664\u548C\u6E05\u7406"})]})}),(0,a.jsx)(M.Z,{title:"\u4E0B\u8F7D\u955C\u50CF",headerBordered:!0,children:(0,a.jsxs)(s.A,{submitter:!1,formRef:U,children:[(0,a.jsxs)(E.Z.Compact,{children:[(0,a.jsx)(n.Z,{width:400,name:"imageUrl",placeholder:"\u8BF7\u8F93\u5165\u955C\u50CF\u5730\u5740"}),(0,a.jsx)(h.Z,{name:"platform",children:(0,a.jsx)(D.Z,{style:{width:150},placeholder:"\u9ED8\u8BA4\u5F53\u524D\u7CFB\u7EDF",options:l.ii.map(function(P){return{label:P.name,value:P.name}})})}),(0,a.jsx)(C.Z,{action:function(){var m,g,w,L,K=(m=(g=U.current)===null||g===void 0?void 0:g.getFieldValue("imageUrl"))!==null&&m!==void 0?m:"";return(0,b.Gb)({tag:K,type:"pull",platform:(w=(L=U.current)===null||L===void 0?void 0:L.getFieldValue("platform"))!==null&&w!==void 0?w:"amd64"})},onSuccess:function(){var m,g;d({finish:{downloading:100,extracting:100}}),R(!1);var w=(m=(g=U.current)===null||g===void 0?void 0:g.getFieldValue("imageUrl"))!==null&&m!==void 0?m:"";u.onFinish&&u.onFinish(w)},messageSuccess:function(m){var g="\u62C9\u53D6\u6210\u529F";return m.data.proxyUrl&&(g+="\uFF0C\u4F7F\u7528\u4EE3\u7406 "+m.data.proxyUrl),g},children:"\u62C9\u53D6\u955C\u50CF"})]}),(0,a.jsx)(h.Z,{label:"\u4E0B\u8F7D\u8FDB\u5EA6",children:c&&Object.keys(c).map(function(P){return(0,a.jsx)(v.Z,{percent:c[P].downloading,success:{percent:c[P].extracting}},P)})})]})})]},"remoteDrawer")]});j.Z=f},80821:function(F,j,e){e.d(j,{Z:function(){return v}});var y=e(5574),t=e.n(y),M=e(93246),s=e(54006),n=e(31418),h=e(86738),p=e(14726),O=e(83062),E=e(62435),D=e(86074);function v(_){var C=(0,E.useState)(!1),b=t()(C,2),T=b[0],l=b[1],a=n.Z.useApp(),f=(0,s.useIntl)(),u=function(){l(!0),_.action().then(function(I){if(l(!1),typeof _.onSuccess=="function"&&_.onSuccess(I),_.messageSuccess){var B="";typeof _.messageSuccess=="function"?B=_.messageSuccess(I):B=_.messageSuccess,B.indexOf(".")>-1&&(B=f.formatMessage({id:B})),_.asynced?(0,M.Rk)(a,B):(0,M.$h)(a,B)}}).catch(function(I){l(!1),typeof _.onError=="function"&&_.onError(I)})};return _.confirm?(0,D.jsx)(h.Z,{style:{width:500},title:"\u63D0\u793A",description:_.confirm,onConfirm:u,okText:"Yes",cancelText:"No",children:(0,D.jsx)(p.ZP,{disabled:_.disabled,icon:_.icon,loading:T,danger:_.danger,type:_.type,children:_.children})}):(0,D.jsx)(O.Z,{title:_.tips,children:(0,D.jsx)(p.ZP,{disabled:_.disabled,icon:_.icon,loading:T,onClick:u,danger:_.danger,type:_.type,children:_.children})})}},97961:function(F,j,e){e.d(j,{MF:function(){return T},_2:function(){return C},fN:function(){return p},hG:function(){return v},ii:function(){return h},vC:function(){return E}});var y=e(15009),t=e.n(y),M=e(99289),s=e.n(M),n=e(54006),h=[{name:"amd64",arch:"amd64"},{name:"arm64",arch:"arm64"},{name:"i386",arch:"386"},{name:"arm/v6",arch:"arm"},{name:"arm/v7",arch:"arm"},{name:"arm/v8",arch:"arm64"},{name:"ppc64le",arch:"ppc64le"},{name:"riscv64",arch:"riscv64"}];function p(a){return O.apply(this,arguments)}function O(){return O=s()(t()().mark(function a(f){return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,n.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:f}));case 1:case"end":return o.stop()}},a)})),O.apply(this,arguments)}function E(a){return D.apply(this,arguments)}function D(){return D=s()(t()().mark(function a(f){return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,n.request)("/api/app/image/import-by-container-tar",{method:"POST",data:f}));case 1:case"end":return o.stop()}},a)})),D.apply(this,arguments)}function v(a){return _.apply(this,arguments)}function _(){return _=s()(t()().mark(function a(f){return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,n.request)("/api/app/image/import-by-image-tar",{method:"POST",data:f}));case 1:case"end":return o.stop()}},a)})),_.apply(this,arguments)}function C(a){return b.apply(this,arguments)}function b(){return b=s()(t()().mark(function a(f){return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,n.request)("/api/common/attach/delete",{method:"POST",data:f});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},a)})),b.apply(this,arguments)}function T(){return l.apply(this,arguments)}function l(){return l=s()(t()().mark(function a(){return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,n.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return u.stop()}},a)})),l.apply(this,arguments)}},3393:function(F,j,e){e.d(j,{Gb:function(){return O},Pn:function(){return _},Rb:function(){return b},YU:function(){return h},_U:function(){return D}});var y=e(15009),t=e.n(y),M=e(99289),s=e.n(M),n=e(54006);function h(l){return p.apply(this,arguments)}function p(){return p=s()(t()().mark(function l(a){return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,n.request)("/api/app/image/get-detail",{method:"POST",data:a}));case 1:case"end":return u.stop()}},l)})),p.apply(this,arguments)}function O(l){return E.apply(this,arguments)}function E(){return E=s()(t()().mark(function l(a){return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,n.request)("/api/app/image/tag-remote",{method:"POST",data:a}));case 1:case"end":return u.stop()}},l)})),E.apply(this,arguments)}function D(l){return v.apply(this,arguments)}function v(){return v=s()(t()().mark(function l(a){return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,n.request)("/api/app/image/tag-add",{method:"POST",data:a}));case 1:case"end":return u.stop()}},l)})),v.apply(this,arguments)}function _(l){return C.apply(this,arguments)}function C(){return C=s()(t()().mark(function l(a){return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,n.request)("/api/app/image/tag-delete",{method:"POST",data:a}));case 1:case"end":return u.stop()}},l)})),C.apply(this,arguments)}function b(l){return T.apply(this,arguments)}function T(){return T=s()(t()().mark(function l(a){return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,n.request)("/api/app/image/export",{method:"POST",data:a,responseType:"blob"}));case 1:case"end":return u.stop()}},l)})),T.apply(this,arguments)}},18148:function(F,j,e){e.d(j,{$q:function(){return b},Fj:function(){return B},KG:function(){return h},KX:function(){return R},T8:function(){return _},Xn:function(){return D},ao:function(){return l},c5:function(){return o},c7:function(){return f}});var y=e(15009),t=e.n(y),M=e(99289),s=e.n(M),n=e(54006);function h(i){return p.apply(this,arguments)}function p(){return p=s()(t()().mark(function i(c){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,n.request)("/api/app/image/get-list",{method:"POST",data:c}));case 1:case"end":return r.stop()}},i)})),p.apply(this,arguments)}function O(i){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime().mark(function i(c){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,request("/api/app/log/image-build",{method:"POST",data:c});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),E.apply(this,arguments)}function D(i){return v.apply(this,arguments)}function v(){return v=s()(t()().mark(function i(c){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,n.request)("/api/app/image/get-list-build",{method:"POST",data:c}));case 1:case"end":return r.stop()}},i)})),v.apply(this,arguments)}function _(i){return C.apply(this,arguments)}function C(){return C=s()(t()().mark(function i(c){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,n.request)("/api/app/image/get-build-task",{method:"POST",data:c});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),C.apply(this,arguments)}function b(i){return T.apply(this,arguments)}function T(){return T=s()(t()().mark(function i(c){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,n.request)("/api/app/image/delete-build-task",{method:"POST",data:c});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),T.apply(this,arguments)}function l(i){return a.apply(this,arguments)}function a(){return a=s()(t()().mark(function i(c){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,n.request)("/api/app/image/image-delete",{method:"POST",data:c});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),a.apply(this,arguments)}function f(){return u.apply(this,arguments)}function u(){return u=s()(t()().mark(function i(){return t()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,n.request)("/api/app/image/image-prune",{method:"POST"});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i)})),u.apply(this,arguments)}function o(){return I.apply(this,arguments)}function I(){return I=s()(t()().mark(function i(){return t()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,n.request)("/api/app/image/build-prune",{method:"POST"});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i)})),I.apply(this,arguments)}function B(i){return A.apply(this,arguments)}function A(){return A=s()(t()().mark(function i(c){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,n.request)("/api/app/image/update-title",{method:"POST",data:c});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),A.apply(this,arguments)}function R(i){return W.apply(this,arguments)}function W(){return W=s()(t()().mark(function i(c){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,n.request)("/api/app/image/tag-sync",{method:"POST",data:c}));case 1:case"end":return r.stop()}},i)})),W.apply(this,arguments)}},5251:function(F,j,e){e.d(j,{FI:function(){return t},ZM:function(){return M}});function y(s){return s.trim()}function t(s){var n="";s<.1*1024?n=s.toFixed(2)+"B":s<.1*1024*1024?n=(s/1024).toFixed(2)+"KB":s<1*1024*1024*1024?n=(s/(1024*1024)).toFixed(2)+"MB":n=(s/(1024*1024*1024)).toFixed(2)+"GB";var h=n+"",p=h.indexOf("."),O=h.substr(p+1,2);return O=="00"?h.substring(0,p)+h.substr(p+3,2):n}function M(s){if(s){var n=new Date(s),h=n.getFullYear()+"-",p=(n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-",O=(n.getDate()<10?"0"+n.getDate():n.getDate())+" ",E=(n.getHours()<10?"0"+n.getHours():n.getHours())+":",D=(n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes())+":",v=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();return h+p+O+E+D+v}}}}]);
