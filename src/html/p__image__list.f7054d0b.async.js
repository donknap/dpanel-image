"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4214],{5966:function(ae,L,t){var d=t(97685),f=t(1413),G=t(45987),S=t(21770),$=t(72723),N=t(55241),W=t(97435),X=t(62435),D=t(33468),m=t(86074),H=["fieldProps","proFieldProps"],Q=["fieldProps","proFieldProps"],P="text",y=function(g){var s=g.fieldProps,V=g.proFieldProps,U=(0,G.Z)(g,H);return(0,m.jsx)(D.Z,(0,f.Z)({valueType:P,fieldProps:s,filedConfig:{valueType:P},proFieldProps:V},U))},C=function(g){var s=(0,S.Z)(g.open||!1,{value:g.open,onChange:g.onOpenChange}),V=(0,d.Z)(s,2),U=V[0],A=V[1];return(0,m.jsx)($.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(F){var K,q=F.getFieldValue(g.name||[]);return(0,m.jsx)(N.Z,(0,f.Z)((0,f.Z)({getPopupContainer:function(O){return O&&O.parentNode?O.parentNode:O},onOpenChange:A,content:(0,m.jsxs)("div",{style:{padding:"4px 0"},children:[(K=g.statusRender)===null||K===void 0?void 0:K.call(g,q),g.strengthText?(0,m.jsx)("div",{style:{marginTop:10},children:(0,m.jsx)("span",{children:g.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},g.popoverProps),{},{open:U,children:g.children}))}})},j=function(g){var s=g.fieldProps,V=g.proFieldProps,U=(0,G.Z)(g,Q),A=(0,X.useState)(!1),M=(0,d.Z)(A,2),F=M[0],K=M[1];return s!=null&&s.statusRender&&U.name?(0,m.jsx)(C,{name:U.name,statusRender:s==null?void 0:s.statusRender,popoverProps:s==null?void 0:s.popoverProps,strengthText:s==null?void 0:s.strengthText,open:F,onOpenChange:K,children:(0,m.jsx)("div",{children:(0,m.jsx)(D.Z,(0,f.Z)({valueType:"password",fieldProps:(0,f.Z)((0,f.Z)({},(0,W.Z)(s,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(ee){var O;s==null||(O=s.onBlur)===null||O===void 0||O.call(s,ee),K(!1)},onClick:function(ee){var O;s==null||(O=s.onClick)===null||O===void 0||O.call(s,ee),K(!0)}}),proFieldProps:V,filedConfig:{valueType:P}},U))})}):(0,m.jsx)(D.Z,(0,f.Z)({valueType:"password",fieldProps:s,proFieldProps:V,filedConfig:{valueType:P}},U))},o=y;o.Password=j,o.displayName="ProFormComponent",L.Z=o},96042:function(ae,L,t){t.d(L,{Z:function(){return D}});var d=t(97857),f=t.n(d),G=t(5574),S=t.n(G),$=t(75870),N=t(34041),W=t(62435),X=t(86074);function D(m){var H=(0,W.useState)([]),Q=S()(H,2),P=Q[0],y=Q[1];(0,W.useEffect)(function(){(0,$.Ot)().then(function(j){j&&y(j.data.list)})},[]);var C={};return m.multiple&&(C.mode="multiple"),m.top&&(C.placement="topLeft"),(0,X.jsx)(N.Z,f()({onChange:function(o){if(m.multiple){var w=o.map(function(g){return P[g]});m.onChangeList&&m.onChangeList(w)}else m.onChange&&m.onChange(P[o])},placeholder:"\u9009\u62E9\u955C\u50CF\u4ED3\u5E93\uFF0C\u672C\u5730\u4F7F\u7528\u7559\u7A7A\u5373\u53EF",options:P.map(function(j,o){return{value:o,label:j.title+"("+j.serverAddress+")"}})},C))}},31810:function(ae,L,t){t.r(L),t.d(L,{default:function(){return re}});var d=t(15009),f=t.n(d),G=t(99289),S=t.n(G),$=t(5574),N=t.n($),W=t(6110),X=t(90639),D=t(37476),m=t(62370),H=t(5966),Q=t(31418),P=t(14726),y=t(75891),C=t(78957),j=t(66309),o=t(96074),w=t(83062),g=t(84567),s=t(72723),V=t(69677),U=t(68508),A=t(62435),M=t(54006),F=t(18148),K=t(5251),q=t(80821),ee=t(43425),O=t(87462),pe=t(3803),e=t(84089),c=function(E,Y){return A.createElement(e.Z,(0,O.Z)({},E,{ref:Y,icon:pe.Z}))},h=A.forwardRef(c),a=h,l=t(93246),z=t(28307),T=t(96042),k=t(6409),r=t(86074);function re(){var I=(0,M.useParams)(),E=(0,A.useRef)(),Y=(0,A.useState)({force:!1}),J=N()(Y,2),oe=J[0],le=J[1],Z=(0,A.useState)([]),ne=N()(Z,2),ie=ne[0],ce=ne[1],de=Q.Z.useApp(),se=(0,A.useState)(1),fe=N()(se,2),_=fe[0],ge=fe[1],ve=(0,A.useRef)();return(0,A.useEffect)(function(){var x;(x=E.current)===null||x===void 0||x.reload(),(0,F.Xn)({page:1,pageSize:9999,all:!0}).then(function(u){return ce(u.data.list),!0})},[I,_]),(0,r.jsx)(W._z,{header:{extra:[(0,r.jsx)(P.ZP,{type:"primary",children:(0,r.jsx)(M.Link,{to:"/image/create",children:"\u6784\u5EFA\u955C\u50CF"})},"create"),(0,r.jsx)(z.Z,{onFinish:function(){var u,n;!((u=E.current)===null||u===void 0)&&u.reloadAndRest&&((n=E.current)===null||n===void 0||n.reloadAndRest())}},"remote")]},children:(0,r.jsx)(X.Z,{rowKey:"Id",columns:[{title:"Id",ellipsis:!0,search:!1,dataIndex:"Id",width:200,render:function(u,n,b,R,i){return(0,r.jsx)(M.Link,{to:"/image/detail/"+n.Id,children:n.Id},"edit")}},{title:"\u540D\u79F0",dataIndex:"title",width:200,render:function(u,n,b,R,i){var v="";return ie.map(function(p){n.RepoTags.map(function(B){B==p.tag&&(v=p.title)})}),(0,r.jsx)(y.Z.Text,{editable:{tooltip:"\u4FEE\u6539\u955C\u50CF\u5907\u6CE8\u540D\u79F0",onChange:function(){var p=S()(f()().mark(function me(he){var te;return f()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,(0,F.Fj)({tag:n.RepoTags[0],title:he});case 2:te=ue.sent,ge(_+1),(0,l.$h)(de,"\u4FEE\u6539\u955C\u50CF\u540D\u79F0\u6210\u529F");case 5:case"end":return ue.stop()}},me)}));function B(me){return p.apply(this,arguments)}return B}()},children:v||"---"})}},{title:"Tag",dataIndex:"tag",render:function(u,n,b,R){return(0,r.jsx)(C.Z,{direction:"vertical",style:{textAlign:"left"},children:n.RepoTags.map(function(i,v){return(0,r.jsx)(j.Z,{color:"#2db7f5",children:(0,r.jsx)(y.Z.Text,{copyable:!0,style:{color:"#ffffff"},children:i},v)},v)})},n.Id)}},{title:"\u5C3A\u5BF8",dataIndex:"size",ellipsis:!0,width:"120px",search:!1,sorter:function(u,n){return u.Size-n.Size},render:function(u,n,b,R){return(0,r.jsx)("div",{children:(0,K.FI)(parseFloat(n.Size))},n.Id)}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(u,n,b,R){return(0,r.jsx)("div",{children:(0,K.ZM)(n.Created*1e3)},n.Id)},sorter:function(u,n){return u.Created-n.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:"150px",render:function(u,n,b,R){return(0,r.jsxs)(C.Z,{split:(0,r.jsx)(o.Z,{type:"vertical"}),children:[(0,r.jsx)(M.Link,{to:"/image/detail/"+n.Id,children:(0,r.jsx)(w.Z,{title:"\u7BA1\u7406",children:(0,r.jsx)(ee.Z,{})})},"edit"),(0,r.jsx)(M.Link,{to:"/app/create/image?imageId="+n.Id,children:(0,r.jsx)(w.Z,{title:"\u521B\u5EFA\u5BB9\u5668",children:(0,r.jsx)(a,{})})},"create")]})}}],request:function(){var x=S()(f()().mark(function u(n,b,R){var i;return f()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,F.KG)({tag:n.tag,title:n.title});case 2:if(i=p.sent,!(!i||!i.data||!i.data.list)){p.next=5;break}return p.abrupt("return",{data:[],success:!0,total:0});case 5:return p.abrupt("return",{data:i.data.list,success:!0,total:i.data.list.length});case 6:case"end":return p.stop()}},u)}));return function(u,n,b){return x.apply(this,arguments)}}(),pagination:(0,k.O)(),search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:E,tableAlertOptionRender:function(u){var n=u.selectedRowKeys,b=u.selectedRows;return(0,r.jsxs)(C.Z,{size:16,children:[(0,r.jsx)(q.Z,{danger:!0,type:"primary",action:function(){return(0,F.ao)({md5:n,force:oe.force})},onSuccess:function(){var i,v;return!((i=E.current)===null||i===void 0)&&i.reloadAndRest&&((v=E.current)===null||v===void 0||v.reloadAndRest()),!0},onError:function(){var i,v;return!((i=E.current)===null||i===void 0)&&i.reset&&((v=E.current)===null||v===void 0||v.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",confirm:(0,r.jsxs)(C.Z,{style:{width:280},direction:"vertical",children:[(0,r.jsx)(y.Z.Text,{children:"\u5220\u9664\u955C\u50CF\u540E\u65E0\u6CD5\u6062\u590D,\u786E\u8BA4\u5417\uFF1F"}),(0,r.jsx)(g.Z,{name:"deleteVolume",onChange:function(i){return le({force:i.target.checked})},children:"\u5F3A\u5236\u5220\u9664\uFF1F"})]}),children:"\u6279\u91CF\u5220\u9664"}),(0,r.jsxs)(D.Y,{formRef:ve,title:"\u6279\u91CF\u63A8\u9001\u955C\u50CF",trigger:(0,r.jsx)(P.ZP,{children:"\u6279\u91CF\u63A8\u9001"}),onFinish:function(){var R=S()(f()().mark(function i(v){var p,B,me;return f()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,(0,F.KX)({md5:n,registryId:v.registryId,newNamespace:v.newNamespace});case 2:return me=te.sent,(p=E.current)===null||p===void 0||p.reload(),!((B=E.current)===null||B===void 0)&&B.clearSelected&&E.current.clearSelected(),te.abrupt("return",!0);case 6:case"end":return te.stop()}},i)}));return function(i){return R.apply(this,arguments)}}(),children:[(0,r.jsx)(s.Z.List,{name:"registryId",children:function(i){return i.map(function(v,p){return console.log(v),(0,r.jsx)(V.Z,{hidden:!0},p)})}}),(0,r.jsx)(m.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,r.jsxs)(r.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,r.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,r.jsx)(T.Z,{multiple:!0,top:!0,onChangeList:function(i){var v;(v=ve.current)===null||v===void 0||v.setFieldValue("registryId",i.map(function(p){return p.id}))}})}),(0,r.jsx)(H.Z,{tooltip:"\u53EF\u4EE5\u901A\u8FC7\u6B64\u9879\u91CD\u65B0\u5B9A\u4E49\u547D\u540D\u7A7A\u95F4\uFF0Cdocker hub \u4E0D\u53D7\u8BE5\u914D\u7F6E\u7684\u5F71\u54CD\u3002 \u914D\u7F6E\u6B64\u9879\u540E mysql:latest \u4F1A\u63A8\u9001\u81F3 {\u547D\u540D\u7A7A\u95F4}/mysql:latest\uFF0C dpanel/dpanel:latest \u4F1A\u63A8\u9001\u81F3 {\u547D\u540D\u7A7A\u95F4}/dpanel:latest",label:"\u91CD\u5199\u975E\u5B98\u65B9\u4ED3\u5E93\u547D\u540D\u7A7A\u95F4",name:"newNamespace"})]})]})},tableExtraRender:function(){var u;return(0,r.jsx)(U.Z,{mode:"horizontal",selectedKeys:[(u=I.type)!==null&&u!==void 0?u:"all"],items:[{label:(0,r.jsx)(M.Link,{to:"/image/list/all",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,r.jsx)(M.Link,{to:"/image/list/build",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})},toolBarRender:function(){return[(0,r.jsx)(q.Z,{action:function(){return(0,F.c7)()},onSuccess:function(){var n,b;return!((n=E.current)===null||n===void 0)&&n.reloadAndRest&&((b=E.current)===null||b===void 0||b.reloadAndRest()),!0},onError:function(){var n,b;return!((n=E.current)===null||n===void 0)&&n.reset&&((b=E.current)===null||b===void 0||b.reset()),!0},messageSuccess:"\u6E05\u9664\u6210\u529F",confirm:"\u662F\u5426\u6E05\u7406\u672A\u4F7F\u7528\u6216\u662F\u672A\u8FD0\u884C\u7684\u955C\u50CF",children:"\u6E05\u7406\u672A\u4F7F\u7528\u955C\u50CF"})]}})})}},75870:function(ae,L,t){t.d(L,{Ot:function(){return N},ZH:function(){return X},ix:function(){return m},t1:function(){return Q}});var d=t(15009),f=t.n(d),G=t(99289),S=t.n(G),$=t(54006);function N(y){return W.apply(this,arguments)}function W(){return W=S()(f()().mark(function y(C){return f()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,$.request)("/api/common/registry/get-list",{method:"POST",data:C}));case 1:case"end":return o.stop()}},y)})),W.apply(this,arguments)}function X(y){return D.apply(this,arguments)}function D(){return D=S()(f()().mark(function y(C){return f()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,$.request)("/api/common/registry/create",{method:"POST",data:C}));case 1:case"end":return o.stop()}},y)})),D.apply(this,arguments)}function m(y){return H.apply(this,arguments)}function H(){return H=S()(f()().mark(function y(C){return f()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,$.request)("/api/common/registry/delete",{method:"POST",data:C}));case 1:case"end":return o.stop()}},y)})),H.apply(this,arguments)}function Q(y){return P.apply(this,arguments)}function P(){return P=S()(f()().mark(function y(C){return f()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,$.request)("/api/common/registry/get-detail",{method:"POST",data:C}));case 1:case"end":return o.stop()}},y)})),P.apply(this,arguments)}},6409:function(ae,L,t){t.d(L,{O:function(){return d}});function d(){return{showSizeChanger:!0,defaultPageSize:20}}},66309:function(ae,L,t){t.d(L,{Z:function(){return pe}});var d=t(62435),f=t(97937),G=t(93967),S=t.n(G),$=t(54325),N=t(69760),W=t(45353),X=t(53124),D=t(54548),m=t(10274),H=t(14747),Q=t(45503),P=t(91945);const y=e=>{const{paddingXXS:c,lineWidth:h,tagPaddingHorizontal:a,componentCls:l,calc:z}=e,T=z(a).sub(h).equal(),k=z(c).sub(h).equal();return{[l]:Object.assign(Object.assign({},(0,H.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:T,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,D.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${l}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${l}-close-icon`]:{marginInlineStart:k,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${l}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},["&-checkable"]:{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${l}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},["&-hidden"]:{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:T}}),[`${l}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},C=e=>{const{lineWidth:c,fontSizeIcon:h,calc:a}=e,l=e.fontSizeSM;return(0,Q.TS)(e,{tagFontSize:l,tagLineHeight:(0,D.bf)(a(e.lineHeightSM).mul(l).equal()),tagIconSize:a(h).sub(a(c).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},j=e=>({defaultBg:new m.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var o=(0,P.I$)("Tag",e=>{const c=C(e);return y(c)},j),w=function(e,c){var h={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&c.indexOf(a)<0&&(h[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)c.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(h[a[l]]=e[a[l]]);return h},s=d.forwardRef((e,c)=>{const{prefixCls:h,style:a,className:l,checked:z,onChange:T,onClick:k}=e,r=w(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:re,tag:I}=d.useContext(X.E_),E=ne=>{T==null||T(!z),k==null||k(ne)},Y=re("tag",h),[J,oe,le]=o(Y),Z=S()(Y,`${Y}-checkable`,{[`${Y}-checkable-checked`]:z},I==null?void 0:I.className,l,oe,le);return J(d.createElement("span",Object.assign({},r,{ref:c,style:Object.assign(Object.assign({},a),I==null?void 0:I.style),className:Z,onClick:E})))}),V=t(98719);const U=e=>(0,V.Z)(e,(c,h)=>{let{textColor:a,lightBorderColor:l,lightColor:z,darkColor:T}=h;return{[`${e.componentCls}${e.componentCls}-${c}`]:{color:a,background:z,borderColor:l,"&-inverse":{color:e.colorTextLightSolid,background:T,borderColor:T},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var A=(0,P.bk)(["Tag","preset"],e=>{const c=C(e);return U(c)},j);function M(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const F=(e,c,h)=>{const a=M(h);return{[`${e.componentCls}${e.componentCls}-${c}`]:{color:e[`color${h}`],background:e[`color${a}Bg`],borderColor:e[`color${a}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var K=(0,P.bk)(["Tag","status"],e=>{const c=C(e);return[F(c,"success","Success"),F(c,"processing","Info"),F(c,"error","Error"),F(c,"warning","Warning")]},j),q=function(e,c){var h={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&c.indexOf(a)<0&&(h[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)c.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(h[a[l]]=e[a[l]]);return h};const ee=(e,c)=>{const{prefixCls:h,className:a,rootClassName:l,style:z,children:T,icon:k,color:r,onClose:re,closeIcon:I,closable:E,bordered:Y=!0}=e,J=q(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable","bordered"]),{getPrefixCls:oe,direction:le,tag:Z}=d.useContext(X.E_),[ne,ie]=d.useState(!0);d.useEffect(()=>{"visible"in J&&ie(J.visible)},[J.visible]);const ce=(0,$.o2)(r),de=(0,$.yT)(r),se=ce||de,fe=Object.assign(Object.assign({backgroundColor:r&&!se?r:void 0},Z==null?void 0:Z.style),z),_=oe("tag",h),[ge,ve,x]=o(_),u=S()(_,Z==null?void 0:Z.className,{[`${_}-${r}`]:se,[`${_}-has-color`]:r&&!se,[`${_}-hidden`]:!ne,[`${_}-rtl`]:le==="rtl",[`${_}-borderless`]:!Y},a,l,ve,x),n=B=>{B.stopPropagation(),re==null||re(B),!B.defaultPrevented&&ie(!1)},[,b]=(0,N.Z)({closable:E,closeIcon:I!=null?I:Z==null?void 0:Z.closeIcon,customCloseIconRender:B=>B===null?d.createElement(f.Z,{className:`${_}-close-icon`,onClick:n}):d.createElement("span",{className:`${_}-close-icon`,onClick:n},B),defaultCloseIcon:null,defaultClosable:!1}),R=typeof J.onClick=="function"||T&&T.type==="a",i=k||null,v=i?d.createElement(d.Fragment,null,i,T&&d.createElement("span",null,T)):T,p=d.createElement("span",Object.assign({},J,{ref:c,className:u,style:fe}),v,b,ce&&d.createElement(A,{key:"preset",prefixCls:_}),de&&d.createElement(K,{key:"status",prefixCls:_}));return ge(R?d.createElement(W.Z,{component:"Tag"},p):p)},O=d.forwardRef(ee);O.CheckableTag=s;var pe=O}}]);
