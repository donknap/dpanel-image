"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5050],{80821:function(A,E,t){t.d(E,{Z:function(){return D}});var R=t(5574),i=t.n(R),h=t(93246),m=t(54006),y=t(31418),_=t(86738),g=t(14726),v=t(83062),O=t(62435),l=t(86074);function D(n){var o=(0,O.useState)(!1),P=i()(o,2),r=P[0],u=P[1],s=y.Z.useApp(),e=(0,m.useIntl)(),a=function(){u(!0),n.action().then(function(c){if(u(!1),typeof n.onSuccess=="function"&&n.onSuccess(c),n.messageSuccess){var d="";n.messageSuccess.indexOf(".")>-1?d=e.formatMessage({id:n.messageSuccess}):d=n.messageSuccess,n.asynced?(0,h.Rk)(s,d):(0,h.$h)(s,d)}}).catch(function(c){u(!1),typeof n.onError=="function"&&n.onError(c)})};return n.confirm?(0,l.jsx)(_.Z,{style:{width:500},title:"\u63D0\u793A",description:n.confirm,onConfirm:a,okText:"Yes",cancelText:"No",children:(0,l.jsx)(g.ZP,{disabled:n.disabled,icon:n.icon,loading:r,danger:n.danger,type:n.type,children:n.children})}):(0,l.jsx)(v.Z,{title:n.tips,children:(0,l.jsx)(g.ZP,{disabled:n.disabled,icon:n.icon,loading:r,onClick:a,danger:n.danger,type:n.type,children:n.children})})}},85827:function(A,E,t){t.r(E),t.d(E,{default:function(){return P}});var R=t(15009),i=t.n(R),h=t(99289),m=t.n(h),y=t(80821),_=t(54006);function g(r){return v.apply(this,arguments)}function v(){return v=m()(i()().mark(function r(u){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.request)("/api/common/event/get-list",{method:"POST",data:u}));case 1:case"end":return e.stop()}},r)})),v.apply(this,arguments)}function O(r){return l.apply(this,arguments)}function l(){return l=m()(i()().mark(function r(u){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.request)("/api/common/event/prune",{method:"POST",data:u}));case 1:case"end":return e.stop()}},r)})),l.apply(this,arguments)}var D=t(90639),n=t(62435),o=t(86074);function P(){var r=(0,n.useRef)();return(0,o.jsx)(D.Z,{columns:[{title:"\u7C7B\u578B",ellipsis:!0,dataIndex:"type",width:200},{title:"\u8BE6\u60C5",search:!1,render:function(s,e,a,M){return(0,o.jsxs)(o.Fragment,{children:[e.action," ",e.message]})}},{title:"\u65F6\u95F4",ellipsis:!0,search:!1,dataIndex:"createdAt",width:200,render:function(s,e,a,M,c){return new Date(e.createdAt).toLocaleString()}}],rowKey:"id",request:function(){var u=m()(i()().mark(function s(e,a,M){var c,d,S;return i()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,g({page:(c=e.current)!==null&&c!==void 0?c:1,pageSize:(d=e.pageSize)!==null&&d!==void 0?d:10,type:e.type});case 2:return S=f.sent,f.abrupt("return",{data:S.data.list,success:!0,total:S.data.total});case 4:case"end":return f.stop()}},s)}));return function(s,e,a){return u.apply(this,arguments)}}(),pagination:{pageSize:10},actionRef:r,toolBarRender:function(){return[(0,o.jsx)(y.Z,{action:function(){return O()},onSuccess:function(){var e,a;return!((e=r.current)===null||e===void 0)&&e.reloadAndRest&&((a=r.current)===null||a===void 0||a.reloadAndRest()),!0},onError:function(){var e,a;return!((e=r.current)===null||e===void 0)&&e.reset&&((a=r.current)===null||a===void 0||a.reset()),!0},messageSuccess:"\u6E05\u9664\u6210\u529F",confirm:"\u662F\u5426\u8981\u6E05\u9664\u6389\u6240\u6709\u4E8B\u4EF6\u4FE1\u606F",danger:!0,type:"primary",children:"\u6E05\u9664\u4E8B\u4EF6\u901A\u77E5"})]}})}}}]);
