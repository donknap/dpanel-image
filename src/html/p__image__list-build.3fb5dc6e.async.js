"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[536],{80821:function(U,O,e){e.d(O,{Z:function(){return D}});var M=e(5574),r=e.n(M),I=e(93246),d=e(54006),f=e(31418),F=e(86738),y=e(14726),v=e(83062),h=e(62435),p=e(86074);function D(n){var x=(0,h.useState)(!1),u=r()(x,2),c=u[0],A=u[1],o=f.Z.useApp(),E=(0,d.useIntl)(),_=function(){A(!0),n.action().then(function(R){if(A(!1),typeof n.onSuccess=="function"&&n.onSuccess(R),n.messageSuccess){var C="";typeof n.messageSuccess=="function"?C=n.messageSuccess(R):C=n.messageSuccess,C.indexOf(".")>-1&&(C=E.formatMessage({id:C})),n.asynced?(0,I.Rk)(o,C):(0,I.$h)(o,C)}}).catch(function(R){A(!1),typeof n.onError=="function"&&n.onError(R)})};return n.confirm?(0,p.jsx)(F.Z,{style:{width:500},title:"\u63D0\u793A",description:n.confirm,onConfirm:_,okText:"Yes",cancelText:"No",children:(0,p.jsx)(y.ZP,{disabled:n.disabled,icon:n.icon,loading:c,danger:n.danger,type:n.type,children:n.children})}):(0,p.jsx)(v.Z,{title:n.tips,children:(0,p.jsx)(y.ZP,{disabled:n.disabled,icon:n.icon,loading:c,onClick:_,danger:n.danger,type:n.type,children:n.children})})}},94359:function(U,O,e){e.d(O,{Z:function(){return x}});var M=e(62435),r=e(3089),I=e(98165),d=e(18429),f=e(8751),F=e(14313),y=e(30159),v=e(87740),h=e(66309),p=e(83062),D=e(54006),n=e(86074);function x(u){var c=(0,n.jsx)(n.Fragment,{});return u.status=="0"&&(c=(0,n.jsx)(h.Z,{icon:(0,n.jsx)(r.Z,{}),color:"default",children:"waiting"})),u.status=="10"&&(c=(0,n.jsx)(h.Z,{icon:(0,n.jsx)(I.Z,{spin:!0}),color:"processing",children:"processing"})),u.status=="20"&&(c=(0,n.jsx)(h.Z,{icon:(0,n.jsx)(d.Z,{}),color:"error",children:"error"})),u.status=="30"&&(c=(0,n.jsx)(h.Z,{icon:(0,n.jsx)(f.Z,{}),color:"success",children:"success"})),u.status=="running"&&(c=(0,n.jsx)(h.Z,{icon:(0,n.jsx)(F.Z,{}),color:"success",children:u.status})),u.status=="paused"&&(c=(0,n.jsx)(h.Z,{icon:(0,n.jsx)(y.Z,{}),children:u.status})),u.status=="restarting"&&(c=(0,n.jsx)(h.Z,{icon:(0,n.jsx)(v.Z,{}),children:u.status})),(u.status=="exited"||u.status=="dead"||u.status=="removing")&&(c=(0,n.jsx)(h.Z,{icon:(0,n.jsx)(d.Z,{}),color:"warning",children:u.status})),u.link&&(c=(0,n.jsx)(D.Link,{to:u.link,children:c})),u.message&&(c=(0,n.jsx)(p.Z,{placement:u.message.placement,title:u.message.content,children:c})),(0,n.jsx)(n.Fragment,{children:c})}},71623:function(U,O,e){e.r(O),e.d(O,{default:function(){return N}});var M=e(15009),r=e.n(M),I=e(99289),d=e.n(I),f=e(37476),F=e(6110),y=e(90639),v=e(78957),h=e(83062),p=e(66309),D=e(96074),n=e(14726),x=e(68508),u=e(54006),c=e(18148),A=e(94359),o=e(20713),E=e(43425),_=e(45742),l=e(80821),R=e(62435),C=e(97961),K=e(50067),$=e(184),S=e(64317),s=e(52688),g=e(62370),m=e(38925),t=e(71230),G=e(15746),a=e(86074);function k(z){return(0,a.jsxs)($.a,{title:"\u6784\u5EFA\u591A\u5E73\u53F0\u955C\u50CF",trigger:(0,a.jsx)(u.Link,{to:"#",children:(0,a.jsx)(h.Z,{title:"\u591A\u5E73\u53F0\u6784\u5EFA",children:(0,a.jsx)(K.Z,{})})}),onFinish:function(){var L=d()(r()().mark(function B(Z){return r()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return console.log(Z),j.abrupt("return",!1);case 2:case"end":return j.stop()}},B)}));return function(B){return L.apply(this,arguments)}}(),children:[(0,a.jsx)(m.Z,{message:"\u6CE8\u610F",description:"\u591A\u5E73\u53F0\u6784\u5EFA\u540E\u4F1A\u76F4\u63A5\u63A8\u9001\u5230\u5BF9\u5E94\u7684\u4ED3\u5E93\uFF0C\u5176\u4EA7\u751F\u7684\u955C\u50CF\u5E76\u4E0D\u4F1A\u5728\u955C\u50CF\u5217\u8868\u4E2D\u663E\u793A",type:"error",style:{marginBottom:"20px"}}),(0,a.jsx)(S.Z,{name:"platform",label:"\u6784\u5EFA\u5E73\u53F0",tooltip:"Dockerfile\u4E2D\u6839\u636E\u6784\u5EFA\u53C2\u6570 TARGETARCH \u8FDB\u884C\u533A\u5206\u5E73\u53F0",options:C.ii.map(function(L){return L.name}),mode:"multiple"}),(0,a.jsxs)(t.Z,{children:[(0,a.jsx)(G.Z,{span:4,children:(0,a.jsx)(s.Z,{label:"\u6E05\u7406\u6784\u5EFA\u7F13\u5B58",name:"clearCache",initialValue:!0})}),(0,a.jsx)(G.Z,{children:(0,a.jsx)(s.Z,{label:"\u6E05\u7406\u6784\u5EFA\u5BB9\u5668",name:"clearContainer",initialValue:!0})})]}),(0,a.jsx)(g.Z,{label:"\u63A7\u5236\u53F0\u8F93\u51FA",name:"console",children:(0,a.jsx)(o.ZP,{theme:"dark",style:{marginTop:"10px",backgroundColor:"#282c34"},height:"350px",extensions:[o.tk.lineWrapping]})})]})}var X=e(6409);function N(){var z=[{title:"\u540D\u79F0",render:function(Z,i,j,T){return(0,a.jsx)(v.Z,{direction:"vertical",style:{textAlign:"left"},children:i.imageInfo&&i.imageInfo.info.Id?(0,a.jsx)(u.Link,{to:"/image/detail/".concat(i.imageInfo.info.Id),children:(0,a.jsxs)(h.Z,{title:"\u67E5\u770B\u955C\u50CF",children:[" ",i.title]})},"detail"):i.title},i.id)}},{title:"\u6700\u65B0Tag",dataIndex:"tag",search:!1,render:function(Z,i,j,T){return i.imageInfo?i.imageInfo.info.Id==""?(0,a.jsx)(p.Z,{children:"none"},"none"):(0,a.jsx)(v.Z,{direction:"vertical",style:{textAlign:"left"},children:i.imageInfo.info.RepoTags.map(function(P,b){return(0,a.jsx)(p.Z,{color:"#2db7f5",children:P},b)})},i.id):(0,a.jsx)(a.Fragment,{})}},{title:"\u955C\u50CFId",ellipsis:!0,search:!1,copyable:!0,dataIndex:["imageInfo","info","Id"],width:200},{title:"\u6784\u5EFA\u72B6\u6001",width:"100px",ellipsis:!0,search:!1,render:function(Z,i,j,T){return[(0,a.jsx)("div",{children:(0,a.jsx)(A.Z,{status:i.status},i.id)},i.id)]}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:150,render:function(Z,i,j,T){return(0,a.jsxs)(v.Z,{split:(0,a.jsx)(D.Z,{type:"vertical"}),children:[(0,a.jsx)(u.Link,{to:"/image/create?id="+i.id,type:"link",children:(0,a.jsx)(h.Z,{title:"\u518D\u6B21\u6784\u5EFA",children:(0,a.jsx)(E.Z,{})})},"rebuild"),(0,a.jsx)(f.Y,{title:"\u6784\u5EFA\u65E5\u5FD7",submitter:!1,trigger:(0,a.jsx)(u.Link,{to:"#",children:(0,a.jsx)(h.Z,{title:"\u6784\u5EFA\u65E5\u5FD7",children:(0,a.jsx)(_.Z,{})})},i.id),children:(0,a.jsx)(o.ZP,{theme:"dark",height:"500px",value:i.message})},"log"),(0,a.jsx)(k,{id:i.id})]})}}],L=(0,R.useRef)();return(0,a.jsx)(F._z,{header:{extra:[(0,a.jsx)(n.ZP,{type:"primary",children:(0,a.jsx)(u.Link,{to:"/image/create",children:"\u521B\u5EFA\u955C\u50CF"})},"create"),(0,a.jsx)(n.ZP,{children:"\u62C9\u53D6\u955C\u50CF"},"pull")]},children:(0,a.jsx)(y.Z,{actionRef:L,rowKey:"id",columns:z,request:function(){var B=d()(r()().mark(function Z(i,j,T){var P,b,w;return r()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,c.Xn)({page:(P=i.current)!==null&&P!==void 0?P:1,pageSize:(b=i.pageSize)!==null&&b!==void 0?b:10});case 2:return w=W.sent,W.abrupt("return",{data:w.data.list,success:!0,total:w.data.total});case 4:case"end":return W.stop()}},Z)}));return function(Z,i,j){return B.apply(this,arguments)}}(),pagination:(0,X.O)(),search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(Z){var i=Z.selectedRowKeys;return(0,a.jsx)(v.Z,{size:16,children:(0,a.jsx)(l.Z,{danger:!0,type:"primary",action:function(){return(0,c.$q)({id:i})},onSuccess:function(){var T,P;return!((T=L.current)===null||T===void 0)&&T.reloadAndRest&&((P=L.current)===null||P===void 0||P.reloadAndRest()),!0},onError:function(){var T,P;return!((T=L.current)===null||T===void 0)&&T.reset&&((P=L.current)===null||P===void 0||P.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})},tableExtraRender:function(){return(0,a.jsx)(x.Z,{mode:"horizontal",selectedKeys:["build"],items:[{label:(0,a.jsx)(u.Link,{to:"/image/list/all",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,a.jsx)(u.Link,{to:"/image/list/build",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})}})})}},97961:function(U,O,e){e.d(O,{MF:function(){return c},_2:function(){return x},fN:function(){return y},hG:function(){return D},ii:function(){return F},vC:function(){return h}});var M=e(15009),r=e.n(M),I=e(99289),d=e.n(I),f=e(54006),F=[{name:"amd64",arch:"amd64"},{name:"arm64",arch:"arm64"},{name:"i386",arch:"386"},{name:"arm/v6",arch:"arm"},{name:"arm/v7",arch:"arm"},{name:"arm/v8",arch:"arm64"},{name:"ppc64le",arch:"ppc64le"},{name:"riscv64",arch:"riscv64"}];function y(o){return v.apply(this,arguments)}function v(){return v=d()(r()().mark(function o(E){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,f.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:E}));case 1:case"end":return l.stop()}},o)})),v.apply(this,arguments)}function h(o){return p.apply(this,arguments)}function p(){return p=d()(r()().mark(function o(E){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,f.request)("/api/app/image/import-by-container-tar",{method:"POST",data:E}));case 1:case"end":return l.stop()}},o)})),p.apply(this,arguments)}function D(o){return n.apply(this,arguments)}function n(){return n=d()(r()().mark(function o(E){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,f.request)("/api/app/image/import-by-image-tar",{method:"POST",data:E}));case 1:case"end":return l.stop()}},o)})),n.apply(this,arguments)}function x(o){return u.apply(this,arguments)}function u(){return u=d()(r()().mark(function o(E){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,f.request)("/api/common/attach/delete",{method:"POST",data:E});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},o)})),u.apply(this,arguments)}function c(){return A.apply(this,arguments)}function A(){return A=d()(r()().mark(function o(){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,f.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return _.stop()}},o)})),A.apply(this,arguments)}},18148:function(U,O,e){e.d(O,{$q:function(){return u},Fj:function(){return C},KG:function(){return F},KX:function(){return $},T8:function(){return n},Xn:function(){return p},ao:function(){return A},c5:function(){return l},c7:function(){return E}});var M=e(15009),r=e.n(M),I=e(99289),d=e.n(I),f=e(54006);function F(s){return y.apply(this,arguments)}function y(){return y=d()(r()().mark(function s(g){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,f.request)("/api/app/image/get-list",{method:"POST",data:g}));case 1:case"end":return t.stop()}},s)})),y.apply(this,arguments)}function v(s){return h.apply(this,arguments)}function h(){return h=_asyncToGenerator(_regeneratorRuntime().mark(function s(g){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,request("/api/app/log/image-build",{method:"POST",data:g});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},s)})),h.apply(this,arguments)}function p(s){return D.apply(this,arguments)}function D(){return D=d()(r()().mark(function s(g){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,f.request)("/api/app/image/get-list-build",{method:"POST",data:g}));case 1:case"end":return t.stop()}},s)})),D.apply(this,arguments)}function n(s){return x.apply(this,arguments)}function x(){return x=d()(r()().mark(function s(g){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.request)("/api/app/image/get-build-task",{method:"POST",data:g});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},s)})),x.apply(this,arguments)}function u(s){return c.apply(this,arguments)}function c(){return c=d()(r()().mark(function s(g){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.request)("/api/app/image/delete-build-task",{method:"POST",data:g});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},s)})),c.apply(this,arguments)}function A(s){return o.apply(this,arguments)}function o(){return o=d()(r()().mark(function s(g){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.request)("/api/app/image/image-delete",{method:"POST",data:g});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},s)})),o.apply(this,arguments)}function E(){return _.apply(this,arguments)}function _(){return _=d()(r()().mark(function s(){return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,f.request)("/api/app/image/image-prune",{method:"POST"});case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},s)})),_.apply(this,arguments)}function l(){return R.apply(this,arguments)}function R(){return R=d()(r()().mark(function s(){return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,f.request)("/api/app/image/build-prune",{method:"POST"});case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},s)})),R.apply(this,arguments)}function C(s){return K.apply(this,arguments)}function K(){return K=d()(r()().mark(function s(g){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.request)("/api/app/image/update-title",{method:"POST",data:g});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},s)})),K.apply(this,arguments)}function $(s){return S.apply(this,arguments)}function S(){return S=d()(r()().mark(function s(g){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,f.request)("/api/app/image/tag-sync",{method:"POST",data:g}));case 1:case"end":return t.stop()}},s)})),S.apply(this,arguments)}},6409:function(U,O,e){e.d(O,{O:function(){return M}});function M(){return{showSizeChanger:!0,defaultPageSize:20}}}}]);
