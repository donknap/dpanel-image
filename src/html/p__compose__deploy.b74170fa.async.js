"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7667],{30159:function(g,v,e){e.d(v,{Z:function(){return E}});var d=e(87462),a=e(62435),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]},name:"pause-circle",theme:"outlined"},l=c,m=e(84089),p=function(O,t){return a.createElement(m.Z,(0,d.Z)({},O,{ref:t,icon:l}))},o=a.forwardRef(p),E=o},74842:function(g,v,e){e.d(v,{Z:function(){return E}});var d=e(87462),a=e(62435),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},l=c,m=e(84089),p=function(O,t){return a.createElement(m.Z,(0,d.Z)({},O,{ref:t,icon:l}))},o=a.forwardRef(p),E=o},87784:function(g,v,e){e.d(v,{Z:function(){return E}});var d=e(87462),a=e(62435),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},l=c,m=e(84089),p=function(O,t){return a.createElement(m.Z,(0,d.Z)({},O,{ref:t,icon:l}))},o=a.forwardRef(p),E=o},12044:function(g,v,e){e.d(v,{j:function(){return c}});var d=e(34155),a=typeof d!="undefined"&&d.versions!=null&&d.versions.node!=null,c=function(){return typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.matchMedia!="undefined"&&!a}},80821:function(g,v,e){e.d(v,{Z:function(){return O}});var d=e(5574),a=e.n(d),c=e(93246),l=e(54006),m=e(31418),p=e(86738),o=e(14726),E=e(62435),f=e(86074);function O(t){var T=(0,E.useState)(!1),C=a()(T,2),j=C[0],D=C[1],_=m.Z.useApp(),h=(0,l.useIntl)(),M=function(){D(!0),t.action().then(function(I){if(D(!1),typeof t.onSuccess=="function"&&t.onSuccess(I),t.messageSuccess){var B="";t.messageSuccess.indexOf(".")>-1?B=h.formatMessage({id:t.messageSuccess}):B=t.messageSuccess,t.asynced?(0,c.Rk)(_,B):(0,c.$h)(_,B)}}).catch(function(I){D(!1),typeof t.onError=="function"&&t.onError(I)})};return t.confirm?(0,f.jsx)(p.Z,{style:{width:500},title:"\u63D0\u793A",description:t.confirm,onConfirm:M,okText:"Yes",cancelText:"No",children:(0,f.jsx)(o.ZP,{disabled:t.disabled,icon:t.icon,loading:j,danger:t.danger,type:t.type,children:t.children})}):(0,f.jsx)(o.ZP,{disabled:t.disabled,icon:t.icon,loading:j,onClick:M,danger:t.danger,type:t.type,children:t.children})}},54964:function(g,v,e){var d=e(38345),a=e(54006),c=e(62435),l=e(86074),m=(0,c.forwardRef)(function(p,o){var E=(0,a.useModel)("tty");return(0,c.useEffect)(function(){E.open(document.getElementById("terminal-container")),E.clear()},[]),(0,c.useImperativeHandle)(o,function(){return{write:function(O){E.write(O)},clear:function(){E.clear()}}}),(0,l.jsx)(d.Z,{ghost:!0,style:{height:450},children:(0,l.jsx)("div",{id:"terminal-container",style:{width:"100%",height:"200px"}})})});v.Z=m},97964:function(g,v,e){e.r(v),e.d(v,{default:function(){return F}});var d=e(15009),a=e.n(d),c=e(99289),l=e.n(c),m=e(5574),p=e.n(m),o=e(80821),E=e(54964),f=e(24910),O=e(43425),t=e(74842),T=e(87784),C=e(33160),j=e(30159),D=e(6110),_=e(38345),h=e(97269),M=e(62370),s=e(54006),I=e(78957),B=e(96074),x=e(75891),Z=e(84567),A=e(62435),r=e(86074);function F(){var W=(0,s.useParams)(),b=(0,A.useRef)(),$=(0,A.useState)(),L=p()($,2),u=L[0],z=L[1],G=(0,A.useState)({deleteImage:!1}),S=p()(G,2),V=S[0],Y=S[1],y=(0,A.useRef)(),K=(0,s.useModel)("subscriber");return K.addDataHandler("composeUp",function(){var i=K.getDataByType("composeUp"),n=i.pop();if(n){var P;(P=y.current)===null||P===void 0||P.write(n.data)}}),(0,A.useEffect)(function(){var i;(0,f.YZ)({id:parseInt((i=W.id)!==null&&i!==void 0?i:"")}).then(function(n){z(n.data)})},[]),(0,r.jsx)(D._z,{header:{extra:[]},children:(0,r.jsxs)(_.Z,{ghost:!0,direction:"column",gutter:[10,10],children:[(0,r.jsx)(_.Z,{title:(0,r.jsx)(O.Z,{}),subTitle:"\u64CD\u4F5C - "+(u==null?void 0:u.title),headerBordered:!0,children:(0,r.jsxs)(I.Z,{children:[(0,r.jsx)(o.Z,{icon:(0,r.jsx)(t.Z,{}),action:function(){var n;return statusOperate({md5:(n=u==null?void 0:u.Id)!==null&&n!==void 0?n:"",operate:"start"})},messageSuccess:"\u542F\u52A8\u6210\u529F",onSuccess:function(){return setReload(reload+1)},children:"\u542F\u52A8"}),(0,r.jsx)(o.Z,{action:function(){var n;return statusOperate({md5:(n=u==null?void 0:u.Id)!==null&&n!==void 0?n:"",operate:"stop"})},messageSuccess:"\u505C\u6B62\u6210\u529F",icon:(0,r.jsx)(T.Z,{}),onSuccess:function(){return setReload(reload+1)},children:"\u505C\u6B62"}),(0,r.jsx)(o.Z,{action:function(){var n;return statusOperate({md5:(n=u==null?void 0:u.Id)!==null&&n!==void 0?n:"",operate:"restart"})},messageSuccess:"\u91CD\u542F\u6210\u529F",onSuccess:function(){return setReload(reload+1)},icon:(0,r.jsx)(C.Z,{}),children:"\u91CD\u542F"}),(0,r.jsx)(o.Z,{action:function(){var n;return statusOperate({md5:(n=u==null?void 0:u.Id)!==null&&n!==void 0?n:"",operate:"pause"})},messageSuccess:"\u6682\u505C\u6210\u529F",onSuccess:function(){return setReload(reload+1)},icon:(0,r.jsx)(j.Z,{}),children:"\u6682\u505C"}),(0,r.jsx)(o.Z,{action:function(){var n;return statusOperate({md5:(n=u==null?void 0:u.Id)!==null&&n!==void 0?n:"",operate:"unpause"})},messageSuccess:"\u542F\u52A8\u6210\u529F",onSuccess:function(){return setReload(reload+1)},icon:(0,r.jsx)(t.Z,{}),children:"\u6062\u590D"}),(0,r.jsx)(B.Z,{type:"vertical"}),(0,r.jsx)(o.Z,{type:"primary",action:function(){var n,P;return(n=y.current)===null||n===void 0||n.clear(),(0,f.Am)({id:(P=u==null?void 0:u.id)!==null&&P!==void 0?P:0})},messageSuccess:"\u90E8\u7F72\u6210\u529F\uFF0C\u8BF7\u5230\u5BB9\u5668\u7BA1\u7406\u4E2D\u67E5\u770B",children:"\u90E8\u7F72\u5BB9\u5668"}),(0,r.jsx)(o.Z,{type:"primary",action:function(){var n,P;return(n=y.current)===null||n===void 0||n.clear(),(0,f.cO)({id:(P=u==null?void 0:u.id)!==null&&P!==void 0?P:0,deleteImage:V.deleteImage})},danger:!0,confirm:(0,r.jsxs)(I.Z,{style:{width:280},direction:"vertical",children:[(0,r.jsx)(x.Z.Text,{children:"\u5220\u9664\u5BB9\u5668\u540E\u65E0\u6CD5\u6062\u590D,\u786E\u8BA4\u5417\uFF1F"}),(0,r.jsx)(Z.Z,{name:"deleteImage",onChange:function(n){return Y({deleteImage:n.target.checked})},children:"\u5220\u9664\u955C\u50CF\uFF1F"})]}),children:"\u9500\u6BC1\u5BB9\u5668"})]})}),(0,r.jsx)(_.Z,{title:"\u90E8\u7F72\u65E5\u5FD7",children:(0,r.jsx)(h.A,{formRef:b,onFinish:function(){var i=l()(a()().mark(function n(P){var U,H;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,(0,f.Am)({id:parseInt((U=W.id)!==null&&U!==void 0?U:"")});case 2:return H=R.sent,R.abrupt("return",!1);case 4:case"end":return R.stop()}},n)}));return function(n){return i.apply(this,arguments)}}(),submitter:!1,children:(0,r.jsx)(M.Z,{name:"runLog",children:(0,r.jsx)(E.Z,{ref:y})})})})]})})}},24910:function(g,v,e){e.d(v,{Am:function(){return O},YZ:function(){return j},cO:function(){return T},im:function(){return p},pm:function(){return E}});var d=e(15009),a=e.n(d),c=e(99289),l=e.n(c),m=e(54006);function p(_){return o.apply(this,arguments)}function o(){return o=l()(a()().mark(function _(h){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,m.request)("/api/app/compose/create",{method:"POST",data:h}));case 1:case"end":return s.stop()}},_)})),o.apply(this,arguments)}function E(_){return f.apply(this,arguments)}function f(){return f=l()(a()().mark(function _(h){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,m.request)("/api/app/compose/get-list",{method:"POST",data:h}));case 1:case"end":return s.stop()}},_)})),f.apply(this,arguments)}function O(_){return t.apply(this,arguments)}function t(){return t=l()(a()().mark(function _(h){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,m.request)("/api/app/compose/deploy",{method:"POST",data:h}));case 1:case"end":return s.stop()}},_)})),t.apply(this,arguments)}function T(_){return C.apply(this,arguments)}function C(){return C=l()(a()().mark(function _(h){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,m.request)("/api/app/compose/uninstall",{method:"POST",data:h}));case 1:case"end":return s.stop()}},_)})),C.apply(this,arguments)}function j(_){return D.apply(this,arguments)}function D(){return D=l()(a()().mark(function _(h){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,m.request)("/api/app/compose/get-detail",{method:"POST",data:h}));case 1:case"end":return s.stop()}},_)})),D.apply(this,arguments)}}}]);
