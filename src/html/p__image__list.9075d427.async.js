"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4214],{95556:function(se,S,r){var c=r(87462),s=r(62435),W=r(3803),D=r(84089),T=function(x,R){return s.createElement(D.Z,(0,c.Z)({},x,{ref:R,icon:W.Z}))},j=s.forwardRef(T);S.Z=j},5966:function(se,S,r){var c=r(97685),s=r(1413),W=r(45987),D=r(21770),T=r(72723),j=r(55241),L=r(97435),x=r(62435),R=r(33468),h=r(86074),U=["fieldProps","proFieldProps"],V=["fieldProps","proFieldProps"],v="text",m=function(g){var l=g.fieldProps,b=g.proFieldProps,O=(0,W.Z)(g,U);return(0,h.jsx)(R.Z,(0,s.Z)({valueType:v,fieldProps:l,filedConfig:{valueType:v},proFieldProps:b},O))},P=function(g){var l=(0,D.Z)(g.open||!1,{value:g.open,onChange:g.onOpenChange}),b=(0,c.Z)(l,2),O=b[0],F=b[1];return(0,h.jsx)(T.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(Z){var z,ee=Z.getFieldValue(g.name||[]);return(0,h.jsx)(j.Z,(0,s.Z)((0,s.Z)({getPopupContainer:function(y){return y&&y.parentNode?y.parentNode:y},onOpenChange:F,content:(0,h.jsxs)("div",{style:{padding:"4px 0"},children:[(z=g.statusRender)===null||z===void 0?void 0:z.call(g,ee),g.strengthText?(0,h.jsx)("div",{style:{marginTop:10},children:(0,h.jsx)("span",{children:g.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},g.popoverProps),{},{open:O,children:g.children}))}})},$=function(g){var l=g.fieldProps,b=g.proFieldProps,O=(0,W.Z)(g,V),F=(0,x.useState)(!1),Q=(0,c.Z)(F,2),Z=Q[0],z=Q[1];return l!=null&&l.statusRender&&O.name?(0,h.jsx)(P,{name:O.name,statusRender:l==null?void 0:l.statusRender,popoverProps:l==null?void 0:l.popoverProps,strengthText:l==null?void 0:l.strengthText,open:Z,onOpenChange:z,children:(0,h.jsx)("div",{children:(0,h.jsx)(R.Z,(0,s.Z)({valueType:"password",fieldProps:(0,s.Z)((0,s.Z)({},(0,L.Z)(l,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(Y){var y;l==null||(y=l.onBlur)===null||y===void 0||y.call(l,Y),z(!1)},onClick:function(Y){var y;l==null||(y=l.onClick)===null||y===void 0||y.call(l,Y),z(!0)}}),proFieldProps:b,filedConfig:{valueType:v}},O))})}):(0,h.jsx)(R.Z,(0,s.Z)({valueType:"password",fieldProps:l,proFieldProps:b,filedConfig:{valueType:v}},O))},d=m;d.Password=$,d.displayName="ProFormComponent",S.Z=d},96042:function(se,S,r){r.d(S,{Z:function(){return L}});var c=r(5574),s=r.n(c),W=r(75870),D=r(34041),T=r(62435),j=r(86074);function L(x){var R=(0,T.useState)([]),h=s()(R,2),U=h[0],V=h[1];return(0,T.useEffect)(function(){(0,W.Ot)().then(function(v){v&&V(v.data.list)})},[]),(0,j.jsx)(D.Z,{onChange:function(m){x.onChange&&x.onChange(U[m])},placeholder:"\u9009\u62E9\u955C\u50CF\u4ED3\u5E93\uFF0C\u672C\u5730\u4F7F\u7528\u7559\u7A7A\u5373\u53EF",options:U.map(function(v,m){return{value:m,label:v.title+"("+v.serverAddress+")"}})})}},88583:function(se,S,r){r.r(S),r.d(S,{default:function(){return u}});var c=r(15009),s=r.n(c),W=r(99289),D=r.n(W),T=r(5574),j=r.n(T),L=r(6110),x=r(12010),R=r(37476),h=r(5966),U=r(62370),V=r(31418),v=r(14726),m=r(75891),P=r(78957),$=r(66309),d=r(96074),q=r(83062),g=r(84567),l=r(68508),b=r(62435),O=r(54006),F=r(18148),Q=r(5251),Z=r(80821),z=r(43425),ee=r(95556),Y=r(93246),y=r(28307),ue=r(96042),e=r(86074);function u(){var p=(0,O.useParams)(),t=(0,b.useRef)(),a=(0,b.useState)({force:!1}),I=j()(a,2),M=I[0],G=I[1],H=(0,b.useState)([]),J=j()(H,2),K=J[0],le=J[1],w=V.Z.useApp(),X=(0,b.useState)(1),te=j()(X,2),ne=te[0],A=te[1],oe=(0,b.useRef)();return(0,b.useEffect)(function(){var E;(E=t.current)===null||E===void 0||E.reload(),(0,F.Xn)({page:1,pageSize:9999,all:!0}).then(function(i){return le(i.data.list),!0})},[p,ne]),(0,e.jsx)(L._z,{header:{extra:[(0,e.jsx)(v.ZP,{type:"primary",children:(0,e.jsx)(O.Link,{to:"/image/create",children:"\u521B\u5EFA\u955C\u50CF"})},"create"),(0,e.jsx)(y.Z,{onFinish:function(){var i,n;!((i=t.current)===null||i===void 0)&&i.reloadAndRest&&((n=t.current)===null||n===void 0||n.reloadAndRest())}},"remote")]},children:(0,e.jsx)(x.Z,{rowKey:"Id",columns:[{title:"Id",ellipsis:!0,search:!1,dataIndex:"Id",width:200,render:function(i,n,_,f,o){return(0,e.jsx)(O.Link,{to:"/image/detail/"+n.Id,children:n.Id},"edit")}},{title:"\u540D\u79F0",dataIndex:"title",width:200,render:function(i,n,_,f,o){var B="";return K.map(function(C){n.RepoTags.map(function(re){re==C.tag&&(B=C.title)})}),(0,e.jsx)(m.Z.Text,{editable:{tooltip:"\u4FEE\u6539\u955C\u50CF\u5907\u6CE8\u540D\u79F0",onChange:function(){var C=D()(s()().mark(function ie(N){var de;return s()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,F.Fj)({tag:n.RepoTags[0],title:N});case 2:de=k.sent,A(ne+1),(0,Y.$h)(w,"\u4FEE\u6539\u955C\u50CF\u540D\u79F0\u6210\u529F");case 5:case"end":return k.stop()}},ie)}));function re(ie){return C.apply(this,arguments)}return re}()},children:B||"---"})}},{title:"Tag",dataIndex:"tag",render:function(i,n,_,f){return(0,e.jsx)(P.Z,{direction:"vertical",style:{textAlign:"left"},children:n.RepoTags.map(function(o,B){return(0,e.jsx)($.Z,{color:"#2db7f5",children:(0,e.jsx)(m.Z.Text,{copyable:!0,style:{color:"#ffffff"},children:o},B)},B)})},n.Id)}},{title:"\u5C3A\u5BF8",dataIndex:"size",ellipsis:!0,width:"120px",search:!1,sorter:function(i,n){return i.Size-n.Size},render:function(i,n,_,f){return(0,e.jsx)("div",{children:(0,Q.FI)(parseFloat(n.Size))},n.Id)}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(i,n,_,f){return(0,e.jsx)("div",{children:(0,Q.ZM)(n.Created*1e3)},n.Id)},sorter:function(i,n){return i.Created-n.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:"150px",render:function(i,n,_,f){return(0,e.jsxs)(P.Z,{split:(0,e.jsx)(d.Z,{type:"vertical"}),children:[(0,e.jsx)(O.Link,{to:"/image/detail/"+n.Id,children:(0,e.jsx)(q.Z,{title:"\u7BA1\u7406",children:(0,e.jsx)(z.Z,{})})},"edit"),(0,e.jsx)(O.Link,{to:"/app/create/image?imageId="+n.Id,children:(0,e.jsx)(q.Z,{title:"\u521B\u5EFA\u5BB9\u5668",children:(0,e.jsx)(ee.Z,{})})},"create")]})}}],request:function(){var E=D()(s()().mark(function i(n,_,f){var o;return s()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,F.KG)({tag:n.tag,title:n.title});case 2:if(o=C.sent,!(!o||!o.data||!o.data.list)){C.next=5;break}return C.abrupt("return",{data:[],success:!0,total:0});case 5:return C.abrupt("return",{data:o.data.list,success:!0,total:o.data.list.length});case 6:case"end":return C.stop()}},i)}));return function(i,n,_){return E.apply(this,arguments)}}(),pagination:{pageSize:10},search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:t,tableAlertOptionRender:function(i){var n=i.selectedRowKeys;return(0,e.jsxs)(P.Z,{size:16,children:[(0,e.jsx)(Z.Z,{danger:!0,type:"primary",action:function(){return(0,F.ao)({md5:n,force:M.force})},onSuccess:function(){var f,o;return!((f=t.current)===null||f===void 0)&&f.reloadAndRest&&((o=t.current)===null||o===void 0||o.reloadAndRest()),!0},onError:function(){var f,o;return!((f=t.current)===null||f===void 0)&&f.reset&&((o=t.current)===null||o===void 0||o.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",confirm:(0,e.jsxs)(P.Z,{style:{width:280},direction:"vertical",children:[(0,e.jsx)(m.Z.Text,{children:"\u5220\u9664\u955C\u50CF\u540E\u65E0\u6CD5\u6062\u590D,\u786E\u8BA4\u5417\uFF1F"}),(0,e.jsx)(g.Z,{name:"deleteVolume",onChange:function(f){return G({force:f.target.checked})},children:"\u5F3A\u5236\u5220\u9664\uFF1F"})]}),children:"\u6279\u91CF\u5220\u9664"}),(0,e.jsxs)(R.Y,{formRef:oe,title:"\u6279\u91CF\u63A8\u9001\u955C\u50CF",trigger:(0,e.jsx)(v.ZP,{children:"\u6279\u91CF\u63A8\u9001"}),onFinish:function(){var _=D()(s()().mark(function f(o){var B,C,re;return s()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,(0,F.KX)({tag:n,registryId:o.registryId});case 2:return re=N.sent,(B=t.current)===null||B===void 0||B.reload(),!((C=t.current)===null||C===void 0)&&C.clearSelected&&t.current.clearSelected(),N.abrupt("return",!0);case 6:case"end":return N.stop()}},f)}));return function(f){return _.apply(this,arguments)}}(),children:[(0,e.jsx)(h.Z,{label:"\u4ED3\u5E93Id",name:"registryId",hidden:!0}),(0,e.jsx)(U.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,e.jsxs)(e.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,e.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,e.jsx)(ue.Z,{onChange:function(f){var o;(o=oe.current)===null||o===void 0||o.setFieldValue("registryId",f.id)}})})]})]})},tableExtraRender:function(){var i;return(0,e.jsx)(l.Z,{mode:"horizontal",selectedKeys:[(i=p.type)!==null&&i!==void 0?i:"all"],items:[{label:(0,e.jsx)(O.Link,{to:"/image/list/all",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,e.jsx)(O.Link,{to:"/image/list/build",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})},toolBarRender:function(){return[(0,e.jsx)(Z.Z,{action:function(){return(0,F.c7)()},onSuccess:function(){var n,_;return!((n=t.current)===null||n===void 0)&&n.reloadAndRest&&((_=t.current)===null||_===void 0||_.reloadAndRest()),!0},onError:function(){var n,_;return!((n=t.current)===null||n===void 0)&&n.reset&&((_=t.current)===null||_===void 0||_.reset()),!0},messageSuccess:"\u6E05\u9664\u6210\u529F",confirm:"\u662F\u5426\u6E05\u7406\u672A\u4F7F\u7528\u6216\u662F\u672A\u8FD0\u884C\u7684\u955C\u50CF",children:"\u6E05\u7406\u672A\u4F7F\u7528\u955C\u50CF"})]}})})}},75870:function(se,S,r){r.d(S,{Ot:function(){return j},ZH:function(){return x},ix:function(){return h},t1:function(){return V}});var c=r(15009),s=r.n(c),W=r(99289),D=r.n(W),T=r(54006);function j(m){return L.apply(this,arguments)}function L(){return L=D()(s()().mark(function m(P){return s()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,T.request)("/api/common/registry/get-list",{method:"POST",data:P}));case 1:case"end":return d.stop()}},m)})),L.apply(this,arguments)}function x(m){return R.apply(this,arguments)}function R(){return R=D()(s()().mark(function m(P){return s()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,T.request)("/api/common/registry/create",{method:"POST",data:P}));case 1:case"end":return d.stop()}},m)})),R.apply(this,arguments)}function h(m){return U.apply(this,arguments)}function U(){return U=D()(s()().mark(function m(P){return s()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,T.request)("/api/common/registry/delete",{method:"POST",data:P}));case 1:case"end":return d.stop()}},m)})),U.apply(this,arguments)}function V(m){return v.apply(this,arguments)}function v(){return v=D()(s()().mark(function m(P){return s()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,T.request)("/api/common/registry/get-detail",{method:"POST",data:P}));case 1:case"end":return d.stop()}},m)})),v.apply(this,arguments)}},66309:function(se,S,r){r.d(S,{Z:function(){return ue}});var c=r(62435),s=r(97937),W=r(93967),D=r.n(W),T=r(98787),j=r(69760),L=r(45353),x=r(53124),R=r(54548),h=r(10274),U=r(14747),V=r(45503),v=r(91945);const m=e=>{const{paddingXXS:u,lineWidth:p,tagPaddingHorizontal:t,componentCls:a,calc:I}=e,M=I(t).sub(p).equal(),G=I(u).sub(p).equal();return{[a]:Object.assign(Object.assign({},(0,U.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:M,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,R.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${a}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${a}-close-icon`]:{marginInlineStart:G,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${a}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},["&-checkable"]:{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${a}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},["&-hidden"]:{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:M}}),[`${a}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},P=e=>{const{lineWidth:u,fontSizeIcon:p,calc:t}=e,a=e.fontSizeSM;return(0,V.TS)(e,{tagFontSize:a,tagLineHeight:(0,R.bf)(t(e.lineHeightSM).mul(a).equal()),tagIconSize:t(p).sub(t(u).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},$=e=>({defaultBg:new h.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var d=(0,v.I$)("Tag",e=>{const u=P(e);return m(u)},$),q=function(e,u){var p={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&u.indexOf(t)<0&&(p[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)u.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(p[t[a]]=e[t[a]]);return p},l=c.forwardRef((e,u)=>{const{prefixCls:p,style:t,className:a,checked:I,onChange:M,onClick:G}=e,H=q(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:J,tag:K}=c.useContext(x.E_),le=oe=>{M==null||M(!I),G==null||G(oe)},w=J("tag",p),[X,te,ne]=d(w),A=D()(w,`${w}-checkable`,{[`${w}-checkable-checked`]:I},K==null?void 0:K.className,a,te,ne);return X(c.createElement("span",Object.assign({},H,{ref:u,style:Object.assign(Object.assign({},t),K==null?void 0:K.style),className:A,onClick:le})))}),b=r(98719);const O=e=>(0,b.Z)(e,(u,p)=>{let{textColor:t,lightBorderColor:a,lightColor:I,darkColor:M}=p;return{[`${e.componentCls}${e.componentCls}-${u}`]:{color:t,background:I,borderColor:a,"&-inverse":{color:e.colorTextLightSolid,background:M,borderColor:M},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var F=(0,v.bk)(["Tag","preset"],e=>{const u=P(e);return O(u)},$);function Q(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const Z=(e,u,p)=>{const t=Q(p);return{[`${e.componentCls}${e.componentCls}-${u}`]:{color:e[`color${p}`],background:e[`color${t}Bg`],borderColor:e[`color${t}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var z=(0,v.bk)(["Tag","status"],e=>{const u=P(e);return[Z(u,"success","Success"),Z(u,"processing","Info"),Z(u,"error","Error"),Z(u,"warning","Warning")]},$),ee=function(e,u){var p={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&u.indexOf(t)<0&&(p[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)u.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(p[t[a]]=e[t[a]]);return p};const Y=(e,u)=>{const{prefixCls:p,className:t,rootClassName:a,style:I,children:M,icon:G,color:H,onClose:J,closeIcon:K,closable:le,bordered:w=!0}=e,X=ee(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable","bordered"]),{getPrefixCls:te,direction:ne,tag:A}=c.useContext(x.E_),[oe,E]=c.useState(!0);c.useEffect(()=>{"visible"in X&&E(X.visible)},[X.visible]);const i=(0,T.o2)(H),n=(0,T.yT)(H),_=i||n,f=Object.assign(Object.assign({backgroundColor:H&&!_?H:void 0},A==null?void 0:A.style),I),o=te("tag",p),[B,C,re]=d(o),ie=D()(o,A==null?void 0:A.className,{[`${o}-${H}`]:_,[`${o}-has-color`]:H&&!_,[`${o}-hidden`]:!oe,[`${o}-rtl`]:ne==="rtl",[`${o}-borderless`]:!w},t,a,C,re),N=ae=>{ae.stopPropagation(),J==null||J(ae),!ae.defaultPrevented&&E(!1)},[,de]=(0,j.Z)({closable:le,closeIcon:K!=null?K:A==null?void 0:A.closeIcon,customCloseIconRender:ae=>ae===null?c.createElement(s.Z,{className:`${o}-close-icon`,onClick:N}):c.createElement("span",{className:`${o}-close-icon`,onClick:N},ae),defaultCloseIcon:null,defaultClosable:!1}),ce=typeof X.onClick=="function"||M&&M.type==="a",k=G||null,pe=k?c.createElement(c.Fragment,null,k,M&&c.createElement("span",null,M)):M,_e=c.createElement("span",Object.assign({},X,{ref:u,className:ie,style:f}),pe,de,i&&c.createElement(F,{key:"preset",prefixCls:o}),n&&c.createElement(z,{key:"status",prefixCls:o}));return B(ce?c.createElement(L.Z,{component:"Tag"},_e):_e)},y=c.forwardRef(Y);y.CheckableTag=l;var ue=y}}]);
