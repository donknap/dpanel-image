"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4316],{89035:function(K,O,e){e.d(O,{Z:function(){return R}});var x=e(87462),n=e(62435),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M516 673c0 4.4 3.4 8 7.5 8h185c4.1 0 7.5-3.6 7.5-8v-48c0-4.4-3.4-8-7.5-8h-185c-4.1 0-7.5 3.6-7.5 8v48zm-194.9 6.1l192-161c3.8-3.2 3.8-9.1 0-12.3l-192-160.9A7.95 7.95 0 00308 351v62.7c0 2.4 1 4.6 2.9 6.1L420.7 512l-109.8 92.2a8.1 8.1 0 00-2.9 6.1V673c0 6.8 7.9 10.5 13.1 6.1zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"code",theme:"outlined"},o=D,c=e(84089),P=function(v,E){return n.createElement(c.Z,(0,x.Z)({},v,{ref:E,icon:o}))},f=n.forwardRef(P),R=f},27496:function(K,O,e){e.d(O,{Z:function(){return R}});var x=e(87462),n=e(62435),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"},o=D,c=e(84089),P=function(v,E){return n.createElement(c.Z,(0,x.Z)({},v,{ref:E,icon:o}))},f=n.forwardRef(P),R=f},80821:function(K,O,e){e.d(O,{Z:function(){return E}});var x=e(5574),n=e.n(x),D=e(93246),o=e(54006),c=e(31418),P=e(86738),f=e(14726),R=e(83062),m=e(62435),v=e(86074);function E(t){var h=(0,m.useState)(!1),_=n()(h,2),d=_[0],Z=_[1],g=c.Z.useApp(),p=(0,o.useIntl)(),j=function(){Z(!0),t.action().then(function(r){if(Z(!1),typeof t.onSuccess=="function"&&t.onSuccess(r),t.messageSuccess){var S="";t.messageSuccess.indexOf(".")>-1?S=p.formatMessage({id:t.messageSuccess}):S=t.messageSuccess,t.asynced?(0,D.Rk)(g,S):(0,D.$h)(g,S)}}).catch(function(r){Z(!1),typeof t.onError=="function"&&t.onError(r)})};return t.confirm?(0,v.jsx)(P.Z,{style:{width:500},title:"\u63D0\u793A",description:t.confirm,onConfirm:j,okText:"Yes",cancelText:"No",children:(0,v.jsx)(f.ZP,{disabled:t.disabled,icon:t.icon,loading:d,danger:t.danger,type:t.type,children:t.children})}):(0,v.jsx)(R.Z,{title:t.tips,children:(0,v.jsx)(f.ZP,{disabled:t.disabled,icon:t.icon,loading:d,onClick:j,danger:t.danger,type:t.type,children:t.children})})}},94359:function(K,O,e){e.d(O,{Z:function(){return h}});var x=e(62435),n=e(3089),D=e(98165),o=e(18429),c=e(8751),P=e(14313),f=e(30159),R=e(87740),m=e(66309),v=e(83062),E=e(54006),t=e(86074);function h(_){var d=(0,t.jsx)(t.Fragment,{});return _.status=="0"&&(d=(0,t.jsx)(m.Z,{icon:(0,t.jsx)(n.Z,{}),color:"default",children:"waiting"})),_.status=="10"&&(d=(0,t.jsx)(m.Z,{icon:(0,t.jsx)(D.Z,{spin:!0}),color:"processing",children:"processing"})),_.status=="20"&&(d=(0,t.jsx)(m.Z,{icon:(0,t.jsx)(o.Z,{}),color:"error",children:"error"})),_.status=="30"&&(d=(0,t.jsx)(m.Z,{icon:(0,t.jsx)(c.Z,{}),color:"success",children:"success"})),_.status=="running"&&(d=(0,t.jsx)(m.Z,{icon:(0,t.jsx)(P.Z,{}),color:"success",children:_.status})),_.status=="paused"&&(d=(0,t.jsx)(m.Z,{icon:(0,t.jsx)(f.Z,{}),children:_.status})),_.status=="restarting"&&(d=(0,t.jsx)(m.Z,{icon:(0,t.jsx)(R.Z,{}),children:_.status})),(_.status=="exited"||_.status=="dead"||_.status=="removing")&&(d=(0,t.jsx)(m.Z,{icon:(0,t.jsx)(o.Z,{}),color:"warning",children:_.status})),_.link&&(d=(0,t.jsx)(E.Link,{to:_.link,children:d})),_.message&&(d=(0,t.jsx)(v.Z,{placement:_.message.placement,title:_.message.content,children:d})),(0,t.jsx)(t.Fragment,{children:d})}},78498:function(K,O,e){e.d(O,{Z:function(){return P}});var x=e(25035),n=e(78957),D=e(83062),o=e(62435),c=e(86074);function P(f){return(0,c.jsxs)(n.Z,{children:[f.title,(0,c.jsx)(D.Z,{title:f.help,children:(0,c.jsx)(x.Z,{})})]})}},14668:function(K,O,e){e.r(O),e.d(O,{default:function(){return ie}});var x=e(15009),n=e.n(x),D=e(99289),o=e.n(D),c=e(5574),P=e.n(c),f=e(6110),R=e(12010),m=e(31418),v=e(14726),E=e(75891),t=e(78957),h=e(66309),_=e(96074),d=e(83062),Z=e(68508),g=e(54006),p=e(27496),j=e(43425),l=e(95591),r=e(45742),S=e(89035),u=e(94359),ne=e(78498),k=e(60335),q=e(80821),b=e(62435),ee=e(62597),ae=e(87662),re=e(93246),se=e(84410),a=e(86074);function ue(I){var V=(0,b.useState)(),z=P()(V,2),G=z[0],H=z[1];(0,b.useEffect)(function(){(0,se.i)({id:I.md5}).then(function(L){H(L)})},[I.md5,I.key]);var J=function(y){if(!y.data||!y.data.cpu_stats||!y.data.cpu_stats.system_cpu_usage||!y.data.precpu_stats.system_cpu_usage)return"";var Y=y.data.cpu_stats.cpu_usage.total_usage-y.data.precpu_stats.cpu_usage.total_usage,w=y.data.cpu_stats.system_cpu_usage-y.data.precpu_stats.system_cpu_usage;return"Cpu: ".concat((Y/w*y.data.cpu_stats.online_cpus*100).toFixed(2)," %")},N=function(y){return!y.data||!y.data.memory_stats||!y.data.memory_stats.usage?"":(0,a.jsx)(t.Z,{children:"\u5185\u5B58: ".concat((y.data.memory_stats.usage/y.data.memory_stats.limit*100).toFixed(2)," %")})};return(0,a.jsxs)(t.Z,{direction:"vertical",children:[(0,a.jsx)(J,{data:G},"cpu"),(0,a.jsx)(N,{data:G},"memory")]})}function ie(){var I=(0,b.useRef)(),V=(0,b.useState)("127.0.0.1"),z=P()(V,2),G=z[0],H=z[1],J=(0,b.useState)(),N=P()(J,2),L=N[0],y=N[1],Y=(0,b.useState)(1),w=P()(Y,2),te=w[0],le=w[1],oe=m.Z.useApp();return(0,b.useEffect)(function(){(0,ae.pe)({groupName:"setting",name:"server"}).then(function(B){B.data.setting.value.serverIp&&H(B.data.setting.value.serverIp)})},[]),(0,a.jsx)(f._z,{header:{extra:[(0,a.jsx)(v.ZP,{type:"primary",children:(0,a.jsx)(g.Link,{to:"/app/create/image",children:"\u521B\u5EFA\u5BB9\u5668"})},"create")]},children:(0,a.jsx)(R.Z,{actionRef:I,columns:[{title:"\u7AD9\u70B9\u540D\u79F0",ellipsis:!0,dataIndex:"siteTitle",render:function(A,s,C,T,i){var M="";return L!=null&&L.siteList&&L.siteList.map(function(F){F.containerInfo.ID==s.Id&&(M=F.siteTitle)}),(0,a.jsx)(E.Z.Text,{editable:{tooltip:"\u4FEE\u6539\u955C\u50CF\u5907\u6CE8\u540D\u79F0",onChange:function(){var F=o()(n()().mark(function W(Q){var X,ce;return n()().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(Q!=""){$.next=2;break}return $.abrupt("return");case 2:return $.next=4,(0,ee.lK)({md5:s.Id,title:Q});case 4:ce=$.sent,M=Q,(0,re.$h)(oe,"\u4FEE\u6539\u5BB9\u5668\u540D\u79F0\u6210\u529F"),!((X=I.current)===null||X===void 0)&&X.reload&&I.current.reload();case 8:case"end":return $.stop()}},W)}));function U(W){return F.apply(this,arguments)}return U}()},children:M==""?(0,a.jsx)(g.Link,{to:s.Id?"/app/detail/edit/".concat(s.Id):"#",children:s.Names[0]}):(0,a.jsx)(g.Link,{to:s.Id?"/app/detail/edit/".concat(s.Id):"#",children:M})})}},{title:(0,a.jsx)(ne.Z,{title:"\u5BF9\u5916\u8BBF\u95EE",help:"\u5BF9\u5916\u66B4\u9732\u7AEF\u53E3\u65F6\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u670D\u52A1\u5668ip(\u516C\u7F51,\u5185\u7F51,127.0.0.1)\u52A0\u7AEF\u53E3\u7684\u5F62\u5F0F\u8FDB\u884C\u8BBF\u95EE\u3002\u5982\u679C\u9700\u8981\u7ED1\u5B9A\u57DF\u540D,\u8BF7\u6DFB\u52A0\u7AD9\u70B9\u7ED1\u5B9A\u57DF\u540D\u8F6C\u53D1."}),dataIndex:"ports",search:!1,render:function(A,s,C,T){return(0,a.jsxs)(t.Z,{direction:"vertical",style:{textAlign:"left"},children:[s==null?void 0:s.Ports.map(function(i,M){return(0,a.jsx)(t.Z.Compact,{children:(0,a.jsx)(h.Z,{color:i.PublicPort?"#2db7f5":"warning",icon:i.PublicPort?(0,a.jsx)(p.Z,{}):"",children:i.PublicPort?(0,a.jsx)("a",{href:"http://".concat(G,":").concat(i.PublicPort),target:"_blank",children:"".concat(i.PublicPort?i.IP+":"+i.PublicPort+"->":"").concat(i.PrivatePort,"/").concat(i.Type)},"link".concat(M)):"".concat(i.PrivatePort,"/").concat(i.Type)})},"space".concat(M))}),(L==null?void 0:L.domainList)&&L.domainList.map(function(i,M){if(s.Names.indexOf(i.containerId)>-1)return(0,a.jsx)(h.Z,{color:"blue",icon:(0,a.jsx)(p.Z,{}),children:(0,a.jsx)("a",{href:"".concat(i.setting.enableSSL?"https://"+i.serverName:"http://"+i.serverName),target:"_blank",children:i.setting.enableSSL?"https://"+i.serverName:"http://"+i.serverName})},"domain".concat(M))})]})}},{title:"\u5360\u7528\u7387",width:150,search:!1,render:function(A,s,C,T,i){return(0,a.jsx)(ue,{md5:s.Id},te)}},{title:"\u8FD0\u884C\u72B6\u6001",dataIndex:["container","status"],search:!1,width:120,render:function(A,s,C,T){return[(0,a.jsx)("div",{children:(0,a.jsx)(u.Z,{status:s.State,message:{content:s.Status,placement:"top"}})},"status")]}},{title:"\u6240\u5C5E\u955C\u50CF",search:!1,ellipsis:!0,width:150,render:function(A,s,C,T){return(0,a.jsx)(E.Z.Text,{ellipsis:{tooltip:s.Image},children:(0,a.jsx)(g.Link,{to:"/image/detail/".concat(s.ImageID),children:s.Image})})}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:200,render:function(A,s,C,T){return(0,a.jsxs)(t.Z,{split:(0,a.jsx)(_.Z,{type:"vertical"}),children:[(0,a.jsx)(g.Link,{to:"/app/detail/edit/"+s.Id,children:(0,a.jsx)(d.Z,{title:"\u7BA1\u7406\u955C\u50CF",children:(0,a.jsx)(j.Z,{})})},"edit"),s.State=="running"&&(0,a.jsx)(g.Link,{to:"/app/detail/file/"+s.Id+"?tab=file",children:(0,a.jsx)(d.Z,{title:"\u6587\u4EF6\u7BA1\u7406",children:(0,a.jsx)(l.Z,{})})},"file"),s.State=="running"&&(0,a.jsx)(g.Link,{to:"/app/detail/log/"+s.Id+"?tab=log",children:(0,a.jsx)(d.Z,{title:"\u8FD0\u884C\u65E5\u5FD7",children:(0,a.jsx)(r.Z,{})})},"log"),s.State=="running"&&(0,a.jsx)(g.Link,{target:"_blank",to:"/console/"+s.Id,children:(0,a.jsx)(d.Z,{title:"\u7EC8\u7AEF",children:(0,a.jsx)(S.Z,{})})},"console")]})}}],rowKey:"Id",request:function(){var B=o()(n()().mark(function A(s,C,T){var i,M;return n()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,k.IE)({tag:s.Names,siteTitle:s.siteTitle,md5:s.Id});case 2:return M=U.sent,y(M.data),le(te+1),U.abrupt("return",{data:(i=M.data.list)!==null&&i!==void 0?i:[],success:!0,total:M.data.list.length});case 6:case"end":return U.stop()}},A)}));return function(A,s,C){return B.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(A){var s=A.selectedRowKeys;return(0,a.jsx)(t.Z,{size:16,children:(0,a.jsx)(q.Z,{danger:!0,type:"primary",action:function(){var T=s.map(function(){var i=o()(n()().mark(function M(F){return n()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,ee.Ct)({md5:F,deleteImage:!1,deleteVolume:!1});case 2:return W.abrupt("return",W.sent);case 3:case"end":return W.stop()}},M)}));return function(M){return i.apply(this,arguments)}}());return T[0]},onSuccess:function(){var T,i;return!((T=I.current)===null||T===void 0)&&T.reloadAndRest&&((i=I.current)===null||i===void 0||i.reloadAndRest()),!0},onError:function(){var T,i;return!((T=I.current)===null||T===void 0)&&T.reset&&((i=I.current)===null||i===void 0||i.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})},pagination:{pageSize:10},search:{collapsed:!1},tableExtraRender:function(){return(0,a.jsx)(Z.Z,{mode:"horizontal",selectedKeys:["list"],items:[{label:(0,a.jsx)(g.Link,{to:"/app/list",replace:!0,children:"\u5BB9\u5668\u5217\u8868"}),key:"list"},{label:(0,a.jsx)(g.Link,{to:"/app/list/recycle",replace:!0,children:"\u56DE\u6536\u7AD9"}),key:"recycle"}]})},toolBarRender:function(){return[(0,a.jsx)(q.Z,{action:function(){return(0,k.KK)()},onSuccess:function(){var s,C;return!((s=I.current)===null||s===void 0)&&s.reloadAndRest&&((C=I.current)===null||C===void 0||C.reloadAndRest()),!0},onError:function(){var s,C;return!((s=I.current)===null||s===void 0)&&s.reset&&((C=I.current)===null||C===void 0||C.reset()),!0},messageSuccess:"\u6E05\u9664\u6210\u529F",confirm:"\u662F\u5426\u6E05\u7406\u5DF2\u505C\u6B62\u7684\u5BB9\u5668",children:"\u6E05\u7406\u5DF2\u505C\u6B62\u5BB9\u5668"})]}})})}},62597:function(K,O,e){e.d(O,{$G:function(){return P},Ct:function(){return _},Tb:function(){return v},cl:function(){return R},iE:function(){return t},lK:function(){return p},xb:function(){return Z}});var x=e(15009),n=e.n(x),D=e(99289),o=e.n(D),c=e(54006);function P(l){return f.apply(this,arguments)}function f(){return f=o()(n()().mark(function l(r){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,c.request)("/api/app/site/create-by-image",{method:"POST",data:r}));case 1:case"end":return u.stop()}},l)})),f.apply(this,arguments)}function R(l){return m.apply(this,arguments)}function m(){return m=o()(n()().mark(function l(r){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,c.request)("/api/app/site/get-list",{method:"POST",data:r}));case 1:case"end":return u.stop()}},l)})),m.apply(this,arguments)}function v(l){return E.apply(this,arguments)}function E(){return E=o()(n()().mark(function l(r){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,c.request)("/api/app/log/run",{method:"POST",data:r});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},l)})),E.apply(this,arguments)}function t(l){return h.apply(this,arguments)}function h(){return h=o()(n()().mark(function l(r){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,c.request)("/api/app/site/get-detail",{data:r,method:"POST"});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},l)})),h.apply(this,arguments)}function _(l){return d.apply(this,arguments)}function d(){return d=o()(n()().mark(function l(r){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,c.request)("/api/app/container/delete",{method:"POST",data:r}));case 1:case"end":return u.stop()}},l)})),d.apply(this,arguments)}function Z(l){return g.apply(this,arguments)}function g(){return g=o()(n()().mark(function l(r){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,c.request)("/api/app/site/delete",{method:"POST",data:r}));case 1:case"end":return u.stop()}},l)})),g.apply(this,arguments)}function p(l){return j.apply(this,arguments)}function j(){return j=o()(n()().mark(function l(r){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,c.request)("/api/app/site/update-title",{method:"POST",data:r});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},l)})),j.apply(this,arguments)}},84410:function(K,O,e){e.d(O,{a:function(){return R},i:function(){return P}});var x=e(15009),n=e.n(x),D=e(99289),o=e.n(D),c=e(54006);function P(v){return f.apply(this,arguments)}function f(){return f=o()(n()().mark(function v(E){return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,c.request)("/api/app/container/get-stat-info",{method:"POST",data:E}));case 1:case"end":return h.stop()}},v)})),f.apply(this,arguments)}function R(v){return m.apply(this,arguments)}function m(){return m=o()(n()().mark(function v(E){return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,c.request)("/api/app/container/get-process-info",{method:"POST",data:E}));case 1:case"end":return h.stop()}},v)})),m.apply(this,arguments)}},60335:function(K,O,e){e.d(O,{IE:function(){return R},IW:function(){return P},KK:function(){return _},LJ:function(){return Z},eE:function(){return t},jV:function(){return v}});var x=e(15009),n=e.n(x),D=e(99289),o=e.n(D),c=e(54006);function P(p){return f.apply(this,arguments)}function f(){return f=o()(n()().mark(function p(j){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/app/container/status",{method:"POST",data:j}));case 1:case"end":return r.stop()}},p)})),f.apply(this,arguments)}function R(p){return m.apply(this,arguments)}function m(){return m=o()(n()().mark(function p(j){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/app/container/get-list",{data:j,method:"POST"}));case 1:case"end":return r.stop()}},p)})),m.apply(this,arguments)}function v(p){return E.apply(this,arguments)}function E(){return E=o()(n()().mark(function p(j){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/app/container/get-detail",{data:j,method:"POST"}));case 1:case"end":return r.stop()}},p)})),E.apply(this,arguments)}function t(p){return h.apply(this,arguments)}function h(){return h=o()(n()().mark(function p(j){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/app/container/update",{data:j,method:"POST"}));case 1:case"end":return r.stop()}},p)})),h.apply(this,arguments)}function _(){return d.apply(this,arguments)}function d(){return d=o()(n()().mark(function p(){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,c.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return l.stop()}},p)})),d.apply(this,arguments)}function Z(p){return g.apply(this,arguments)}function g(){return g=o()(n()().mark(function p(j){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/app/container/export",{method:"POST",data:j,responseType:"blob"}));case 1:case"end":return r.stop()}},p)})),g.apply(this,arguments)}}}]);
