"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[536],{50067:function(F,D,e){e.d(D,{Z:function(){return O}});var v=e(87462),a=e(62435),j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M916 210H376c-17.7 0-32 14.3-32 32v236H108c-17.7 0-32 14.3-32 32v272c0 17.7 14.3 32 32 32h540c17.7 0 32-14.3 32-32V546h236c17.7 0 32-14.3 32-32V242c0-17.7-14.3-32-32-32zm-504 68h200v200H412V278zm-68 468H144V546h200v200zm268 0H412V546h200v200zm268-268H680V278h200v200z"}}]},name:"build",theme:"outlined"},o=j,c=e(84089),M=function(g,T){return a.createElement(c.Z,(0,v.Z)({},g,{ref:T,icon:o}))},P=a.forwardRef(M),O=P},64317:function(F,D,e){var v=e(1413),a=e(45987),j=e(22270),o=e(62435),c=e(66758),M=e(33468),P=e(86074),O=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],h=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],g=function(p,d){var E=p.fieldProps,f=p.children,l=p.params,x=p.proFieldProps,I=p.mode,A=p.valueEnum,S=p.request,B=p.showSearch,i=p.options,n=(0,a.Z)(p,O),m=(0,o.useContext)(c.Z);return(0,P.jsx)(M.Z,(0,v.Z)((0,v.Z)({valueEnum:(0,j.h)(A),request:S,params:l,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,v.Z)({options:i,mode:I,showSearch:B,getPopupContainer:m.getPopupContainer},E),ref:d,proFieldProps:x},n),{},{children:f}))},T=o.forwardRef(function(s,p){var d=s.fieldProps,E=s.children,f=s.params,l=s.proFieldProps,x=s.mode,I=s.valueEnum,A=s.request,S=s.options,B=(0,a.Z)(s,h),i=(0,v.Z)({options:S,mode:x||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},d),n=(0,o.useContext)(c.Z);return(0,P.jsx)(M.Z,(0,v.Z)((0,v.Z)({valueEnum:(0,j.h)(I),request:A,params:f,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,v.Z)({getPopupContainer:n.getPopupContainer},i),ref:p,proFieldProps:l},B),{},{children:E}))}),t=o.forwardRef(g),y=T,u=t;u.SearchSelect=y,u.displayName="ProFormComponent",D.Z=u},80821:function(F,D,e){e.d(D,{Z:function(){return T}});var v=e(5574),a=e.n(v),j=e(93246),o=e(54006),c=e(31418),M=e(86738),P=e(14726),O=e(83062),h=e(62435),g=e(86074);function T(t){var y=(0,h.useState)(!1),u=a()(y,2),s=u[0],p=u[1],d=c.Z.useApp(),E=(0,o.useIntl)(),f=function(){p(!0),t.action().then(function(x){if(p(!1),typeof t.onSuccess=="function"&&t.onSuccess(x),t.messageSuccess){var I="";t.messageSuccess.indexOf(".")>-1?I=E.formatMessage({id:t.messageSuccess}):I=t.messageSuccess,t.asynced?(0,j.Rk)(d,I):(0,j.$h)(d,I)}}).catch(function(x){p(!1),typeof t.onError=="function"&&t.onError(x)})};return t.confirm?(0,g.jsx)(M.Z,{style:{width:500},title:"\u63D0\u793A",description:t.confirm,onConfirm:f,okText:"Yes",cancelText:"No",children:(0,g.jsx)(P.ZP,{disabled:t.disabled,icon:t.icon,loading:s,danger:t.danger,type:t.type,children:t.children})}):(0,g.jsx)(O.Z,{title:t.tips,children:(0,g.jsx)(P.ZP,{disabled:t.disabled,icon:t.icon,loading:s,onClick:f,danger:t.danger,type:t.type,children:t.children})})}},94359:function(F,D,e){e.d(D,{Z:function(){return y}});var v=e(62435),a=e(3089),j=e(98165),o=e(18429),c=e(8751),M=e(14313),P=e(30159),O=e(87740),h=e(66309),g=e(83062),T=e(54006),t=e(86074);function y(u){var s=(0,t.jsx)(t.Fragment,{});return u.status=="0"&&(s=(0,t.jsx)(h.Z,{icon:(0,t.jsx)(a.Z,{}),color:"default",children:"waiting"})),u.status=="10"&&(s=(0,t.jsx)(h.Z,{icon:(0,t.jsx)(j.Z,{spin:!0}),color:"processing",children:"processing"})),u.status=="20"&&(s=(0,t.jsx)(h.Z,{icon:(0,t.jsx)(o.Z,{}),color:"error",children:"error"})),u.status=="30"&&(s=(0,t.jsx)(h.Z,{icon:(0,t.jsx)(c.Z,{}),color:"success",children:"success"})),u.status=="running"&&(s=(0,t.jsx)(h.Z,{icon:(0,t.jsx)(M.Z,{}),color:"success",children:u.status})),u.status=="paused"&&(s=(0,t.jsx)(h.Z,{icon:(0,t.jsx)(P.Z,{}),children:u.status})),u.status=="restarting"&&(s=(0,t.jsx)(h.Z,{icon:(0,t.jsx)(O.Z,{}),children:u.status})),(u.status=="exited"||u.status=="dead"||u.status=="removing")&&(s=(0,t.jsx)(h.Z,{icon:(0,t.jsx)(o.Z,{}),color:"warning",children:u.status})),u.link&&(s=(0,t.jsx)(T.Link,{to:u.link,children:s})),u.message&&(s=(0,t.jsx)(g.Z,{placement:u.message.placement,title:u.message.content,children:s})),(0,t.jsx)(t.Fragment,{children:s})}},71623:function(F,D,e){e.r(D),e.d(D,{default:function(){return r}});var v=e(15009),a=e.n(v),j=e(99289),o=e.n(j),c=e(37476),M=e(6110),P=e(90639),O=e(78957),h=e(83062),g=e(66309),T=e(96074),t=e(14726),y=e(68508),u=e(54006),s=e(18148),p=e(94359),d=e(20713),E=e(43425),f=e(45742),l=e(80821),x=e(62435),I=e(97961),A=e(50067),S=e(184),B=e(64317),i=e(62370),n=e(86074);function m(){return(0,n.jsxs)(S.a,{title:"\u6784\u5EFA\u591A\u5E73\u53F0\u955C\u50CF",trigger:(0,n.jsx)(u.Link,{to:"#",children:(0,n.jsx)(h.Z,{title:"\u591A\u5E73\u53F0\u6784\u5EFA",children:(0,n.jsx)(A.Z,{})})}),children:[(0,n.jsx)(B.Z,{name:"platform",label:"\u6784\u5EFA\u5E73\u53F0",tooltip:"Dockerfile\u4E2D\u6839\u636E\u6784\u5EFA\u53C2\u6570 TARGETARCH \u8FDB\u884C\u533A\u5206\u5E73\u53F0",options:I.ii.map(function($){return $.name}),mode:"multiple"}),(0,n.jsx)(i.Z,{label:"\u63A7\u5236\u53F0\u8F93\u51FA",name:"console",children:(0,n.jsx)(d.ZP,{theme:"dark",style:{marginTop:"10px",backgroundColor:"#282c34"},height:"350px",extensions:[d.tk.lineWrapping]})})]})}function r(){var $=[{title:"\u540D\u79F0",render:function(Z,_,L,R){return(0,n.jsx)(O.Z,{direction:"vertical",style:{textAlign:"left"},children:_.imageInfo&&(0,n.jsx)(u.Link,{to:"/image/detail/".concat(_.imageInfo.info.Id),children:(0,n.jsxs)(h.Z,{title:"\u67E5\u770B\u955C\u50CF",children:[" ",_.tag]})},"detail")},_.id)}},{title:"\u6700\u65B0Tag",dataIndex:"tag",search:!1,render:function(Z,_,L,R){return _.imageInfo?_.imageInfo.info.Id==""?(0,n.jsx)(g.Z,{children:"none"},"none"):(0,n.jsx)(O.Z,{direction:"vertical",style:{textAlign:"left"},children:_.imageInfo.info.RepoTags.map(function(C,b){return(0,n.jsx)(g.Z,{color:"#2db7f5",children:C},b)})},_.id):(0,n.jsx)(n.Fragment,{})}},{title:"\u955C\u50CFId",ellipsis:!0,search:!1,copyable:!0,dataIndex:["imageInfo","info","Id"],width:200},{title:"\u6784\u5EFA\u72B6\u6001",width:"100px",ellipsis:!0,search:!1,render:function(Z,_,L,R){return[(0,n.jsx)("div",{children:(0,n.jsx)(p.Z,{status:_.status},_.id)},_.id)]}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:150,render:function(Z,_,L,R){return(0,n.jsxs)(O.Z,{split:(0,n.jsx)(T.Z,{type:"vertical"}),children:[(0,n.jsx)(u.Link,{to:"/image/create?id="+_.id,type:"link",children:(0,n.jsx)(h.Z,{title:"\u518D\u6B21\u6784\u5EFA",children:(0,n.jsx)(E.Z,{})})},"rebuild"),(0,n.jsx)(c.Y,{title:"\u6784\u5EFA\u65E5\u5FD7",submitter:!1,trigger:(0,n.jsx)(u.Link,{to:"#",children:(0,n.jsx)(h.Z,{title:"\u6784\u5EFA\u65E5\u5FD7",children:(0,n.jsx)(f.Z,{})})},_.id),children:(0,n.jsx)(d.ZP,{theme:"dark",height:"500px",value:_.message})},"log"),(0,n.jsx)(m,{})]})}}],K=(0,x.useRef)();return(0,n.jsx)(M._z,{header:{extra:[(0,n.jsx)(t.ZP,{type:"primary",children:(0,n.jsx)(u.Link,{to:"/image/create",children:"\u521B\u5EFA\u955C\u50CF"})},"create"),(0,n.jsx)(t.ZP,{children:"\u62C9\u53D6\u955C\u50CF"},"pull")]},children:(0,n.jsx)(P.Z,{actionRef:K,rowKey:"id",columns:$,request:function(){var W=o()(a()().mark(function Z(_,L,R){var C,b,z;return a()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,s.Xn)({page:(C=_.current)!==null&&C!==void 0?C:1,pageSize:(b=_.pageSize)!==null&&b!==void 0?b:10});case 2:return z=U.sent,U.abrupt("return",{data:z.data.list,success:!0,total:z.data.total});case 4:case"end":return U.stop()}},Z)}));return function(Z,_,L){return W.apply(this,arguments)}}(),pagination:{pageSize:10},search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(Z){var _=Z.selectedRowKeys;return(0,n.jsx)(O.Z,{size:16,children:(0,n.jsx)(l.Z,{danger:!0,type:"primary",action:function(){return(0,s.$q)({id:_})},onSuccess:function(){var R,C;return!((R=K.current)===null||R===void 0)&&R.reloadAndRest&&((C=K.current)===null||C===void 0||C.reloadAndRest()),!0},onError:function(){var R,C;return!((R=K.current)===null||R===void 0)&&R.reset&&((C=K.current)===null||C===void 0||C.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})},tableExtraRender:function(){return(0,n.jsx)(y.Z,{mode:"horizontal",selectedKeys:["build"],items:[{label:(0,n.jsx)(u.Link,{to:"/image/list/all",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,n.jsx)(u.Link,{to:"/image/list/build",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})}})})}},97961:function(F,D,e){e.d(D,{MF:function(){return s},_2:function(){return y},fN:function(){return P},hG:function(){return T},ii:function(){return M},vC:function(){return h}});var v=e(15009),a=e.n(v),j=e(99289),o=e.n(j),c=e(54006),M=[{name:"amd64",arch:"amd64"},{name:"arm64",arch:"arm64"},{name:"i386",arch:"386"},{name:"arm/v6",arch:"arm"},{name:"arm/v7",arch:"arm"},{name:"arm/v8",arch:"arm64"},{name:"ppc64le",arch:"ppc64le"},{name:"riscv64",arch:"riscv64"}];function P(d){return O.apply(this,arguments)}function O(){return O=o()(a()().mark(function d(E){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,c.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:E}));case 1:case"end":return l.stop()}},d)})),O.apply(this,arguments)}function h(d){return g.apply(this,arguments)}function g(){return g=o()(a()().mark(function d(E){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,c.request)("/api/app/image/import-by-container-tar",{method:"POST",data:E}));case 1:case"end":return l.stop()}},d)})),g.apply(this,arguments)}function T(d){return t.apply(this,arguments)}function t(){return t=o()(a()().mark(function d(E){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,c.request)("/api/app/image/import-by-image-tar",{method:"POST",data:E}));case 1:case"end":return l.stop()}},d)})),t.apply(this,arguments)}function y(d){return u.apply(this,arguments)}function u(){return u=o()(a()().mark(function d(E){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,c.request)("/api/common/attach/delete",{method:"POST",data:E});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},d)})),u.apply(this,arguments)}function s(){return p.apply(this,arguments)}function p(){return p=o()(a()().mark(function d(){return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,c.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return f.stop()}},d)})),p.apply(this,arguments)}},18148:function(F,D,e){e.d(D,{$q:function(){return u},Fj:function(){return I},KG:function(){return M},KX:function(){return S},T8:function(){return t},Xn:function(){return g},ao:function(){return p},c5:function(){return l},c7:function(){return E}});var v=e(15009),a=e.n(v),j=e(99289),o=e.n(j),c=e(54006);function M(i){return P.apply(this,arguments)}function P(){return P=o()(a()().mark(function i(n){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/app/image/get-list",{method:"POST",data:n}));case 1:case"end":return r.stop()}},i)})),P.apply(this,arguments)}function O(i){return h.apply(this,arguments)}function h(){return h=_asyncToGenerator(_regeneratorRuntime().mark(function i(n){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,request("/api/app/log/image-build",{method:"POST",data:n});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),h.apply(this,arguments)}function g(i){return T.apply(this,arguments)}function T(){return T=o()(a()().mark(function i(n){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/app/image/get-list-build",{method:"POST",data:n}));case 1:case"end":return r.stop()}},i)})),T.apply(this,arguments)}function t(i){return y.apply(this,arguments)}function y(){return y=o()(a()().mark(function i(n){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,c.request)("/api/app/image/get-build-task",{method:"POST",data:n});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),y.apply(this,arguments)}function u(i){return s.apply(this,arguments)}function s(){return s=o()(a()().mark(function i(n){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,c.request)("/api/app/image/delete-build-task",{method:"POST",data:n});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),s.apply(this,arguments)}function p(i){return d.apply(this,arguments)}function d(){return d=o()(a()().mark(function i(n){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,c.request)("/api/app/image/image-delete",{method:"POST",data:n});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),d.apply(this,arguments)}function E(){return f.apply(this,arguments)}function f(){return f=o()(a()().mark(function i(){return a()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,c.request)("/api/app/image/image-prune",{method:"POST"});case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},i)})),f.apply(this,arguments)}function l(){return x.apply(this,arguments)}function x(){return x=o()(a()().mark(function i(){return a()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,c.request)("/api/app/image/build-prune",{method:"POST"});case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},i)})),x.apply(this,arguments)}function I(i){return A.apply(this,arguments)}function A(){return A=o()(a()().mark(function i(n){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,c.request)("/api/app/image/update-title",{method:"POST",data:n});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),A.apply(this,arguments)}function S(i){return B.apply(this,arguments)}function B(){return B=o()(a()().mark(function i(n){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/app/image/tag-sync",{method:"POST",data:n}));case 1:case"end":return r.stop()}},i)})),B.apply(this,arguments)}}}]);
