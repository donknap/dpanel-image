"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5283],{80821:function(Y,w,t){t.d(w,{Z:function(){return p}});var N=t(5574),d=t.n(N),_=t(93246),j=t(54006),A=t(31418),S=t(86738),C=t(14726),E=t(83062),T=t(62435),y=t(86074);function p(i){var $=(0,T.useState)(!1),Z=d()($,2),O=Z[0],R=Z[1],D=A.Z.useApp(),L=(0,j.useIntl)(),P=function(){R(!0),i.action().then(function(n){if(R(!1),typeof i.onSuccess=="function"&&i.onSuccess(n),i.messageSuccess){var u="";typeof i.messageSuccess=="function"?u=i.messageSuccess(n):u=i.messageSuccess,u.indexOf(".")>-1&&(u=L.formatMessage({id:u})),i.asynced?(0,_.Rk)(D,u):(0,_.$h)(D,u)}}).catch(function(n){R(!1),typeof i.onError=="function"&&i.onError(n)})};return i.confirm?(0,y.jsx)(S.Z,{style:{width:500},title:"\u63D0\u793A",description:i.confirm,onConfirm:P,okText:"Yes",cancelText:"No",children:(0,y.jsx)(C.ZP,{disabled:i.disabled,icon:i.icon,loading:O,danger:i.danger,type:i.type,children:i.children})}):(0,y.jsx)(E.Z,{title:i.tips,children:(0,y.jsx)(C.ZP,{disabled:i.disabled,icon:i.icon,loading:O,onClick:P,danger:i.danger,type:i.type,children:i.children})})}},75389:function(Y,w,t){t.r(w),t.d(w,{default:function(){return le}});var N=t(15009),d=t.n(N),_=t(99289),j=t.n(_),A=t(5574),S=t.n(A),C=t(80821),E=t(14946),T=t(93246),y=t(184),p=t(5966),i=t(62370),$=t(97462),Z=t(24739),O=t(17186),R=t(52688),D=t(31418),L=t(14726),P=t(34041),b=t(62435),n=t(86074),u=(0,b.forwardRef)(function(I,H){var k=(0,b.useState)(!1),W=S()(k,2),V=W[0],X=W[1],G=D.Z.useApp(),e=(0,b.useRef)();return(0,b.useImperativeHandle)(H,function(){return{}}),(0,n.jsxs)(y.a,{name:"create",title:"\u6DFB\u52A0\u5B58\u50A8\u5377",open:V,onOpenChange:function(M){X(M)},formRef:e,trigger:(0,n.jsx)(L.ZP,{type:"primary",children:"\u6DFB\u52A0"}),onFinish:function(){var K=j()(d()().mark(function M(f){var F,U,o,c,a,s,v,l;return d()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return f.driver=="macvlan"&&(f.driverOptionName||(f.driverOptionName=[],f.driverOptionValue=[]),f.driverOptionName.push("parent"),f.driverOptionValue.push(f.macvlanParentCard)),console.log(f),x.next=4,(0,E.XY)({name:f.name,driver:(F=f.driver)!==null&&F!==void 0?F:"bridge",ipSubnet:(U=f.ipSubnet)!==null&&U!==void 0?U:"",ipGateway:(o=f.ipGateway)!==null&&o!==void 0?o:"",ipRange:(c=f.ipRange)!==null&&c!==void 0?c:"",ipAux:f.ipAux,driverOption:f.driverOption,internal:(a=f.internal)!==null&&a!==void 0?a:!1,attachable:(s=f.attachable)!==null&&s!==void 0?s:!1});case 4:if(v=x.sent,!(v&&v.data&&v.data.id!="")){x.next=10;break}return(0,T.$h)(G,"\u6DFB\u52A0\u7F51\u7EDC\u6210\u529F"),I.onFinish&&I.onFinish(),(l=e.current)===null||l===void 0||l.resetFields(),x.abrupt("return",!0);case 10:case"end":return x.stop()}},M)}));return function(M){return K.apply(this,arguments)}}(),children:[(0,n.jsx)(p.Z,{label:"\u540D\u79F0",name:"name",placeholder:"\u6307\u5B9A\u552F\u4E00\u7684\u7F51\u7EDC\u540D\u79F0"}),(0,n.jsx)(i.Z,{label:"\u7C7B\u578B",name:"driver",children:(0,n.jsxs)(P.Z,{defaultValue:"bridge",children:[(0,n.jsx)(P.Z.Option,{value:"bridge",children:"bridge"}),(0,n.jsx)(P.Z.Option,{value:"ipvlan",children:"ipvlan"}),(0,n.jsx)(P.Z.Option,{value:"macvlan",children:"macvlan"}),(0,n.jsx)(P.Z.Option,{value:"overlay",children:"overlay"})]})}),(0,n.jsx)($.Z,{name:["driver"],children:function(M){var f=M.driver;if(f=="macvlan")return(0,n.jsx)(p.Z,{label:"\u7236\u7F51\u5361",name:"macvlanParentCard"})}}),(0,n.jsxs)(Z.UW,{title:"IPV4\u914D\u7F6E",children:[(0,n.jsx)(p.Z,{label:"\u5B50\u7F51",name:"ipSubnet",width:"md",placeholder:"\u4F8B\u5982: 172.20.0.0/16"}),(0,n.jsx)(p.Z,{label:"\u7F51\u5173",name:"ipGateway",width:"md",placeholder:"\u4F8B\u5982: 172.20.10.11"}),(0,n.jsx)(p.Z,{label:"Ip\u8303\u56F4",name:"ipRange",width:"md",placeholder:"\u4F8B\u5982: 172.20.10.128/25"})]}),(0,n.jsx)(O.u,{name:"ipAux",label:"\u6392\u9664Ip",children:(0,n.jsxs)(Z.UW,{children:[(0,n.jsx)(p.Z,{label:"\u8BBE\u5907\u540D\u79F0",name:"ipAuxDevice",width:"md"}),(0,n.jsx)(p.Z,{label:"Ip\u5730\u5740",name:"ipAuxAddress",width:"md"})]})}),(0,n.jsx)(O.u,{name:"driverOption",label:"\u81EA\u5B9A\u4E49\u9A71\u52A8\u914D\u7F6E",children:(0,n.jsxs)(Z.UW,{children:[(0,n.jsx)(p.Z,{label:"\u540D\u79F0",name:"driverOptionName",width:"md"}),(0,n.jsx)(p.Z,{label:"\u503C",name:"driverOptionValue",width:"md"})]})}),(0,n.jsx)(R.Z,{name:"internal",label:"\u9694\u79BB\u5916\u90E8\u8BBF\u95EE",initialValue:!1}),(0,n.jsx)(R.Z,{name:"attachable",label:"\u5141\u8BB8\u624B\u52A8\u9644\u52A0\u5BB9\u5668",initialValue:!1})]})}),h=u,g=t(6409),r=t(43425),q=t(48689),ee=t(90639),J=t(38345),ne=t(66309),z=t(78957),Q=t(96074),te=t(83062),re=t(85576),m=t(26412),ae=t(63490),ue=t(39711);function le(){var I=(0,b.useRef)(),H=(0,b.useState)(""),k=S()(H,2),W=k[0],V=k[1],X=(0,b.useState)(),G=S()(X,2),e=G[0],K=G[1],M=(0,b.useState)(),f=S()(M,2),F=f[0],U=f[1];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ee.Z,{rowKey:"Name",columns:[{title:"\u540D\u79F0",ellipsis:!0,dataIndex:"Name",render:function(c,a,s,v,l){return a.Name=="none"||a.Name=="bridge"||a.Name=="host"?(0,n.jsxs)(n.Fragment,{children:[a.Name," ",(0,n.jsx)(ne.Z,{color:"blue",children:"System"})]}):(0,n.jsx)(n.Fragment,{children:c})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4 IPAM Subnet",ellipsis:!0,width:150,search:!1,dataIndex:["IPAM","Config",0,"Subnet"]},{title:"IPV4 IPAM Gateway",ellipsis:!0,width:150,search:!1,dataIndex:["IPAM","Config",0,"Gateway"]},{title:"\u521B\u5EFA\u65F6\u95F4",ellipsis:!0,width:180,search:!1,dataIndex:"Created",render:function(c,a,s,v,l){return new Date(a.Created).toLocaleString()}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(c,a,s,v,l){return(0,n.jsx)(z.Z,{split:(0,n.jsx)(Q.Z,{type:"vertical"}),children:(0,n.jsx)(L.ZP,{type:"link",onClick:function(){V(a.Name)},children:(0,n.jsx)(te.Z,{title:"\u7BA1\u7406",children:(0,n.jsx)(r.Z,{})})})})}}],request:function(){var o=j()(d()().mark(function c(a,s,v){var l;return d()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,E.jR)({name:a.Name});case 2:return l=x.sent,x.abrupt("return",{data:l.data.list,success:!0,total:l.data.list.length});case 4:case"end":return x.stop()}},c)}));return function(c,a,s){return o.apply(this,arguments)}}(),toolBarRender:function(){return[(0,n.jsx)(h,{onFinish:function(){var a,s;!((a=I.current)===null||a===void 0)&&a.reloadAndRest&&((s=I.current)===null||s===void 0||s.reloadAndRest())}}),(0,n.jsx)(C.Z,{action:function(){return(0,E.CI)()},onSuccess:function(){var a,s;return!((a=I.current)===null||a===void 0)&&a.reloadAndRest&&((s=I.current)===null||s===void 0||s.reloadAndRest()),!0},onError:function(){var a,s;return!((a=I.current)===null||a===void 0)&&a.reset&&((s=I.current)===null||s===void 0||s.reset()),!0},messageSuccess:"\u6E05\u9664\u6210\u529F",confirm:"\u662F\u5426\u6E05\u7406\u672A\u4F7F\u7528\u7684\u7F51\u7EDC\uFF1F",children:"\u6E05\u7406\u672A\u4F7F\u7528\u7F51\u7EDC"})]},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:I,tableAlertOptionRender:function(c){var a=c.selectedRowKeys;return(0,n.jsx)(z.Z,{size:16,children:(0,n.jsx)(C.Z,{danger:!0,type:"primary",action:function(){return(0,E._x)({name:a})},onSuccess:function(){var v,l;return!((v=I.current)===null||v===void 0)&&v.reloadAndRest&&((l=I.current)===null||l===void 0||l.reloadAndRest()),!0},onError:function(){var v,l;return!((v=I.current)===null||v===void 0)&&v.reset&&((l=I.current)===null||l===void 0||l.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,g.O)()}),(0,n.jsxs)(re.Z,{width:800,open:W!="",afterOpenChange:j()(d()().mark(function o(){var c,a;return d()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!W){v.next=6;break}return v.next=3,(0,E.IS)({name:W});case 3:c=v.sent,c.data.info.Containers?(a=[],Object.keys(c.data.info.Containers).map(function(l){c.data.info.Containers[l].Id=l,a.push(c.data.info.Containers[l])}),U(a)):U([]),K(c.data.info);case 6:case"end":return v.stop()}},o)})),footer:!1,onCancel:function(){return V("")},children:[(0,n.jsx)(J.Z,{title:"\u5B58\u50A8\u8BE6\u60C5",ghost:!0,children:(0,n.jsxs)(m.Z,{labelStyle:{width:"180px"},column:1,bordered:!0,children:[(0,n.jsx)(m.Z.Item,{label:"\u540D\u79F0",children:e==null?void 0:e.Name}),(0,n.jsx)(m.Z.Item,{label:"Id",children:e==null?void 0:e.Id}),(0,n.jsx)(m.Z.Item,{label:"Driver",children:e==null?void 0:e.Driver}),(0,n.jsx)(m.Z.Item,{label:"Scope",children:e==null?void 0:e.Scope}),(0,n.jsx)(m.Z.Item,{label:"Attachable",children:e!=null&&e.Attachable?"\u662F":"\u5426"}),(0,n.jsx)(m.Z.Item,{label:"Internal",children:e!=null&&e.Internal?"\u662F":"\u5426"}),(0,n.jsx)(m.Z.Item,{label:"IPV4 Subnet",children:(e==null?void 0:e.IPAM.Config)&&(e==null?void 0:e.IPAM.Config[0])&&(e==null?void 0:e.IPAM.Config[0].Subnet)}),(0,n.jsx)(m.Z.Item,{label:"IPV4 Gateway",children:(e==null?void 0:e.IPAM.Config)&&(e==null?void 0:e.IPAM.Config[0])&&(e==null?void 0:e.IPAM.Config[0].Gateway)}),(0,n.jsx)(m.Z.Item,{label:"IPV4 IP Range ",children:(e==null?void 0:e.IPAM.Config)&&(e==null?void 0:e.IPAM.Config[0])&&(e==null?void 0:e.IPAM.Config[0].IPRange)}),(0,n.jsx)(m.Z.Item,{label:"IPV4 Excluded IPs",children:(e==null?void 0:e.IPAM.Config)&&(e==null?void 0:e.IPAM.Config[0])&&(e==null?void 0:e.IPAM.Config[0].AuxiliaryAddresses)&&Object.keys(e==null?void 0:e.IPAM.Config[0].AuxiliaryAddresses).map(function(o){return(e==null?void 0:e.IPAM.Config[0].AuxiliaryAddresses[o])+" ,"})}),(0,n.jsx)(m.Z.Item,{label:"Options",children:(0,n.jsx)(m.Z,{labelStyle:{width:"150px"},column:1,bordered:!0,children:(e==null?void 0:e.Options)&&Object.keys(e==null?void 0:e.Options).map(function(o){return(0,n.jsx)(m.Z.Item,{label:o,children:e.Options[o]},o)})})}),(0,n.jsx)(m.Z.Item,{label:"Lables",children:(0,n.jsx)(m.Z,{labelStyle:{width:"150px"},column:1,bordered:!0,children:(e==null?void 0:e.Labels)&&Object.keys(e==null?void 0:e.Labels).map(function(o){return(0,n.jsx)(m.Z.Item,{label:o,children:e.Labels[o]},o)})})})]})}),(0,n.jsx)(J.Z,{title:"\u7F51\u7EDC\u5185\u5BB9\u5668",ghost:!0,children:(0,n.jsx)(ae.Z,{rowKey:"Id",columns:[{title:"\u5BB9\u5668\u540D\u79F0",dataIndex:"Name",render:function(c,a,s){return(0,n.jsx)(ue.rU,{target:"_blank",to:"/app/detail/edit/".concat(a.Id),children:a.Name})}},{title:"IPV4 Address",dataIndex:"IPv4Address"},{title:"MacAddress",dataIndex:"MacAddress"},{title:"\u64CD\u4F5C",render:function(c,a,s){return(0,n.jsx)(z.Z,{split:(0,n.jsx)(Q.Z,{type:"vertical"}),children:(0,n.jsx)(C.Z,{type:"text",action:function(){var l,B;return(0,E.t9)({name:(l=e==null?void 0:e.Id)!==null&&l!==void 0?l:"",containerName:(B=a.Id)!==null&&B!==void 0?B:""})},messageSuccess:"\u5BB9\u5668\u6210\u529F\u9000\u51FA\u8BE5\u7F51\u7EDC",onSuccess:function(){var l=F==null?void 0:F.filter(function(B){return B.Id!=a.Id});U(l)},children:(0,n.jsx)(q.Z,{})},"delete")})}}],dataSource:F,pagination:!1})})]})]})}},14946:function(Y,w,t){t.d(w,{CI:function(){return y},HY:function(){return L},IS:function(){return S},XY:function(){return Z},_3:function(){return b},_x:function(){return i},jR:function(){return E},t9:function(){return R}});var N=t(15009),d=t.n(N),_=t(99289),j=t.n(_),A=t(54006);function S(u){return C.apply(this,arguments)}function C(){return C=j()(d()().mark(function u(h){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,A.request)("/api/app/network/get-detail",{method:"POST",data:h}));case 1:case"end":return r.stop()}},u)})),C.apply(this,arguments)}function E(u){return T.apply(this,arguments)}function T(){return T=j()(d()().mark(function u(h){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,A.request)("/api/app/network/get-list",{method:"POST",data:h}));case 1:case"end":return r.stop()}},u)})),T.apply(this,arguments)}function y(){return p.apply(this,arguments)}function p(){return p=j()(d()().mark(function u(){return d()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,A.request)("/api/app/network/prune",{method:"POST"});case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}},u)})),p.apply(this,arguments)}function i(u){return $.apply(this,arguments)}function $(){return $=j()(d()().mark(function u(h){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,A.request)("/api/app/network/delete",{method:"POST",data:h});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},u)})),$.apply(this,arguments)}function Z(u){return O.apply(this,arguments)}function O(){return O=j()(d()().mark(function u(h){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,A.request)("/api/app/network/create",{method:"POST",data:h});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},u)})),O.apply(this,arguments)}function R(u){return D.apply(this,arguments)}function D(){return D=j()(d()().mark(function u(h){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,A.request)("/api/app/network/disconnect",{method:"POST",data:h});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},u)})),D.apply(this,arguments)}function L(u){return P.apply(this,arguments)}function P(){return P=j()(d()().mark(function u(h){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,A.request)("/api/app/network/connect",{method:"POST",data:h});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},u)})),P.apply(this,arguments)}function b(u){return n.apply(this,arguments)}function n(){return n=j()(d()().mark(function u(h){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,A.request)("/api/app/network/get-container-list",{method:"POST",data:h}));case 1:case"end":return r.stop()}},u)})),n.apply(this,arguments)}},6409:function(Y,w,t){t.d(w,{O:function(){return N}});function N(){return{showSizeChanger:!0,defaultPageSize:20}}}}]);
