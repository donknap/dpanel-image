"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[536],{2830:function(K,P,e){e.d(P,{Z:function(){return j}});var p=e(87462),i=e(62435),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M876.6 239.5c-.5-.9-1.2-1.8-2-2.5-5-5-13.1-5-18.1 0L684.2 409.3l-67.9-67.9L788.7 169c.8-.8 1.4-1.6 2-2.5 3.6-6.1 1.6-13.9-4.5-17.5-98.2-58-226.8-44.7-311.3 39.7-67 67-89.2 162-66.5 247.4l-293 293c-3 3-2.8 7.9.3 11l169.7 169.7c3.1 3.1 8.1 3.3 11 .3l292.9-292.9c85.5 22.8 180.5.7 247.6-66.4 84.4-84.5 97.7-213.1 39.7-311.3zM786 499.8c-58.1 58.1-145.3 69.3-214.6 33.6l-8.8 8.8-.1-.1-274 274.1-79.2-79.2 230.1-230.1s0 .1.1.1l52.8-52.8c-35.7-69.3-24.5-156.5 33.6-214.6a184.2 184.2 0 01144-53.5L537 318.9a32.05 32.05 0 000 45.3l124.5 124.5a32.05 32.05 0 0045.3 0l132.8-132.8c3.7 51.8-14.4 104.8-53.6 143.9z"}}]},name:"tool",theme:"outlined"},m=D,E=e(84089),M=function(T,t){return i.createElement(E.Z,(0,p.Z)({},T,{ref:t,icon:m}))},f=i.forwardRef(M),j=f},80821:function(K,P,e){e.d(P,{Z:function(){return T}});var p=e(5574),i=e.n(p),D=e(93246),m=e(54006),E=e(31418),M=e(86738),f=e(14726),j=e(62435),c=e(86074);function T(t){var r=(0,j.useState)(!1),g=i()(r,2),u=g[0],_=g[1],L=E.Z.useApp(),I=(0,m.useIntl)(),C=function(){_(!0),t.action().then(function(A){if(_(!1),typeof t.onSuccess=="function"&&t.onSuccess(A),t.messageSuccess){var v="";t.messageSuccess.indexOf(".")>-1?v=I.formatMessage({id:t.messageSuccess}):v=t.messageSuccess,t.asynced?(0,D.Rk)(L,v):(0,D.$h)(L,v)}}).catch(function(A){_(!1),typeof t.onError=="function"&&t.onError(A)})};return t.confirm?(0,c.jsx)(M.Z,{style:{width:500},title:"\u63D0\u793A",description:t.confirm,onConfirm:C,okText:"Yes",cancelText:"No",children:(0,c.jsx)(f.ZP,{disabled:t.disabled,icon:t.icon,loading:u,danger:t.danger,type:t.type,children:t.children})}):(0,c.jsx)(f.ZP,{disabled:t.disabled,icon:t.icon,loading:u,onClick:C,danger:t.danger,type:t.type,children:t.children})}},94359:function(K,P,e){e.d(P,{Z:function(){return g}});var p=e(62435),i=e(3089),D=e(98165),m=e(18429),E=e(8751),M=e(14313),f=e(30159),j=e(87740),c=e(66309),T=e(83062),t=e(54006),r=e(86074);function g(u){var _=(0,r.jsx)(r.Fragment,{});return u.status=="0"&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(i.Z,{}),color:"default",children:"waiting"})),u.status=="10"&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(D.Z,{spin:!0}),color:"processing",children:"processing"})),u.status=="20"&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(m.Z,{}),color:"error",children:"error"})),u.status=="30"&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(E.Z,{}),color:"success",children:"success"})),u.status=="running"&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(M.Z,{}),color:"success",children:u.status})),u.status=="paused"&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(f.Z,{}),children:u.status})),u.status=="restarting"&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(j.Z,{}),children:u.status})),(u.status=="exited"||u.status=="dead"||u.status=="removing")&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(m.Z,{}),color:"warning",children:u.status})),u.link&&(_=(0,r.jsx)(t.Link,{to:u.link,children:_})),u.message&&(_=(0,r.jsx)(T.Z,{placement:"left",title:u.message,children:_})),(0,r.jsx)(r.Fragment,{children:_})}},13961:function(K,P,e){e.r(P),e.d(P,{default:function(){return W}});var p=e(15009),i=e.n(p),D=e(99289),m=e.n(D),E=e(37476),M=e(12010),f=e(78957),j=e(66309),c=e(96074),T=e(14726),t=e(83062),r=e(68508),g=e(54006),u=e(18148),_=e(94359),L=e(20713),I=e(45742),C=e(2830),B=e(29158),A=e(80821),v=e(62435),a=e(86074);function W(){var l=[{title:"\u540D\u79F0",render:function(n,d,R,O){return(0,a.jsx)(f.Z,{direction:"vertical",style:{textAlign:"left"},children:d.tag},d.id)}},{title:"\u6700\u65B0Tag",dataIndex:"tag",search:!1,render:function(n,d,R,O){return d.imageInfo?d.imageInfo.info.Id==""?(0,a.jsx)(j.Z,{children:"none"},"none"):(0,a.jsx)(f.Z,{direction:"vertical",style:{textAlign:"left"},children:d.imageInfo.info.RepoTags.map(function(h,x){return(0,a.jsx)(j.Z,{color:"#2db7f5",children:h},x)})},d.id):(0,a.jsx)(a.Fragment,{})}},{title:"\u955C\u50CFId",ellipsis:!0,search:!1,copyable:!0,dataIndex:["imageInfo","info","Id"],width:200},{title:"\u6784\u5EFA\u72B6\u6001",width:"100px",ellipsis:!0,search:!1,render:function(n,d,R,O){return[(0,a.jsx)("div",{children:(0,a.jsx)(_.Z,{status:d.status},d.id)},d.id)]}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:200,render:function(n,d,R,O){return(0,a.jsxs)(f.Z,{split:(0,a.jsx)(c.Z,{type:"vertical"}),children:[(0,a.jsx)(E.Y,{title:"\u6784\u5EFA\u65E5\u5FD7",submitter:!1,trigger:(0,a.jsx)(T.ZP,{size:"small",type:"link",children:(0,a.jsx)(t.Z,{title:"\u6784\u5EFA\u65E5\u5FD7",children:(0,a.jsx)(I.Z,{})})},d.id),children:(0,a.jsx)(L.ZP,{theme:"dark",height:"500px",value:d.message})},"log"),(0,a.jsx)(g.Link,{to:"/image/create?id="+d.id,type:"link",children:(0,a.jsx)(t.Z,{title:"\u518D\u6B21\u6784\u5EFA",children:(0,a.jsx)(C.Z,{})})},"rebuild"),d.imageInfo&&(0,a.jsx)(g.Link,{to:"/image/detail/".concat(d.imageInfo.info.Id),children:(0,a.jsx)(t.Z,{title:"\u67E5\u770B\u955C\u50CF",children:(0,a.jsx)(B.Z,{})})},"detail")]})}}],o=(0,v.useRef)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(M.Z,{actionRef:o,rowKey:"id",columns:l,request:function(){var s=m()(i()().mark(function n(d,R,O){var h,x,y;return i()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,u.Xn)({page:(h=d.current)!==null&&h!==void 0?h:1,pageSize:(x=d.pageSize)!==null&&x!==void 0?x:10});case 2:return y=U.sent,U.abrupt("return",{data:y.data.list,success:!0,total:y.data.total});case 4:case"end":return U.stop()}},n)}));return function(n,d,R){return s.apply(this,arguments)}}(),pagination:{pageSize:10},search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(n){var d=n.selectedRowKeys;return(0,a.jsx)(f.Z,{size:16,children:(0,a.jsx)(A.Z,{danger:!0,type:"primary",action:function(){return(0,u.$q)({id:d})},onSuccess:function(){var O,h;return!((O=o.current)===null||O===void 0)&&O.reloadAndRest&&((h=o.current)===null||h===void 0||h.reloadAndRest()),!0},onError:function(){var O,h;return!((O=o.current)===null||O===void 0)&&O.reset&&((h=o.current)===null||h===void 0||h.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})},tableExtraRender:function(){return(0,a.jsx)(r.Z,{mode:"horizontal",selectedKeys:["build"],items:[{label:(0,a.jsx)(g.Link,{to:"/image/list/all",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,a.jsx)(g.Link,{to:"/image/list/build",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})}})})}},18148:function(K,P,e){e.d(P,{$q:function(){return u},Fj:function(){return a},KG:function(){return M},T8:function(){return r},Xn:function(){return T},ao:function(){return L},c5:function(){return A},c7:function(){return C}});var p=e(15009),i=e.n(p),D=e(99289),m=e.n(D),E=e(54006);function M(l){return f.apply(this,arguments)}function f(){return f=m()(i()().mark(function l(o){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,E.request)("/api/app/image/get-list",{method:"POST",data:o}));case 1:case"end":return n.stop()}},l)})),f.apply(this,arguments)}function j(l){return c.apply(this,arguments)}function c(){return c=_asyncToGenerator(_regeneratorRuntime().mark(function l(o){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,request("/api/app/log/image-build",{method:"POST",data:o});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},l)})),c.apply(this,arguments)}function T(l){return t.apply(this,arguments)}function t(){return t=m()(i()().mark(function l(o){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,E.request)("/api/app/image/get-list-build",{method:"POST",data:o}));case 1:case"end":return n.stop()}},l)})),t.apply(this,arguments)}function r(l){return g.apply(this,arguments)}function g(){return g=m()(i()().mark(function l(o){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.request)("/api/app/image/get-build-task",{method:"POST",data:o});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},l)})),g.apply(this,arguments)}function u(l){return _.apply(this,arguments)}function _(){return _=m()(i()().mark(function l(o){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.request)("/api/app/image/delete-build-task",{method:"POST",data:o});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},l)})),_.apply(this,arguments)}function L(l){return I.apply(this,arguments)}function I(){return I=m()(i()().mark(function l(o){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.request)("/api/app/image/image-delete",{method:"POST",data:o});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},l)})),I.apply(this,arguments)}function C(){return B.apply(this,arguments)}function B(){return B=m()(i()().mark(function l(){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,E.request)("/api/app/image/image-prune",{method:"POST"});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},l)})),B.apply(this,arguments)}function A(){return v.apply(this,arguments)}function v(){return v=m()(i()().mark(function l(){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,E.request)("/api/app/image/build-prune",{method:"POST"});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},l)})),v.apply(this,arguments)}function a(l){return W.apply(this,arguments)}function W(){return W=m()(i()().mark(function l(o){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.request)("/api/app/image/update-title",{method:"POST",data:o});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},l)})),W.apply(this,arguments)}}}]);
