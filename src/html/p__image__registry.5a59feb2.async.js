"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9013],{52688:function(N,F,e){var A=e(1413),s=e(45987),M=e(62435),p=e(33468),R=e(86074),I=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],D=M.forwardRef(function(v,g){var u=v.fieldProps,h=v.unCheckedChildren,n=v.checkedChildren,P=v.proFieldProps,l=(0,s.Z)(v,I);return(0,R.jsx)(p.Z,(0,A.Z)({valueType:"switch",fieldProps:(0,A.Z)({unCheckedChildren:h,checkedChildren:n},u),ref:g,valuePropName:"checked",proFieldProps:P,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},l))});F.Z=D},5966:function(N,F,e){var A=e(97685),s=e(1413),M=e(45987),p=e(21770),R=e(72723),I=e(55241),D=e(97435),v=e(62435),g=e(33468),u=e(86074),h=["fieldProps","proFieldProps"],n=["fieldProps","proFieldProps"],P="text",l=function(a){var t=a.fieldProps,C=a.proFieldProps,m=(0,M.Z)(a,h);return(0,u.jsx)(g.Z,(0,s.Z)({valueType:P,fieldProps:t,filedConfig:{valueType:P},proFieldProps:C},m))},_=function(a){var t=(0,p.Z)(a.open||!1,{value:a.open,onChange:a.onOpenChange}),C=(0,A.Z)(t,2),m=C[0],L=C[1];return(0,u.jsx)(R.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function($){var W,E=$.getFieldValue(a.name||[]);return(0,u.jsx)(I.Z,(0,s.Z)((0,s.Z)({getPopupContainer:function(i){return i&&i.parentNode?i.parentNode:i},onOpenChange:L,content:(0,u.jsxs)("div",{style:{padding:"4px 0"},children:[(W=a.statusRender)===null||W===void 0?void 0:W.call(a,E),a.strengthText?(0,u.jsx)("div",{style:{marginTop:10},children:(0,u.jsx)("span",{children:a.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},a.popoverProps),{},{open:m,children:a.children}))}})},d=function(a){var t=a.fieldProps,C=a.proFieldProps,m=(0,M.Z)(a,n),L=(0,v.useState)(!1),b=(0,A.Z)(L,2),$=b[0],W=b[1];return t!=null&&t.statusRender&&m.name?(0,u.jsx)(_,{name:m.name,statusRender:t==null?void 0:t.statusRender,popoverProps:t==null?void 0:t.popoverProps,strengthText:t==null?void 0:t.strengthText,open:$,onOpenChange:W,children:(0,u.jsx)("div",{children:(0,u.jsx)(g.Z,(0,s.Z)({valueType:"password",fieldProps:(0,s.Z)((0,s.Z)({},(0,D.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(B){var i;t==null||(i=t.onBlur)===null||i===void 0||i.call(t,B),W(!1)},onClick:function(B){var i;t==null||(i=t.onClick)===null||i===void 0||i.call(t,B),W(!0)}}),proFieldProps:C,filedConfig:{valueType:P}},m))})}):(0,u.jsx)(g.Z,(0,s.Z)({valueType:"password",fieldProps:t,proFieldProps:C,filedConfig:{valueType:P}},m))},r=l;r.Password=d,r.displayName="ProFormComponent",F.Z=r},80821:function(N,F,e){e.d(F,{Z:function(){return h}});var A=e(5574),s=e.n(A),M=e(93246),p=e(54006),R=e(31418),I=e(86738),D=e(14726),v=e(83062),g=e(62435),u=e(86074);function h(n){var P=(0,g.useState)(!1),l=s()(P,2),_=l[0],d=l[1],r=R.Z.useApp(),K=(0,p.useIntl)(),a=function(){d(!0),n.action().then(function(C){if(d(!1),typeof n.onSuccess=="function"&&n.onSuccess(C),n.messageSuccess){var m="";n.messageSuccess.indexOf(".")>-1?m=K.formatMessage({id:n.messageSuccess}):m=n.messageSuccess,n.asynced?(0,M.Rk)(r,m):(0,M.$h)(r,m)}}).catch(function(C){d(!1),typeof n.onError=="function"&&n.onError(C)})};return n.confirm?(0,u.jsx)(I.Z,{style:{width:500},title:"\u63D0\u793A",description:n.confirm,onConfirm:a,okText:"Yes",cancelText:"No",children:(0,u.jsx)(D.ZP,{disabled:n.disabled,icon:n.icon,loading:_,danger:n.danger,type:n.type,children:n.children})}):(0,u.jsx)(v.Z,{title:n.tips,children:(0,u.jsx)(D.ZP,{disabled:n.disabled,icon:n.icon,loading:_,onClick:a,danger:n.danger,type:n.type,children:n.children})})}},24396:function(N,F,e){e.r(F),e.d(F,{default:function(){return W}});var A=e(15009),s=e.n(A),M=e(99289),p=e.n(M),R=e(80821),I=e(5574),D=e.n(I),v=e(75870),g=e(93246),u=e(184),h=e(5966),n=e(52688),P=e(97462),l=e(31418),_=e(14726),d=e(62435),r=e(86074),K=(0,d.forwardRef)(function(E,B){var i=(0,d.useState)(!1),y=D()(i,2),f=y[0],S=y[1],T=l.Z.useApp(),c=(0,d.useRef)(),G=(0,d.useState)(0),O=D()(G,2),j=O[0],V=O[1];return(0,d.useImperativeHandle)(B,function(){return{setEditId:function(o){(0,v.t1)({id:o}).then(function(x){S(!0),V(o)})},editDockerIo:function(o){var x;(x=c.current)===null||x===void 0||x.setFieldsValue({title:o.title,serverAddress:o.serverAddress}),V(-1),S(!0)}}}),(0,d.useEffect)(function(){j&&j>0&&(0,v.t1)({id:j}).then(function(Z){var o;(o=c.current)===null||o===void 0||o.setFieldsValue({title:Z.data.info.title,serverAddress:Z.data.info.serverAddress,username:Z.data.info.username})})},[j]),(0,r.jsxs)(u.a,{drawerProps:{forceRender:!0},name:"create",title:"\u6DFB\u52A0/\u7F16\u8F91\u955C\u50CF\u4ED3\u5E93",open:f,onOpenChange:function(o){S(o)},formRef:c,trigger:(0,r.jsx)(_.ZP,{type:"primary",onClick:function(){var o;(o=c.current)===null||o===void 0||o.resetFields(),V(0)},children:"\u6DFB\u52A0\u4ED3\u5E93"}),onFinish:function(){var Z=p()(s()().mark(function o(x){var H,z,w,Y;return s()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,v.ZH)({id:j,title:x.title,serverAddress:x.serverAddress,username:(H=x.username)!==null&&H!==void 0?H:"",password:(z=x.password)!==null&&z!==void 0?z:""});case 2:if(w=U.sent,!(w&&w.data&&w.data.id>0)){U.next=8;break}return(0,g.$h)(T,"\u6DFB\u52A0\u6216\u662F\u7F16\u8F91\u955C\u50CF\u4ED3\u5E93\u6210\u529F"),E.onFinish&&E.onFinish(),(Y=c.current)===null||Y===void 0||Y.resetFields(),U.abrupt("return",!0);case 8:case"end":return U.stop()}},o)}));return function(o){return Z.apply(this,arguments)}}(),children:[(0,r.jsx)(h.Z,{label:"\u540D\u79F0",name:"title",placeholder:"\u6307\u5B9A\u4ED3\u5E93\u4E00\u4E2A\u540D\u79F0",disabled:j==-1,required:!0}),(0,r.jsx)(h.Z,{label:"Url",tooltip:"\u4F8B\u5982:ccr.ccs.tencentyun.com\uFF0Cdocker.io",name:"serverAddress",placeholder:"\u586B\u5199\u4ED3\u5E93\u5730\u5740\uFF0C\u5B98\u65B9\u9ED8\u8BA4\u7559\u7A7A",disabled:j==-1}),(0,r.jsx)(n.Z,{label:"\u914D\u7F6E\u4ED3\u5E93\u6743\u9650",name:"hasPermission",initialValue:!0}),(0,r.jsx)(P.Z,{name:["hasPermission"],children:function(o){var x=o.hasPermission;return x?[(0,r.jsx)(h.Z,{label:"\u7528\u6237\u540D",name:"username",placeholder:"\u914D\u7F6E\u4ED3\u5E93\u7528\u6237\u540D"},"username"),(0,r.jsx)(h.Z.Password,{label:"\u5BC6\u7801",name:"password",placeholder:"\u914D\u7F6E\u4ED3\u5E93\u5BC6\u7801,\u4E3A\u7A7A\u65F6\u4F7F\u7528\u65E7\u5BC6\u7801"},"password")]:(0,r.jsx)(r.Fragment,{})}})]})}),a=K,t=e(43425),C=e(6110),m=e(12010),L=e(78957),b=e(96074),$=e(83062);function W(){var E=(0,d.useRef)(),B=(0,d.useRef)();return(0,r.jsx)(C._z,{header:{extra:[(0,r.jsx)(a,{onFinish:function(){var y,f;!((y=E.current)===null||y===void 0)&&y.reloadAndRest&&((f=E.current)===null||f===void 0||f.reloadAndRest())},ref:B})]},children:(0,r.jsx)(m.Z,{rowKey:"id",columns:[{title:"\u540D\u79F0",ellipsis:!0,dataIndex:"title"},{title:"Url",dataIndex:"serverAddress"},{title:"\u7528\u6237",dataIndex:"username"},{title:"\u64CD\u4F5C",width:100,render:function(y,f,S,T,c){return(0,r.jsx)(L.Z,{split:(0,r.jsx)(b.Z,{type:"vertical"}),children:(0,r.jsx)(_.ZP,{type:"link",onClick:function(){if(console.log(f),f.id>0){var O;(O=B.current)===null||O===void 0||O.setEditId(f.id)}else{var j;(j=B.current)===null||j===void 0||j.editDockerIo(f)}},children:(0,r.jsx)($.Z,{title:"\u7BA1\u7406",children:(0,r.jsx)(t.Z,{})})})})}}],request:function(){var i=p()(s()().mark(function y(f,S,T){var c;return s()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,v.Ot)({title:f.title,serverAddress:f.serverAddress});case 2:return c=O.sent,O.abrupt("return",{data:c.data.list,success:!0,total:c.data.list.length});case 4:case"end":return O.stop()}},y)}));return function(y,f,S){return i.apply(this,arguments)}}(),toolBarRender:function(){return[]},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:E,tableAlertOptionRender:function(y){var f=y.selectedRowKeys;return(0,r.jsx)(L.Z,{size:16,children:(0,r.jsx)(R.Z,{danger:!0,type:"primary",action:function(){return(0,v.ix)({id:f})},onSuccess:function(){var T,c;return!((T=E.current)===null||T===void 0)&&T.reloadAndRest&&((c=E.current)===null||c===void 0||c.reloadAndRest()),!0},onError:function(){var T,c;return!((T=E.current)===null||T===void 0)&&T.reset&&((c=E.current)===null||c===void 0||c.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})}})})}},75870:function(N,F,e){e.d(F,{Ot:function(){return I},ZH:function(){return v},ix:function(){return u},t1:function(){return n}});var A=e(15009),s=e.n(A),M=e(99289),p=e.n(M),R=e(54006);function I(l){return D.apply(this,arguments)}function D(){return D=p()(s()().mark(function l(_){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,R.request)("/api/common/registry/get-list",{method:"POST",data:_}));case 1:case"end":return r.stop()}},l)})),D.apply(this,arguments)}function v(l){return g.apply(this,arguments)}function g(){return g=p()(s()().mark(function l(_){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,R.request)("/api/common/registry/create",{method:"POST",data:_}));case 1:case"end":return r.stop()}},l)})),g.apply(this,arguments)}function u(l){return h.apply(this,arguments)}function h(){return h=p()(s()().mark(function l(_){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,R.request)("/api/common/registry/delete",{method:"POST",data:_}));case 1:case"end":return r.stop()}},l)})),h.apply(this,arguments)}function n(l){return P.apply(this,arguments)}function P(){return P=p()(s()().mark(function l(_){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,R.request)("/api/common/registry/get-detail",{method:"POST",data:_}));case 1:case"end":return r.stop()}},l)})),P.apply(this,arguments)}}}]);
