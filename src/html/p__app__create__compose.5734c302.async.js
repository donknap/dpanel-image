"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7861],{88484:function(k,b,e){e.d(b,{Z:function(){return U}});var h=e(87462),a=e(62435),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},m=O,g=e(84089),W=function(M,$){return a.createElement(g.Z,(0,h.Z)({},M,{ref:$,icon:m}))},t=a.forwardRef(W),U=t},86615:function(k,b,e){var h=e(1413),a=e(45987),O=e(22270),m=e(78045),g=e(62435),W=e(83607),t=e(33468),U=e(86074),z=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],M=g.forwardRef(function(P,S){var v=P.fieldProps,C=P.options,o=P.radioType,d=P.layout,I=P.proFieldProps,B=P.valueEnum,y=(0,a.Z)(P,z);return(0,U.jsx)(t.Z,(0,h.Z)((0,h.Z)({valueType:o==="button"?"radioButton":"radio",ref:S,valueEnum:(0,O.h)(B,void 0)},y),{},{fieldProps:(0,h.Z)({options:C,layout:d},v),proFieldProps:I,filedConfig:{customLightMode:!0}}))}),$=g.forwardRef(function(P,S){var v=P.fieldProps,C=P.children;return(0,U.jsx)(m.ZP,(0,h.Z)((0,h.Z)({},v),{},{ref:S,children:C}))}),w=(0,W.G)($,{valuePropName:"checked",ignoreWidth:!0}),A=w;A.Group=M,A.Button=m.ZP.Button,A.displayName="ProFormComponent",b.Z=A},184:function(k,b,e){e.d(b,{a:function(){return E}});var h=e(4942),a=e(74165),O=e(15861),m=e(1413),g=e(97685),W=e(45987),t=e(51812),U=e(48171),z=e(73177),M=e(28459),$=e(85265),w=e(93967),A=e.n(w),P=e(72378),S=e.n(P),v=e(21770),C=e(80334),o=e(62435),d=e(61254),I=e(89671),B=e(98082),y=function(f){return(0,h.Z)({},f.componentCls,{"&-sidebar-dragger":{width:"5px",cursor:"ew-resize",padding:"4px 0 0",borderTop:"1px solid transparent",position:"absolute",top:0,left:0,bottom:0,zIndex:100,backgroundColor:"transparent","&-min-disabled":{cursor:"w-resize"},"&-max-disabled":{cursor:"e-resize"}}})};function R(c){return(0,B.Xj)("DrawerForm",function(f){var p=(0,m.Z)((0,m.Z)({},f),{},{componentCls:".".concat(c)});return[y(p)]})}var D=e(86074),j=["children","trigger","onVisibleChange","drawerProps","onFinish","submitTimeout","title","width","resize","onOpenChange","visible","open"];function E(c){var f,p,V=c.children,K=c.trigger,N=c.onVisibleChange,i=c.drawerProps,H=c.onFinish,X=c.submitTimeout,Ce=c.title,q=c.width,Z=c.resize,ee=c.onOpenChange,ne=c.visible,ce=c.open,x=(0,W.Z)(c,j);(0,C.ET)(!x.footer||!(i!=null&&i.footer),"DrawerForm \u662F\u4E00\u4E2A ProForm \u7684\u7279\u6B8A\u5E03\u5C40\uFF0C\u5982\u679C\u60F3\u81EA\u5B9A\u4E49\u6309\u94AE\uFF0C\u8BF7\u4F7F\u7528 submit.render \u81EA\u5B9A\u4E49\u3002");var l=o.useMemo(function(){var s,n,r,u={onResize:function(){},maxWidth:window.innerWidth*.8,minWidth:300};return typeof Z=="boolean"?Z?u:{}:(0,t.Y)({onResize:(s=Z==null?void 0:Z.onResize)!==null&&s!==void 0?s:u.onResize,maxWidth:(n=Z==null?void 0:Z.maxWidth)!==null&&n!==void 0?n:u.maxWidth,minWidth:(r=Z==null?void 0:Z.minWidth)!==null&&r!==void 0?r:u.minWidth})},[Z]),Y=(0,o.useContext)(M.ZP.ConfigContext),me=Y.getPrefixCls("pro-form-drawer"),fe=R(me),xe=fe.wrapSSR,ve=fe.hashId,ae=function(n){return"".concat(me,"-").concat(n," ").concat(ve)},Pe=(0,o.useState)([]),Re=(0,g.Z)(Pe,2),ye=Re[1],De=(0,o.useState)(!1),pe=(0,g.Z)(De,2),oe=pe[0],ue=pe[1],je=(0,o.useState)(!1),he=(0,g.Z)(je,2),ie=he[0],le=he[1],Ze=(0,o.useState)(q||(Z?l==null?void 0:l.minWidth:800)),ge=(0,g.Z)(Ze,2),se=ge[0],re=ge[1],Oe=(0,v.Z)(!!ne,{value:ce||ne,onChange:ee||N}),Ee=(0,g.Z)(Oe,2),J=Ee[0],G=Ee[1],te=(0,o.useRef)(null),Me=(0,o.useCallback)(function(s){te.current===null&&s&&ye([]),te.current=s},[]),Q=(0,o.useRef)(),Be=(0,o.useCallback)(function(){var s,n,r,u=(s=(n=(r=x.formRef)===null||r===void 0?void 0:r.current)!==null&&n!==void 0?n:x.form)!==null&&s!==void 0?s:Q.current;u&&i!==null&&i!==void 0&&i.destroyOnClose&&u.resetFields()},[i==null?void 0:i.destroyOnClose,x.form,x.formRef]);(0,o.useEffect)(function(){J&&(ce||ne)&&(ee==null||ee(!0),N==null||N(!0)),ie&&re(l==null?void 0:l.minWidth)},[ne,J,ie]),(0,o.useImperativeHandle)(x.formRef,function(){return Q.current},[Q.current]);var Te=(0,o.useMemo)(function(){return K?o.cloneElement(K,(0,m.Z)((0,m.Z)({key:"trigger"},K.props),{},{onClick:function(){var s=(0,O.Z)((0,a.Z)().mark(function r(u){var T,F;return(0,a.Z)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:G(!J),le(!Object.keys(l)),(T=K.props)===null||T===void 0||(F=T.onClick)===null||F===void 0||F.call(T,u);case 3:case"end":return L.stop()}},r)}));function n(r){return s.apply(this,arguments)}return n}()})):null},[G,K,J,le,ie]),be=(0,o.useMemo)(function(){var s,n,r,u;return x.submitter===!1?!1:S()({searchConfig:{submitText:(s=(n=Y.locale)===null||n===void 0||(n=n.Modal)===null||n===void 0?void 0:n.okText)!==null&&s!==void 0?s:"\u786E\u8BA4",resetText:(r=(u=Y.locale)===null||u===void 0||(u=u.Modal)===null||u===void 0?void 0:u.cancelText)!==null&&r!==void 0?r:"\u53D6\u6D88"},resetButtonProps:{preventDefault:!0,disabled:X?oe:void 0,onClick:function(F){var _;G(!1),i==null||(_=i.onClose)===null||_===void 0||_.call(i,F)}}},x.submitter)},[x.submitter,(f=Y.locale)===null||f===void 0||(f=f.Modal)===null||f===void 0?void 0:f.okText,(p=Y.locale)===null||p===void 0||(p=p.Modal)===null||p===void 0?void 0:p.cancelText,X,oe,G,i]),We=(0,o.useCallback)(function(s,n){return(0,D.jsxs)(D.Fragment,{children:[s,te.current&&n?(0,D.jsx)(o.Fragment,{children:(0,d.createPortal)(n,te.current)},"submitter"):n]})},[]),Ae=(0,U.J)(function(){var s=(0,O.Z)((0,a.Z)().mark(function n(r){var u,T,F;return(0,a.Z)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return u=H==null?void 0:H(r),X&&u instanceof Promise&&(ue(!0),T=setTimeout(function(){return ue(!1)},X),u.finally(function(){clearTimeout(T),ue(!1)})),L.next=4,u;case 4:return F=L.sent,F&&G(!1),L.abrupt("return",F);case 7:case"end":return L.stop()}},n)}));return function(n){return s.apply(this,arguments)}}()),Ie=(0,z.X)(J,N),de=(0,o.useCallback)(function(s){var n,r,u=(document.body.offsetWidth||1e3)-(s.clientX-document.body.offsetLeft),T=(n=l==null?void 0:l.minWidth)!==null&&n!==void 0?n:q||800,F=(r=l==null?void 0:l.maxWidth)!==null&&r!==void 0?r:window.innerWidth*.8;if(u<T){re(T);return}if(u>F){re(F);return}re(u)},[l==null?void 0:l.maxWidth,l==null?void 0:l.minWidth,q]),Fe=(0,o.useCallback)(function(){document.removeEventListener("mousemove",de),document.removeEventListener("mouseup",Fe)},[de]);return xe((0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)($.Z,(0,m.Z)((0,m.Z)((0,m.Z)({title:Ce,width:se},i),Ie),{},{afterOpenChange:function(n){var r;n||Be(),i==null||(r=i.afterOpenChange)===null||r===void 0||r.call(i,n)},onClose:function(n){var r;X&&oe||(G(!1),i==null||(r=i.onClose)===null||r===void 0||r.call(i,n))},footer:x.submitter!==!1&&(0,D.jsx)("div",{ref:Me,style:{display:"flex",justifyContent:"flex-end"}}),children:[Z?(0,D.jsx)("div",{className:A()(ae("sidebar-dragger"),ve,(0,h.Z)((0,h.Z)({},ae("sidebar-dragger-min-disabled"),se===(l==null?void 0:l.minWidth)),ae("sidebar-dragger-max-disabled"),se===(l==null?void 0:l.maxWidth))),onMouseDown:function(n){var r;l==null||(r=l.onResize)===null||r===void 0||r.call(l),n.stopPropagation(),n.preventDefault(),document.addEventListener("mousemove",de),document.addEventListener("mouseup",Fe),le(!0)}}):null,(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(I.I,(0,m.Z)((0,m.Z)({formComponentType:"DrawerForm",layout:"vertical"},x),{},{formRef:Q,onInit:function(n,r){var u;x.formRef&&(x.formRef.current=r),x==null||(u=x.onInit)===null||u===void 0||u.call(x,n,r),Q.current=r},submitter:be,onFinish:function(){var s=(0,O.Z)((0,a.Z)().mark(function n(r){var u;return(0,a.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,Ae(r);case 2:return u=F.sent,F.abrupt("return",u);case 4:case"end":return F.stop()}},n)}));return function(n){return s.apply(this,arguments)}}(),contentRender:We,children:V}))})]})),Te]}))}},71566:function(k,b,e){e.d(b,{Z:function(){return d}});var h=e(62435),a=e(93246),O=e(88484),m=e(31418),g=e(72723),W=e(14726),t=e(86074);function U(I){var B=(0,h.useRef)(null),y=m.Z.useApp(),R=function(){B.current&&(B.current.click(),B.current.onchange=function(j){if(!j||!j.target)return"";var E=new FileReader;E.onload=function(f){var p,V=(p=f.target)===null||p===void 0?void 0:p.result;if(V.indexOf("FROM ")<0){(0,a.YZ)(y,"\u5BFC\u5165Dockerfile\u6587\u4EF6\u9519\u8BEF");return}typeof I.onImport=="function"&&I.onImport(V)};var c=j.target;if(c.files)try{E.readAsText(c.files[0])}catch(f){(0,a.YZ)(y,"\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Z.Item,{name:"importFile",label:"Dockerfile",children:(0,t.jsx)(W.ZP,{icon:(0,t.jsx)(O.Z,{}),block:!0,onClick:R,children:"\u5BFC\u5165\u672C\u5730Dockerfile\u6587\u4EF6"})}),(0,t.jsx)("input",{style:{display:"none"},type:"file",ref:B,name:"importFileInput"})]})}var z=e(10516),M=e(62370),$=e(5574),w=e.n($),A=e(184),P=e(86615),S=e(97462),v=e(97961),C=e(34041);function o(I){var B=(0,h.useState)([]),y=w()(B,2),R=y[0],D=y[1];return(0,h.useEffect)(function(){(0,v.MF)().then(function(j){var E=Object.keys(j.data).map(function(c){return j.data[c]});D(E)})},[]),(0,t.jsx)(M.Z,{children:(0,t.jsxs)(A.a,{trigger:(0,t.jsx)(W.ZP,{block:!0,children:"\u4F7F\u7528\u6A21\u677F\u751F\u6210"}),onFinish:function(E){return new Promise(function(c,f){var p=E[E.language+"EnvVersion"].split("|"),V=w()(p,2),K=V[0],N=V[1],i="FROM ".concat(K,`
# \u5E94\u7528\u76EE\u5F55\u4F4D\u4E8E /app
# \u53EF\u901A\u7BA1\u5BB9\u5668 - \u6587\u4EF6\u7BA1\u7406, \u4E0A\u4F20\u4EE3\u7801\u81F3\u6B64\u76EE\u5F55\u5E76\u4FEE\u6539\u6743\u9650

WORKDIR /app
VOLUME [ "/app" ]
EXPOSE 80

# \u81EA\u5B9A\u4E49\u5B89\u88C5\u7EC4\u4EF6\u3001\u6269\u5C55\u6216\u662F\u5E93, \u4F8B\u5982:
# RUN apk add --no-cache --update vim
`);switch(E.language){case"php":i+=`
                
# \u7AD9\u70B9\u76EE\u5F55\u4F4D\u4E8E /app/wwwroot \u53EF\u4E0A\u4F20\u6216\u662F\u4FEE\u6539\u7AD9\u70B9\u6587\u4EF6
# nginx \u914D\u7F6E\u4F4D\u4E8E /app/nginx/ \u53EF\u4FEE\u6539\u589E\u52A0\u81EA\u5B9A\u4E49\u914D\u7F6E
# \u901A\u8FC7\u8BBF\u95EE\u5BB9\u5668\u8FD0\u884C\u6620\u5C04\u7AEF\u53E3\uFF0C\u67E5\u770B\u73AF\u5883\u53CA\u6269\u5C55\u4FE1\u606F

`,E.language=="php"&&E.phpExt&&(i+="RUN apk add --no-cache --update ",E.phpExt.map(function(H){i+="php".concat(N,"-").concat(H," ")}));break;case"golang":i+=`
# \u53EF\u4EE5\u4FEE\u6539 RUN_COMMAND \u73AF\u5883\u53D8\u91CF, \u66F4\u6539\u542F\u52A8\u6267\u884C\u547D\u4EE4
ENV RUN_COMMAND="go version"`;break;default:break}I.onFinish(i),c(!0)})},children:[(0,t.jsx)(P.Z.Group,{radioType:"button",name:"language",label:"\u7A0B\u5E8F\u8BED\u8A00",options:R.map(function(j){return{label:j.name,value:j.name}}),required:!0}),(0,t.jsx)(S.Z,{name:["language"],children:function(E){var c=E.language;return c?(0,t.jsx)(t.Fragment,{children:R.map(function(f){if(f.name==c)return(0,t.jsxs)("div",{children:[(0,t.jsx)(M.Z,{name:"".concat(f.name,"EnvVersion"),label:"\u73AF\u5883\u7248\u672C",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7A0B\u5E8F\u8FD0\u884C\u7684\u73AF\u5883"}],children:(0,t.jsx)(C.Z,{options:f.env.map(function(p){return{label:p.name,value:p.baseImage}}),placeholder:"\u8BF7\u9009\u62E9\u5177\u4F53\u7684\u73AF\u5883\u7248\u672C"},"".concat(f.name,"Select"))},f.name),f.name=="php"&&(0,t.jsx)(M.Z,{label:"php\u6269\u5C55",name:"phpExt",children:(0,t.jsx)(C.Z,{options:f.ext.map(function(p){return{label:p,value:p}}),mode:"multiple",placeholder:"\u8BF7\u9009\u62E9\u8981\u5B89\u88C5\u7684php\u6269\u5C55"},"phpExtSelect")},"phpExt")]},"envSelect")})}):(0,t.jsx)(t.Fragment,{})}})]})})}function d(I){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(U,{onImport:function(y){var R;return(R=I.createFormRef.current)===null||R===void 0||R.setFieldValue("buildDockerfile",y),!0}}),(0,t.jsx)(o,{onFinish:function(y){var R;(R=I.createFormRef.current)===null||R===void 0||R.setFieldValue("buildDockerfile",y)}}),(0,t.jsx)(M.Z,{shouldUpdate:!0,children:function(y){var R=y.getFieldValue;return(0,t.jsx)(M.Z,{name:"buildDockerfile",children:(0,t.jsx)(z.ZP,{value:R("buildDockerfile"),onChange:function(j){var E;(E=I.createFormRef.current)===null||E===void 0||E.setFieldValue("buildDockerfile",j)},height:"1000px",theme:"light",style:{marginBottom:"20px"}})})}})]})}},70345:function(k,b,e){e.r(b),e.d(b,{default:function(){return W}});var h=e(71566),a=e(86074);function O(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(h.Z,{showImportButton:!0,defaultShow:!0})})}var m=e(38345),g=e(62435);function W(){return(0,a.jsx)("div",{children:(0,a.jsx)(m.Z,{children:(0,a.jsx)(O,{})})})}},97961:function(k,b,e){e.d(b,{MF:function(){return P},_2:function(){return w},fN:function(){return W},hG:function(){return M},vC:function(){return U}});var h=e(15009),a=e.n(h),O=e(99289),m=e.n(O),g=e(54006);function W(v){return t.apply(this,arguments)}function t(){return t=m()(a()().mark(function v(C){return a()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,g.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:C}));case 1:case"end":return d.stop()}},v)})),t.apply(this,arguments)}function U(v){return z.apply(this,arguments)}function z(){return z=m()(a()().mark(function v(C){return a()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,g.request)("/api/app/image/import-by-container-tar",{method:"POST",data:C}));case 1:case"end":return d.stop()}},v)})),z.apply(this,arguments)}function M(v){return $.apply(this,arguments)}function $(){return $=m()(a()().mark(function v(C){return a()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,g.request)("/api/app/image/import-by-image-tar",{method:"POST",data:C}));case 1:case"end":return d.stop()}},v)})),$.apply(this,arguments)}function w(v){return A.apply(this,arguments)}function A(){return A=m()(a()().mark(function v(C){return a()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,g.request)("/api/common/attach/delete",{method:"POST",data:C});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},v)})),A.apply(this,arguments)}function P(){return S.apply(this,arguments)}function S(){return S=m()(a()().mark(function v(){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,g.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return o.stop()}},v)})),S.apply(this,arguments)}}}]);
